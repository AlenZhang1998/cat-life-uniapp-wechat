{"version":3,"file":"index.js","sources":["pages/home/index.vue","pages/home/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"home-page\" :class=\"{ 'home-page--locked': showRangePicker }\">\n    <!-- 顶部卡片：展示城市、车辆概况和提醒 -->\n    <view\n      class=\"header-card animated-block animated-block--delay-0\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"header-meta\">\n        <view\n          class=\"location-row\"\n          hover-class=\"location-row__hover\"\n          @tap=\"navigateToCity\"\n        >\n          <image class=\"location-icon\" :src=\"locationIcon\" mode=\"aspectFit\" />\n          <text class=\"location-text\">{{ city }}</text>\n          <!-- <text class=\"location-arrow\">v</text> -->\n          <image class=\"dingwei_right\" :src=\"dingwei_right\" mode=\"aspectFit\" />\n        </view>\n        <view class=\"header-actions\">\n          <view class=\"chip primary\">\n            <text class=\"chip-text\">爱车相伴 {{ carInfo.heroDays }} 天</text>\n          </view>\n          <!-- <view class=\"chip outline\">\n            <text class=\"chip-text\">智驾提醒</text>\n          </view> -->\n        </view>\n      </view>\n\n      <view class=\"car-info\">\n        <text class=\"car-name\">{{ carInfo.name }}</text>\n        <!-- <text class=\"car-name\">{{ carInfo.brand }} · {{ carInfo.model }}</text> -->\n        <!-- <text class=\"car-trim\">{{ carInfo.trim }}</text> -->\n      </view>\n\n      <view v-if=\"oilPriceList.length\" class=\"price-row\">\n        <swiper\n          class=\"price-swiper\"\n          :autoplay=\"oilPriceList.length > 1\"\n          :circular=\"oilPriceList.length > 1\"\n          :interval=\"2600\"\n          vertical\n        >\n          <swiper-item v-for=\"item in oilPriceList\" :key=\"item.label\">\n            <view class=\"price-item\">\n              <text class=\"oil-type\">{{ item.label }}</text>\n              <text class=\"oil-price\">\n                <text class=\"price-number\">{{ item.value }}</text>\n                元/升\n              </text>\n            </view>\n          </swiper-item>\n        </swiper>\n      </view>\n      <view v-else class=\"price-row\">\n        <text class=\"oil-type\">{{ oilPrice.label }}</text>\n        <text class=\"oil-price\">\n          <text class=\"price-number\">{{ oilPrice.value }}</text>\n          元/升\n        </text>\n      </view>\n\n      <view class=\"reminder-banner\" v-if=\"!hasRecentRefuel\">\n        <text class=\"reminder-icon\">!</text>\n        <text class=\"reminder-text\">没有加油或者充电记录，快去添加吧～</text>\n      </view>\n    </view>\n\n    <!-- 最新油耗和能耗评级 -->\n    <view\n      class=\"latest-card animated-block animated-block--delay-1\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"latest-title\">\n        <text class=\"label\">最新油耗</text>\n        <text class=\"link\" @tap=\"handleNavigate('trend')\">查看更多</text>\n      </view>\n      <view class=\"latest-body\">\n        <text class=\"latest-number\">{{ latestFuel }} </text>\n        <text class=\"latest-unit\">升/百公里</text>\n      </view>\n\n      <view class=\"rating-row\">\n        <view class=\"rating-label\">\n          <text class=\"label\">能耗评级</text>\n        </view>\n        <view class=\"rating-badges\">\n          <view\n            class=\"rating-badge\"\n            v-for=\"level in efficiencyLevels\"\n            :key=\"level.label\"\n            :class=\"{\n              active: level.label === currentEfficiency.label && isLoggedIn,\n            }\"\n            :style=\"getBadgeStyle(level)\"\n          >\n            <text>{{ level.label }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 统计区块 -->\n    <view\n      class=\"stats-card animated-block animated-block--delay-2\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"stats-header\">\n        <text class=\"label\">统计</text>\n        <view\n          class=\"filter\"\n          hover-class=\"filter__hover\"\n          @tap=\"openRangePicker('stats')\"\n        >\n          <text class=\"filter-text\">{{ statsRange.label }}</text>\n          <text class=\"filter-arrow\">⇅</text>\n        </view>\n      </view>\n      <view class=\"stats-grid\">\n        <view class=\"stat-item\" v-for=\"item in stats\" :key=\"item.key\">\n          <text class=\"stat-label\">{{ item.label }}</text>\n          <text class=\"stat-value\" :class=\"{ accent: item.accent }\">\n            {{ item.value }}\n          </text>\n          <text class=\"stat-unit\">{{ item.unit }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 油耗变化趋势 -->\n    <view\n      class=\"trend-card animated-block animated-block--delay-3\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"trend-header\">\n        <text class=\"label\">油耗变化趋势</text>\n        <view\n          class=\"filter\"\n          hover-class=\"filter__hover\"\n          @tap=\"openRangePicker('trend')\"\n        >\n          <text class=\"filter-text\">{{ trendRange.label }}</text>\n          <text class=\"filter-arrow\">⇅</text>\n        </view>\n      </view>\n      <view class=\"trend-body\">\n        <view class=\"trend-chart__wrapper\">\n\n          <ec-canvas\n            id=\"fuelTrendChart\"\n            canvas-id=\"fuelTrendChart\"\n            class=\"trend-chart__canvas\"\n            :ec=\"fuelTrendEc\"\n          ></ec-canvas>\n\n\n\n\n\n\n        </view>\n      </view>\n      <view class=\"trend-footer\">\n        <text class=\"benchmark-label\">\n          <!-- 数据基于近 7 天行驶记录，绿线为当前车辆，红/灰线为本市参考区间。 -->\n          绿线为当前车辆，红/灰 线为本市参考区间。\n        </text>\n      </view>\n    </view>\n\n    <RangePickerOverlay\n      :visible=\"showRangePicker\"\n      title=\"请选择\"\n      :options=\"rangeOptions\"\n      :selected-key=\"pendingRangeKey\"\n      @update:selected-key=\"handlePendingRangeChange\"\n      @cancel=\"closeRangePicker\"\n      @confirm=\"confirmRangePicker\"\n    />\n\n    <LoginOverlay v-model:visible=\"showLoginSheet\" />\n    <BottomActionBar\n      active=\"fuel\"\n      :is-logged-in=\"isLoggedIn\"\n      @login-required=\"handleLoginRequired\"\n    />\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { onShow } from '@dcloudio/uni-app';\nimport { onMounted, onUnmounted, ref, watch } from 'vue';\nimport { STORAGE_KEYS } from '@/constants/storage';\nimport { CITY_LIST } from '@/data/cities';\nimport { normalizeCityName } from '@/utils/location';\nimport locationIcon from '@/static/icons/dingwei.png';\nimport dingwei_right from '@/static/icons/dingwei_right.png';\nimport BottomActionBar from '@/components/BottomActionBar.vue';\nimport RangePickerOverlay from '@/components/RangePickerOverlay.vue';\nimport LoginOverlay from '@/components/LoginOverlay.vue';\nimport { useAuth } from '@/utils/auth';\nimport { axios } from '@/utils/request';\n\n// uCharts 官方 ECharts 适配仅支持 CJS 导入，这里使用 require 方式以兼容编译到小程序端\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst echarts = require('../../wxcomponents/ec-canvas/echarts');\n\n// ================= 基础展示数据 =================\nconst DEFAULT_CITY = '未定位';\nconst normalizeOrDefault = (value?: string | null) =>\n  normalizeCityName(value) || DEFAULT_CITY;\n\nconst cityProvinceMap = new Map<string, string>();\n\nconst buildCityProvinceMap = () => {\n  CITY_LIST.forEach((item) => {\n    const normalized = normalizeCityName(item.name);\n    if (normalized && !cityProvinceMap.has(normalized)) {\n      cityProvinceMap.set(normalized, item.province);\n    }\n    if (!cityProvinceMap.has(item.name)) {\n      cityProvinceMap.set(item.name, item.province);\n    }\n  });\n};\n\nbuildCityProvinceMap();\n\nconst resolveProvinceByCity = (cityName?: string | null) => {\n  if (!cityName) return '';\n  const normalized = normalizeCityName(cityName);\n  return cityProvinceMap.get(normalized) || cityProvinceMap.get(cityName) || '';\n};\n\nconst { isLoggedIn, refreshLoginState } = useAuth();\nconst showLoginSheet = ref(false);\n\nconst city = ref(normalizeOrDefault(DEFAULT_CITY));\nconst province = ref(resolveProvinceByCity(city.value));\n\nconst applyCity = (value: string) => {\n  city.value = normalizeOrDefault(value);\n  province.value = resolveProvinceByCity(value);\n  uni.__f__('log','at pages/home/index.vue:243',233, 'applyCity = ', city.value, province.value);\n};\nwatch(\n  () => province.value,\n  (v) => {\n    if (v) fetchOilPrice(); // 有了省份，就获取油价\n  },\n  { immediate: true }\n);\nconst syncSelectedCity = () => {\n  const stored = uni.getStorageSync(STORAGE_KEYS.selectedCity) as string | null;\n  if (stored) {\n    applyCity(stored);\n  }\n};\n\nsyncSelectedCity();\nconst carInfo = ref({\n  brand: '思域',\n  model: '2025款 240TURBO CVT',\n  trim: '智趣Plus',\n  name: '--', // 思域 · 2025款 240TURBO CVT\n  heroDays: 0,\n});\ntype OilPrice = {\n  label: string;\n  value: string;\n};\n\nconst oilPrice = ref<OilPrice>({\n  label: '92#',\n  value: '--',\n});\nconst oilPriceList = ref<OilPrice[]>([\n  // {label: \"92#\", value: \"6.91\"},\n  // {label: \"95#\", value: \"7.48\"},\n  // {label: \"98#\", value: \"9.48\"},\n  // {label: \"0#\", value: \"6.53\"}\n]);\nconst oilLoading = ref(false);\nconst oilError = ref('');\n\n// 获取今日油价\nconst fetchOilPrice = async () => {\n  // if (!isLoggedIn.value) {\n  //   return\n  // }\n  if (!province.value) return;\n  oilLoading.value = true;\n  oilError.value = '';\n\n  try {\n    const res = await axios.get('/api/oil-price?province=' + province.value);\n\n    const data = res as any;\n    if (!data?.success || !Array.isArray(data.prices)) {\n      oilError.value = '油价数据异常';\n      return;\n    }\n    uni.__f__('log','at pages/home/index.vue:302',276, 'data = ', data);\n    oilPriceList.value = data.prices;\n    if (data.prices.length) {\n      oilPrice.value = data.prices[0];\n    }\n  } catch (err) {\n    uni.__f__('warn','at pages/home/index.vue:308','fetchOilPrice error:', err);\n    oilError.value = '获取油价失败';\n  } finally {\n    oilLoading.value = false;\n  }\n};\n\n// 用于控制提醒条是否展示，这里默认没有记录\nconst hasRecentRefuel = ref(false);\n\n// 最新油耗展示值，默认0\nconst latestFuel = ref('0');\n\n// 评级标签以静态数组呈现，方便后续根据接口高亮不同等级\ntype EfficiencyLevel = {\n  label: string;\n  badgeBg: string;\n  badgeColor: string;\n};\n\nconst efficiencyLevels = ref<EfficiencyLevel[]>([\n  { label: 'S', badgeBg: '#e4faed', badgeColor: '#07c263' },\n  { label: 'A', badgeBg: '#f0f9e7', badgeColor: '#94d951' },\n  { label: 'B', badgeBg: '#f4faeb', badgeColor: '#c7e969' },\n  { label: 'C', badgeBg: '#fff7e4', badgeColor: '#f7d36c' },\n  { label: 'D', badgeBg: '#fff1df', badgeColor: '#fabb59' },\n]);\nconst currentEfficiency = ref<EfficiencyLevel>(efficiencyLevels.value[0]);\n\nconst getBadgeStyle = (level: EfficiencyLevel) => ({\n  '--badge-bg': level.badgeBg,\n  '--badge-color': level.badgeColor,\n});\n\n// ⭐ 根据最新油耗计算评级\nconst getGradeByFuel = (val: number): 'S' | 'A' | 'B' | 'C' | 'D' => {\n  if (val <= 5) return 'S';\n  if (val <= 6.5) return 'A';\n  if (val <= 7.5) return 'B';\n  if (val <= 9) return 'C';\n  return 'D';\n};\n\nwatch(latestFuel, (newVal) => {\n  const num = Number(newVal);\n  if (Number.isNaN(num)) {\n    currentEfficiency.value = efficiencyLevels.value[0];\n    return;\n  }\n  const grade = getGradeByFuel(num);\n  const target =\n    efficiencyLevels.value.find((item) => item.label === grade) ||\n    efficiencyLevels.value[0];\n  currentEfficiency.value = target;\n  // uni.__f__('log','at pages/home/index.vue:362',1111, currentEfficiency.value)\n});\n\n// 计算爱车相伴天数\nconst calcHeroDays = (deliveryDate?: string | null) => {\n  if (!deliveryDate) return 0;\n  const parsed = new Date(deliveryDate.replace(/-/g, '/'));\n  if (Number.isNaN(parsed.getTime())) return 0;\n  const diff = Date.now() - parsed.getTime();\n  if (diff < 0) return 0;\n  const days = Math.floor(diff / (24 * 60 * 60 * 1000));\n  return days + 1; // 当天算第 1 天\n};\n\n// 获取用户资料信息\nconst fetchProfile = async () => {\n  if (!isLoggedIn.value) {\n    return;\n  }\n  try {\n    const res = await axios.get('/api/profile');\n    // uni.__f__('log','at pages/home/index.vue:383',1111, res)\n    const resp = res as any;\n    const data = resp.data || resp || {};\n\n    carInfo.value.name = data.favoriteCarModel;\n    carInfo.value.heroDays = calcHeroDays(data.deliveryDate);\n  } catch (err) {\n    uni.__f__('warn','at pages/home/index.vue:390','fetchProfile error:', err);\n  }\n};\n\n// 统计口径筛选\ntype RangeKey = '3m' | '6m' | '1y' | 'all';\n\ntype RangeOption = {\n  key: RangeKey;\n  label: string;\n};\n\nconst rangeOptions: RangeOption[] = [\n  { key: '3m', label: '三个月' },\n  { key: '6m', label: '半年' },\n  { key: '1y', label: '一年' },\n  { key: 'all', label: '全部' },\n];\n\nconst DAY_MS = 24 * 60 * 60 * 1000;\n\nconst normalizeDateOnly = (value?: string | Date | null) => {\n  if (!value) return null;\n  const date =\n    value instanceof Date ? value : new Date(String(value).replace(/-/g, '/'));\n\n  if (Number.isNaN(date.getTime())) return null;\n\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n};\n\nconst calcDateRangeDays = (\n  start?: string | Date | null,\n  end?: string | Date | null\n): number | null => {\n  const startDate = normalizeDateOnly(start);\n  const endDate = normalizeDateOnly(end);\n\n  if (!startDate || !endDate || endDate.getTime() < startDate.getTime()) {\n    return null;\n  }\n\n  const diff = endDate.getTime() - startDate.getTime();\n  return Math.floor(diff / DAY_MS) + 1;\n};\n\nconst calcDaysSinceEarliestRecord = (records: any[]): number | null => {\n  if (!Array.isArray(records) || records.length === 0) return null;\n\n  let earliestTime: number | null = null;\n\n  records.forEach((item) => {\n    const dateStr = item?.date || item?.refuelDate;\n    const parsed = normalizeDateOnly(dateStr);\n    if (!parsed) return;\n    const ts = parsed.getTime();\n    if (earliestTime == null || ts < earliestTime) {\n      earliestTime = ts;\n    }\n  });\n\n  if (earliestTime == null) return null;\n\n  const today = normalizeDateOnly(new Date());\n  if (!today) return null;\n\n  const diff = today.getTime() - earliestTime;\n  if (diff < 0) return null;\n\n  return Math.floor(diff / DAY_MS) + 1;\n};\n\n// 统计区块的数据源，这里把单位也一起放进来，便于展示\nconst stats = ref([\n  {\n    key: 'fuelAvg',\n    label: '平均油耗',\n    value: '0',\n    unit: '升/百公里',\n    accent: true,\n  },\n  {\n    key: 'mileageAvg',\n    label: '平均行程',\n    value: '0',\n    unit: '公里/天',\n  },\n  {\n    key: 'costAvg',\n    label: '平均油价',\n    value: '0',\n    unit: '元/公里',\n    accent: true,\n  },\n  {\n    key: 'mileageTotal',\n    label: '累计行程',\n    value: '0',\n    unit: '公里',\n  },\n  {\n    key: 'costTotal',\n    label: '累计油费',\n    value: '0',\n    unit: '元',\n  },\n  {\n    key: 'discountTotal',\n    label: '总计优惠',\n    value: '0',\n    unit: '元',\n  },\n]);\n\nconst fetchRefuelData = async (rangeKey: RangeKey = rangeOptions[3].key) => {\n  if (!isLoggedIn.value) {\n    hasRecentRefuel.value = false;\n    latestFuel.value = '0';\n    return;\n  }\n\n  try {\n    // const year = new Date().getFullYear()\n    const resolvedRange = rangeKey || rangeOptions[3].key;\n    // let url = `/api/refuels/list?year=${year}`\n\n    // if (resolvedRange !== 'all') {\n    //   url += `&range=${resolvedRange}`\n    // }\n    const url = `/api/refuels/list?range=${resolvedRange || 'all'}`;\n\n    const res = await axios.get(url);\n    const resp = res as any;\n\n    if (!resp || resp.success !== true) {\n      throw new Error('接口返回异常');\n    }\n    const payload = resp.data || resp || {};\n    const s = payload.summary || {};\n    const list = (payload.records || []) as any[];\n    const isAllRange = resolvedRange === 'all';\n\n    // 是否有加油记录 -> 控制“没有记录”提示条\n    hasRecentRefuel.value = Array.isArray(list) && list.length > 0;\n\n    // ===== 最新油耗：取最近一条有有效 consumption 的记录（非 '--'） =====\n    const latestWithConsumption = list.find((item: any) => {\n      const val = item?.consumption;\n      if (val === '--' || val == null) return false;\n      const num = Number(val);\n      return Number.isFinite(num);\n    });\n    latestFuel.value = latestWithConsumption\n      ? Number(latestWithConsumption.consumption).toFixed(2)\n      : '0';\n\n    // ===== 统计区块数据 =====\n    let avgFuelNum: number | null = null;\n    if (!isAllRange) {\n      avgFuelNum =\n        typeof s.avgFuelConsumption === 'number'\n          ? Number(s.avgFuelConsumption)\n          : null;\n    } else {\n      const consumptionIndexes: number[] = [];\n      list.forEach((item: any, idx: number) => {\n        const c = item?.consumption;\n        if (c === '--' || c == null) return;\n        const num = Number(c);\n        if (!Number.isFinite(num)) return;\n        consumptionIndexes.push(idx);\n      });\n\n      if (consumptionIndexes.length >= 2) {\n        const firstIdx = Math.min(...consumptionIndexes);\n        const lastIdx = Math.max(...consumptionIndexes);\n        const nextIdx = lastIdx + 1 < list.length ? lastIdx + 1 : lastIdx;\n\n        const first = list[firstIdx] || {};\n        const nextAfterLast = list[nextIdx] || {};\n\n        const firstOdo = Number(first.odometer);\n        const nextOdo = Number(nextAfterLast.odometer);\n\n        let distance = NaN;\n        if (Number.isFinite(firstOdo) && Number.isFinite(nextOdo)) {\n          distance = firstOdo - nextOdo;\n        }\n\n        let volumeSum = 0;\n        for (let i = firstIdx; i <= lastIdx; i++) {\n          const v = Number(list[i]?.volume);\n          if (Number.isFinite(v) && v > 0) {\n            volumeSum += v;\n          }\n        }\n\n        if (distance > 0 && volumeSum > 0) {\n          avgFuelNum = (volumeSum / distance) * 100;\n        } else {\n          avgFuelNum = null;\n        }\n      } else {\n        avgFuelNum = null;\n      }\n    }\n\n    const avgFuel =\n      avgFuelNum != null && Number.isFinite(avgFuelNum)\n        ? Number(avgFuelNum).toFixed(2)\n        : '--';\n    const totalDistanceNum =\n      s.totalDistance != null ? Number(s.totalDistance) : NaN;\n    const totalDistance = Number.isFinite(totalDistanceNum)\n      ? String(Math.round(totalDistanceNum))\n      : '--';\n    const totalAmount =\n      s.totalAmount != null ? Number(s.totalAmount).toFixed(2) : '--';\n    const avgPricePerL =\n      s.avgPricePerL != null ? Number(s.avgPricePerL).toFixed(2) : '--';\n\n    const resolvedDateRangeDaysFromList = calcDaysSinceEarliestRecord(list);\n    const resolvedDateRangeDays =\n      typeof resolvedDateRangeDaysFromList === 'number'\n        ? resolvedDateRangeDaysFromList\n        : typeof s.dateRangeDays === 'number'\n          ? s.dateRangeDays\n          : calcDateRangeDays(s.startDate, s.endDate);\n    const validDateRangeDays =\n      typeof resolvedDateRangeDays === 'number' && resolvedDateRangeDays > 0\n        ? resolvedDateRangeDays\n        : null;\n\n    const mileageAvg =\n      Number.isFinite(totalDistanceNum) && validDateRangeDays\n        ? (totalDistanceNum / validDateRangeDays).toFixed(2)\n        : '--';\n\n    stats.value = [\n      {\n        key: 'fuelAvg',\n        label: '平均油耗',\n        value: avgFuel,\n        unit: '升/百公里',\n        accent: true,\n      },\n      {\n        key: 'mileageAvg',\n        label: '平均行程',\n        value: mileageAvg,\n        unit: '公里/天',\n      },\n      {\n        key: 'costAvg',\n        label: '平均油价',\n        value: avgPricePerL === '--' ? '--' : avgPricePerL,\n        unit: '元/升',\n        accent: true,\n      },\n      {\n        key: 'mileageTotal',\n        label: '累计行程',\n        value: totalDistance,\n        unit: '公里',\n      },\n      {\n        key: 'costTotal',\n        label: '累计油费',\n        value: totalAmount,\n        unit: '元',\n      },\n      {\n        key: 'discountTotal',\n        label: '总计优惠',\n        value: '0',\n        unit: '元',\n      },\n    ];\n  } catch (err) {\n    uni.__f__('warn','at pages/home/index.vue:669','fetchRefuelData error:', err);\n  }\n};\n\n// ================ 油耗趋势图 ================\n\n// 根据加油记录构造油耗趋势数据\nconst fetchTrendData = async (rangeKey: RangeKey = rangeOptions[3].key) => {\n  if (!isLoggedIn.value) {\n    trendData.value = [];\n    return;\n  }\n\n  try {\n    const resolvedRange = rangeKey || rangeOptions[3].key;\n    const url = `/api/refuels/list?range=${resolvedRange || 'all'}`;\n\n    const res = await axios.get(url);\n    const resp = res as any;\n\n    const payload = resp.data || resp || {};\n    const s = payload.summary || {};\n    const list = (payload.records || []) as any[];\n\n    // 基准油耗（用于城市高/低位线）：用平均油耗做一个 ±15% 的区间\n    const base =\n      typeof s.avgFuelConsumption === 'number' && s.avgFuelConsumption > 0\n        ? Number(s.avgFuelConsumption)\n        : 7; // 没数据给个兜底值\n\n    const cityHigh = Number((base * 1.15).toFixed(2));\n    const cityLow = Number((base * 0.85).toFixed(2));\n\n    // 列表接口是「最近在前」，趋势要按时间正序画，所以要 reverse 一下，仅保留有有效 consumption 的记录\n    const points = list\n      .slice()\n      .reverse()\n      .filter((item: any) => {\n        const consumption = item?.consumption;\n        if (consumption === '--' || consumption == null) return false;\n        const num = Number(consumption);\n        return Number.isFinite(num);\n      })\n      .map((item: any) => {\n        const dateStr = item.date || item.refuelDate;\n        let year = NaN;\n\n        if (dateStr) {\n          const d = new Date(String(dateStr).replace(/-/g, '/'));\n          if (!Number.isNaN(d.getTime())) {\n            year = d.getFullYear();\n          }\n        }\n\n        return {\n          day: item.monthDay || '', // X 轴显示用，比如 10/09\n          year, // 用来判断是否跨年\n          value: Number(Number(item.consumption).toFixed(2)), // 当前车油耗\n          cityHigh,\n          cityLow,\n        };\n      });\n\n    trendData.value = points;\n  } catch (err) {\n    uni.__f__('warn','at pages/home/index.vue:734','fetchTrendData error:', err);\n    trendData.value = [];\n  }\n};\n\n// 油耗趋势数据，value 直接对应折线的高度\ntype TrendPoint = {\n  day: string; // '10/09'\n  year: number; // 2024 / 2025\n  value: number;\n  cityHigh: number;\n  cityLow: number;\n};\n\nconst trendData = ref<TrendPoint[]>([\n  // { day: '2025-10-01', value: 4.9, cityHigh: 8.2, cityLow: 6.1 },\n  // { day: '2025-10-02', value: 8.6, cityHigh: 8.15, cityLow: 6.05 },\n  // { day: '2025-10-04', value: 8.1, cityHigh: 8.05, cityLow: 6.0 },\n  // { day: '2025-10-06', value: 7.3, cityHigh: 8.0, cityLow: 5.96 },\n  // { day: '2025-10-09', value: 4.8, cityHigh: 7.95, cityLow: 5.92 }\n]);\n\ntype RangeTarget = 'stats' | 'trend';\n\nconst statsRange = ref<RangeOption>(rangeOptions[3]);\nconst trendRange = ref<RangeOption>(rangeOptions[3]);\nconst showRangePicker = ref(false);\nconst pendingRangeKey = ref<RangeKey>(rangeOptions[3].key);\nconst activeRangeTarget = ref<RangeTarget>('stats');\nconst isPageAnimated = ref(false);\nlet enterAnimationTimer: ReturnType<typeof setTimeout> | null = null;\n\nconst resolveTargetRange = (target: RangeTarget) =>\n  target === 'stats' ? statsRange : trendRange;\n\nconst runPageEnterAnimation = () => {\n  if (enterAnimationTimer) {\n    clearTimeout(enterAnimationTimer);\n    enterAnimationTimer = null;\n  }\n  // Reset visible state before re-triggering the transition\n  isPageAnimated.value = false;\n  enterAnimationTimer = setTimeout(() => {\n    isPageAnimated.value = true;\n  }, 30);\n};\n\nconst openRangePicker = (target: RangeTarget) => {\n  activeRangeTarget.value = target;\n  pendingRangeKey.value = resolveTargetRange(target).value.key;\n  showRangePicker.value = true;\n};\n\nconst closeRangePicker = () => {\n  showRangePicker.value = false;\n};\n\nconst handlePendingRangeChange = (value: RangeKey | null) => {\n  if (value) {\n    pendingRangeKey.value = value;\n  }\n};\n\nconst applyRangeSelection = (target: RangeTarget, key: RangeKey) => {\n  const targetOption = rangeOptions.find((option) => option.key === key);\n  if (!targetOption) return;\n\n  const rangeRef = resolveTargetRange(target);\n  const changed = rangeRef.value.key !== targetOption.key;\n  rangeRef.value = targetOption;\n  pendingRangeKey.value = targetOption.key;\n\n  if (changed) {\n    if (target === 'stats') {\n      fetchRefuelData(targetOption.key);\n    } else {\n      // 趋势卡片的筛选变化时，单独拉趋势数据\n      fetchTrendData(targetOption.key);\n    }\n  }\n\n  const targetLabel = target === 'stats' ? '统计' : '趋势';\n  uni.showToast({\n    title: `${targetLabel}已切换到${targetOption.label}`,\n    icon: 'none',\n  });\n};\n\nconst confirmRangePicker = (value?: RangeKey | null) => {\n  const finalKey = value || pendingRangeKey.value;\n  if (finalKey) {\n    applyRangeSelection(activeRangeTarget.value, finalKey);\n  }\n  closeRangePicker();\n};\n\nlet fuelTrendChart: any = null;\n\nconst buildTrendOption = () => {\n  const years = trendData.value.map((item) => item.year); // ⭐ 新增：每个点对应的年份\n  const categories = trendData.value.map((item) => item.day);\n  const actualSeries = trendData.value.map((item) => item.value);\n  const highSeries = trendData.value.map((item) => item.cityHigh);\n  const lowSeries = trendData.value.map((item) => item.cityLow);\n  const cityLegendHigh = `${city.value}油耗参考-高位`;\n  const cityLegendLow = `${city.value}油耗参考-低位`;\n  const allValues = [...actualSeries, ...highSeries, ...lowSeries].filter(\n    (v) => typeof v === 'number' && !Number.isNaN(v)\n  );\n\n  const yMin =\n    allValues.length > 0 ? Math.floor(Math.min(...allValues) - 0.5) : 4;\n  const yMax =\n    allValues.length > 0 ? Math.ceil(Math.max(...allValues) + 0.5) : 9;\n\n  return {\n    color: ['#F47274', '#11B561', '#AEB5C0'],\n    animationDuration: 700,\n    legend: {\n      left: 24,\n      top: 12,\n      icon: 'roundRect',\n      itemWidth: 20,\n      itemHeight: 6,\n      textStyle: {\n        color: '#5F6673',\n        fontSize: 8,\n      },\n      data: [cityLegendHigh, '油耗', cityLegendLow],\n    },\n    tooltip: {\n      trigger: 'axis',\n      backgroundColor: 'rgba(28,31,43,0.9)',\n      borderWidth: 0,\n      textStyle: {\n        color: '#fff',\n        fontSize: 12,\n      },\n      axisPointer: {\n        type: 'line',\n        lineStyle: {\n          color: '#0AB068',\n          width: 1,\n          type: 'dashed',\n        },\n      },\n    },\n    grid: {\n      left: 40,\n      right: 30,\n      top: 40,\n      bottom: 60,\n    },\n    xAxis: {\n      type: 'category',\n      data: categories,\n      boundaryGap: false,\n      axisLine: { lineStyle: { color: '#D0D7E3' } },\n      axisTick: { show: false },\n      axisLabel: {\n        color: '#8a93a0',\n        fontSize: 12,\n        margin: 16,\n        interval: 0,\n        formatter: (value: string, index: number) => {\n          const year = years[index];\n          const prevYear = index > 0 ? years[index - 1] : null;\n\n          // year 解析失败，就正常显示\n          if (!year || Number.isNaN(year)) {\n            return value;\n          }\n\n          // 第一个点，或者年份发生变化 -> 带上年份前缀：24年10/09\n          if (index === 0 || year !== prevYear) {\n            const shortYear = String(year).slice(-2);\n            return `${shortYear}年${value}`;\n          }\n\n          // 同一年 -> 只显示日期：10/09\n          return value;\n        },\n      },\n      splitLine: { show: false },\n    },\n    yAxis: {\n      type: 'value',\n      // min: 4,\n      // max: 9,\n      min: yMin,\n      max: yMax,\n      interval: 1,\n      axisLine: { show: false },\n      axisTick: { show: false },\n      axisLabel: {\n        color: '#8a93a0',\n        fontSize: 12,\n        formatter: (value: number) => value.toFixed(1),\n      },\n      splitLine: {\n        lineStyle: { color: '#E1E6EF', type: 'dashed' },\n      },\n    },\n    series: [\n      {\n        name: cityLegendHigh,\n        type: 'line',\n        data: highSeries,\n        smooth: true,\n        showSymbol: true,\n        symbolSize: 2,\n        lineStyle: { width: 1 },\n      },\n      {\n        name: '油耗',\n        type: 'line',\n        data: actualSeries,\n        smooth: true,\n        showSymbol: true,\n        symbolSize: 2,\n        lineStyle: { width: 2 },\n        itemStyle: { color: '#11B97A' },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [\n              { offset: 0, color: 'rgba(17,181,97,0.18)' },\n              { offset: 1, color: 'rgba(17,181,97,0)' },\n            ],\n          },\n        },\n      },\n      {\n        name: cityLegendLow,\n        type: 'line',\n        data: lowSeries,\n        smooth: true,\n        showSymbol: true,\n        symbolSize: 2,\n        lineStyle: { width: 1, type: 'dashed', color: '#AEB5C0' },\n        itemStyle: { color: '#AEB5C0' },\n      },\n    ],\n  };\n};\n\nconst initFuelTrendChart = (\n  canvas: any,\n  width: number,\n  height: number,\n  dpr: number\n) => {\n  if (!canvas) {\n    return null;\n  }\n  const chart = echarts.init(canvas, null, {\n    width,\n    height,\n    devicePixelRatio: dpr,\n  });\n  canvas.setChart?.(chart);\n  chart.setOption(buildTrendOption());\n  fuelTrendChart = chart;\n  return chart;\n};\n\nconst fuelTrendEc = ref({\n  lazyLoad: false,\n  onInit: initFuelTrendChart,\n});\n\nconst refreshFuelTrendChart = () => {\n  if (fuelTrendChart) {\n    fuelTrendChart.setOption(buildTrendOption(), true);\n  }\n};\n\nwatch(\n  trendData,\n  () => {\n    refreshFuelTrendChart();\n  },\n  { deep: true }\n);\n\nwatch(city, () => {\n  refreshFuelTrendChart();\n});\n\nconst handleLoginRequired = () => {\n  if (!isLoggedIn.value) {\n    showLoginSheet.value = true;\n  }\n};\n\n/**\n * 统一处理页面跳转或后续功能入口\n * @param actionKey 操作 key\n */\nconst handleNavigate = (actionKey: string) => {\n  uni.showToast({\n    title: `功能 ${actionKey} 开发中`,\n    icon: 'none',\n  });\n};\n\nconst navigateToCity = () => {\n  uni.navigateTo({\n    url: `/pages/city/index?currentCity=${encodeURIComponent(city.value)}`,\n    events: {\n      'city-selected': (selectedCity: string) => {\n        if (selectedCity) {\n          applyCity(selectedCity);\n        }\n      },\n    },\n  });\n};\n\nonShow(() => {\n  refreshLoginState();\n  syncSelectedCity();\n  runPageEnterAnimation();\n\n  // 获取用户资料信息和加油记录数据\n  fetchProfile();\n  fetchRefuelData(statsRange.value.key);\n  // 获取趋势数据\n  fetchTrendData(trendRange.value.key);\n});\n\nonMounted(() => {\n  runPageEnterAnimation();\n});\nonUnmounted(() => {\n  fuelTrendChart?.dispose();\n  fuelTrendChart = null;\n  if (enterAnimationTimer) {\n    clearTimeout(enterAnimationTimer);\n    enterAnimationTimer = null;\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/uni.scss';\n\n.home-page {\n  // padding: 24rpx 32rpx 120rpx;\n  padding: 24rpx 32rpx calc(180rpx + env(safe-area-inset-bottom, 0px));\n  padding-top: calc(\n    34rpx + var(--status-bar-height, env(safe-area-inset-top, 0px))\n  );\n  box-sizing: border-box;\n\n  &.home-page--locked {\n    height: 100vh;\n    overflow: hidden;\n  }\n\n  // Shared entry animation for the main hero cards\n  .animated-block {\n    opacity: 0;\n    transform: translate3d(0, 36rpx, 0) scale(0.98);\n    transition-property: opacity, transform;\n    transition-duration: 0.55s, 0.65s;\n    transition-timing-function: ease, cubic-bezier(0.22, 0.61, 0.36, 1);\n    will-change: opacity, transform;\n  }\n\n  .animated-block--visible {\n    opacity: 1;\n    transform: translate3d(0, 0, 0) scale(1);\n  }\n\n  .animated-block--delay-0 {\n    transition-delay: 0ms;\n  }\n\n  .animated-block--delay-1 {\n    transition-delay: 120ms;\n  }\n\n  .animated-block--delay-2 {\n    transition-delay: 200ms;\n  }\n\n  .animated-block--delay-3 {\n    transition-delay: 280ms;\n  }\n\n  // Soft animated gradient hero card\n  .header-card {\n    background: linear-gradient(180deg, #58b1ff 0%, #1ec15f 100%);\n    border-radius: 48rpx 48rpx 32rpx 32rpx;\n    padding: 48rpx 40rpx;\n    color: #fff;\n    box-shadow: 0 24rpx 40rpx rgba(24, 160, 88, 0.25);\n    margin-bottom: 32rpx;\n    position: relative;\n    overflow: hidden;\n    background-size: 240% 240%;\n    animation: heroGradient 10s ease-in-out infinite alternate;\n\n    &::after {\n      content: '';\n      position: absolute;\n      inset: 0;\n      background: radial-gradient(\n          circle at 20% 20%,\n          rgba(255, 255, 255, 0.3),\n          transparent 45%\n        ),\n        radial-gradient(\n          circle at 80% 0%,\n          rgba(255, 255, 255, 0.2),\n          transparent 40%\n        );\n      opacity: 0.35;\n      pointer-events: none;\n      mix-blend-mode: screen;\n      animation: heroGlow 12s linear infinite;\n    }\n\n    .header-meta {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 32rpx;\n\n      .location-row {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 28rpx;\n        font-weight: 600;\n\n        .location-icon {\n          width: 32rpx;\n          height: 32rpx;\n          margin-right: 10rpx;\n          flex-shrink: 0;\n          display: block;\n        }\n\n        .location-text {\n          // margin-right: 8rpx;\n        }\n\n        .dingwei_right {\n          width: 26rpx;\n          height: 26rpx;\n          margin-left: 6rpx;\n          flex-shrink: 0;\n          display: block;\n        }\n      }\n\n      .location-row__hover {\n        opacity: 0.7;\n      }\n\n      .header-actions {\n        display: flex;\n        gap: 16rpx;\n\n        .chip {\n          padding: 12rpx 28rpx;\n          border-radius: 999rpx;\n          font-size: 24rpx;\n          font-weight: 600;\n\n          .chip-text {\n            white-space: nowrap;\n          }\n        }\n\n        .chip.primary {\n          background-color: rgba(255, 255, 255, 0.25);\n        }\n\n        .chip.outline {\n          border: 2rpx solid rgba(255, 255, 255, 0.45);\n          background-color: transparent;\n        }\n      }\n    }\n\n    .car-info {\n      margin-bottom: 24rpx;\n\n      .car-name {\n        display: block;\n        font-size: 40rpx;\n        font-weight: 700;\n      }\n\n      .car-trim {\n        display: block;\n        margin-top: 8rpx;\n        font-size: 26rpx;\n        opacity: 0.9;\n      }\n    }\n\n    .price-row {\n      display: flex;\n      align-items: center;\n      gap: 16rpx;\n      margin-bottom: 24rpx;\n\n      .price-swiper {\n        height: 64rpx;\n        width: 100%;\n      }\n\n      .price-item {\n        display: flex;\n        align-items: baseline;\n        gap: 16rpx;\n      }\n\n      .oil-type {\n        font-size: 32rpx;\n        font-weight: 600;\n        padding: 8rpx 20rpx;\n        background-color: rgba(255, 255, 255, 0.2);\n        border-radius: 999rpx;\n      }\n\n      .oil-price {\n        .price-number {\n          font-size: 40rpx;\n          font-weight: 700;\n          margin-right: 6rpx;\n        }\n      }\n    }\n\n    .reminder-banner {\n      margin-top: 24rpx;\n      background-color: rgba(255, 255, 255, 0.2);\n      border-radius: 24rpx;\n      padding: 20rpx 24rpx;\n      display: flex;\n      align-items: center;\n      font-size: 24rpx;\n\n      .reminder-icon {\n        margin-right: 12rpx;\n      }\n\n      .reminder-text {\n        white-space: nowrap;\n      }\n    }\n  }\n\n  .latest-card,\n  .stats-card,\n  .trend-card {\n    background-color: #fff;\n    border-radius: $card-radius;\n    padding: $card-padding;\n    box-shadow: $soft-shadow;\n    margin-bottom: 32rpx;\n  }\n\n  .latest-title,\n  .stats-header,\n  .trend-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20rpx;\n  }\n\n  .label {\n    font-size: 30rpx;\n    font-weight: 600;\n  }\n\n  .link {\n    font-size: 24rpx;\n    color: $primary-dark;\n  }\n\n  .latest-card {\n    .latest-body {\n      display: flex;\n      align-items: baseline;\n      margin-bottom: 24rpx;\n\n      .latest-number {\n        font-size: 72rpx;\n        font-weight: 700;\n        line-height: 1;\n        margin-right: 12rpx;\n      }\n\n      .latest-unit {\n        font-size: 26rpx;\n        color: $muted-text;\n      }\n    }\n\n    .rating-row {\n      display: flex;\n      align-items: center;\n      gap: 32rpx;\n\n      .rating-label {\n        flex: 1;\n      }\n\n      .rating-badges {\n        flex: 0 0 50%;\n        max-width: 50%;\n        display: flex;\n        gap: 12rpx;\n        align-items: center;\n        justify-content: space-between;\n      }\n\n      .rating-badge {\n        width: 56rpx;\n        height: 56rpx;\n        padding: 0 6rpx;\n        border-radius: 32rpx;\n        background: var(--badge-bg, #edf3ef);\n        color: var(--badge-color, $primary-dark);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        // clip-path: polygon(25% 6%, 75% 6%, 100% 50%, 75% 94%, 25% 94%, 0% 50%);\n        clip-path: polygon(50% 0%, 94% 25%, 94% 75%, 50% 100%, 6% 75%, 6% 25%);\n        transform: scale(0.88) translateY(0rpx);\n        opacity: 0.88;\n        transition: transform 0.25s ease, background 0.25s ease,\n          color 0.25s ease, box-shadow 0.25s ease;\n        box-shadow: inset 0 0 0 0 rgba(255, 255, 255, 0.25);\n      }\n\n      .rating-badge text {\n        line-height: 1;\n        font-size: 28rpx;\n        font-weight: 700;\n      }\n\n      .rating-badge.active {\n        background: var(--badge-color, $primary-color);\n        color: #fff;\n        transform: scale(1.12) translateY(0);\n        opacity: 1;\n        box-shadow: 0 18rpx 28rpx rgba(30, 193, 95, 0.35);\n      }\n\n      .rating-badge.active text {\n        font-size: 34rpx;\n      }\n    }\n  }\n\n  .stats-card {\n    .stats-grid {\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      gap: 24rpx;\n\n      .stat-item {\n        background-color: #f7f9fb;\n        border-radius: 20rpx;\n        padding: 20rpx;\n\n        .stat-label {\n          font-size: 24rpx;\n          color: $muted-text;\n        }\n\n        .stat-value {\n          display: block;\n          font-size: 36rpx;\n          font-weight: 700;\n          margin: 12rpx 0 6rpx;\n        }\n\n        .stat-value.accent {\n          color: $primary-dark;\n        }\n\n        .stat-unit {\n          font-size: 22rpx;\n          color: $muted-text;\n        }\n      }\n    }\n  }\n\n  .trend-card {\n    .trend-body {\n      // margin: 16rpx 0 24rpx;\n    }\n\n    .trend-chart__wrapper {\n      border-radius: 16rpx;\n      border: 1rpx solid rgba(203, 210, 221, 0.3);\n      background: #fff;\n      // padding: 8rpx 0 0;\n      height: 600rpx;\n      overflow: hidden;\n    }\n\n    .trend-chart__canvas {\n      width: 100%;\n      height: 100%;\n      display: block;\n    }\n\n    .trend-chart__fallback {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: $muted-text;\n      font-size: 24rpx;\n      // padding: 0 24rpx;\n      text-align: center;\n      background: linear-gradient(180deg, #f9fbff 0%, #f1f4f9 100%);\n    }\n\n    .trend-footer {\n      color: $muted-text;\n      font-size: 22rpx;\n    }\n  }\n\n  .filter {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    padding: 8rpx 16rpx;\n    border-radius: 999rpx;\n    background-color: #f2f5f8;\n    color: $muted-text;\n\n    .filter-text {\n      font-size: 24rpx;\n    }\n\n    .filter-arrow {\n      font-size: 22rpx;\n    }\n  }\n\n  .filter.filter__hover {\n    opacity: 0.7;\n  }\n}\n\n@keyframes heroGradient {\n  0% {\n    background-position: 0% 0%;\n  }\n  100% {\n    background-position: 100% 100%;\n  }\n}\n\n@keyframes heroGlow {\n  0% {\n    transform: translate3d(0, 0, 0) scale(1);\n    opacity: 0.35;\n  }\n  50% {\n    transform: translate3d(-2%, 4%, 0) scale(1.05);\n    opacity: 0.5;\n  }\n  100% {\n    transform: translate3d(2%, -3%, 0) scale(1.02);\n    opacity: 0.35;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/alan2/Downloads/zm/cat-life-uniapp-wechat/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["normalizeCityName","CITY_LIST","useAuth","ref","uni","watch","STORAGE_KEYS","axios","onShow","onMounted","onUnmounted"],"mappings":"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"}
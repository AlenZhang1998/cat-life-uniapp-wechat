{"version":3,"file":"index.js","sources":["pages/home/index.vue","../../../App/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"home-page\" :class=\"{ 'home-page--locked': showRangePicker }\">\r\n    <!-- 顶部卡片：展示城市、车辆概况和提醒 -->\r\n    <view\r\n      class=\"header-card animated-block animated-block--delay-0\"\r\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\r\n    >\r\n      <view class=\"header-meta\">\r\n        <view\r\n          class=\"location-row\"\r\n          hover-class=\"location-row__hover\"\r\n          @tap=\"navigateToCity\"\r\n        >\r\n          <image\r\n            class=\"location-icon\"\r\n            :src=\"locationIcon\"\r\n            mode=\"aspectFit\"\r\n          />\r\n          <text class=\"location-text\">{{ city }}</text>\r\n          <!-- <text class=\"location-arrow\">v</text> -->\r\n          <image\r\n            class=\"dingwei_right\"\r\n            :src=\"dingwei_right\"\r\n            mode=\"aspectFit\"\r\n          />\r\n        </view>\r\n        <view class=\"header-actions\">\r\n          <view class=\"chip primary\">\r\n            <text class=\"chip-text\">下次保养时间</text>\r\n          </view>\r\n          <!-- <view class=\"chip outline\">\r\n            <text class=\"chip-text\">智驾提醒</text>\r\n          </view> -->\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"car-info\">\r\n        <text class=\"car-name\">{{ carInfo.brand }} · {{ carInfo.model }}</text>\r\n        <text class=\"car-trim\">{{ carInfo.trim }}</text>\r\n      </view>\r\n\r\n      <!-- <view class=\"price-row\">\r\n        <text class=\"oil-type\">{{ oilPrice.label }}</text>\r\n        <text class=\"oil-price\">\r\n          <text class=\"price-number\">{{ oilPrice.value }}</text>\r\n          元/升\r\n        </text>\r\n      </view> -->\r\n\r\n      <view class=\"reminder-banner\" v-if=\"!hasRecentRefuel\">\r\n        <text class=\"reminder-icon\">!</text>\r\n        <text class=\"reminder-text\">没有加油或者充电记录，快去添加吧～</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 最新油耗和能耗评级 -->\r\n    <view\r\n      class=\"latest-card animated-block animated-block--delay-1\"\r\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\r\n    >\r\n      <view class=\"latest-title\">\r\n        <text class=\"label\">最新油耗</text>\r\n        <text class=\"link\" @tap=\"handleNavigate('trend')\">查看更多</text>\r\n      </view>\r\n      <view class=\"latest-body\">\r\n        <text class=\"latest-number\">{{ latestFuel }} </text>\r\n        <text class=\"latest-unit\">升/百公里</text>\r\n      </view>\r\n\r\n      <view class=\"rating-row\">\r\n        <view class=\"rating-label\">\r\n          <text class=\"label\">能耗评级</text>\r\n        </view>\r\n        <view class=\"rating-badges\">\r\n          <view\r\n            class=\"rating-badge\"\r\n            v-for=\"level in efficiencyLevels\"\r\n            :key=\"level.label\"\r\n            :class=\"{ active: level.label === currentEfficiency.label }\"\r\n            :style=\"getBadgeStyle(level)\"\r\n          >\r\n            <text>{{ level.label }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 统计区块 -->\r\n    <view\r\n      class=\"stats-card animated-block animated-block--delay-2\"\r\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\r\n    >\r\n      <view class=\"stats-header\">\r\n        <text class=\"label\">统计</text>\r\n        <view\r\n          class=\"filter\"\r\n          hover-class=\"filter__hover\"\r\n          @tap=\"openRangePicker('stats')\"\r\n        >\r\n          <text class=\"filter-text\">{{ statsRange.label }}</text>\r\n          <text class=\"filter-arrow\">⇅</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"stats-grid\">\r\n        <view class=\"stat-item\" v-for=\"item in stats\" :key=\"item.key\">\r\n          <text class=\"stat-label\">{{ item.label }}</text>\r\n          <text class=\"stat-value\" :class=\"{ accent: item.accent }\">\r\n            {{ item.value }}\r\n          </text>\r\n          <text class=\"stat-unit\">{{ item.unit }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 油耗变化趋势 -->\r\n    <view\r\n      class=\"trend-card animated-block animated-block--delay-3\"\r\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\r\n    >\r\n      <view class=\"trend-header\">\r\n        <text class=\"label\">油耗变化趋势</text>\r\n        <view\r\n          class=\"filter\"\r\n          hover-class=\"filter__hover\"\r\n          @tap=\"openRangePicker('trend')\"\r\n        >\r\n          <text class=\"filter-text\">{{ trendRange.label }}</text>\r\n          <text class=\"filter-arrow\">⇅</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"trend-body\">\r\n        <view class=\"trend-chart__wrapper\">\r\n\r\n          <ec-canvas\r\n            id=\"fuelTrendChart\"\r\n            canvas-id=\"fuelTrendChart\"\r\n            class=\"trend-chart__canvas\"\r\n            :ec=\"fuelTrendEc\"\r\n          ></ec-canvas>\r\n\r\n\r\n\r\n\r\n\r\n\r\n        </view>\r\n      </view>\r\n      <view class=\"trend-footer\">\r\n        <text class=\"benchmark-label\">\r\n          数据基于近 7 天行驶记录，绿线为当前车辆，红/灰线为本市参考区间。\r\n        </text>\r\n      </view>\r\n    </view>\r\n\r\n    <RangePickerOverlay\r\n      :visible=\"showRangePicker\"\r\n      title=\"请选择\"\r\n      :options=\"rangeOptions\"\r\n      :selected-key=\"pendingRangeKey\"\r\n      @update:selected-key=\"handlePendingRangeChange\"\r\n      @cancel=\"closeRangePicker\"\r\n      @confirm=\"confirmRangePicker\"\r\n    />\r\n\r\n    <BottomActionBar active=\"fuel\" />\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { onShow } from '@dcloudio/uni-app'\r\nimport { onMounted, onUnmounted, ref, watch } from 'vue'\r\nimport { STORAGE_KEYS } from '@/constants/storage'\r\nimport { normalizeCityName } from '@/utils/location'\r\nimport locationIcon from '@/static/icons/dingwei.png'\r\nimport dingwei_right from '@/static/icons/dingwei_right.png'\r\nimport BottomActionBar from '@/components/BottomActionBar.vue'\r\nimport RangePickerOverlay from '@/components/RangePickerOverlay.vue'\r\n// uCharts 官方 ECharts 适配仅支持 CJS 导入，这里使用 require 方式以兼容编译到小程序端\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst echarts = require('../../wxcomponents/ec-canvas/echarts')\r\n\r\n// ================= 基础展示数据 =================\r\nconst DEFAULT_CITY = '深圳市'\r\nconst normalizeOrDefault = (value?: string | null) =>\r\n  normalizeCityName(value) || DEFAULT_CITY\r\n\r\nconst city = ref(normalizeOrDefault(DEFAULT_CITY))\r\n\r\nconst syncSelectedCity = () => {\r\n  const stored = uni.getStorageSync(\r\n    STORAGE_KEYS.selectedCity\r\n  ) as string | null\r\n  if (stored) {\r\n    city.value = normalizeOrDefault(stored)\r\n  }\r\n}\r\n\r\nsyncSelectedCity()\r\nconst carInfo = ref({\r\n  brand: '思域',\r\n  model: '2025款 240TURBO CVT',\r\n  trim: '智趣Plus'\r\n})\r\nconst oilPrice = ref({\r\n  label: '92#',\r\n  value: '7.07'\r\n})\r\n\r\n// 用于控制提醒条是否展示，这里默认没有记录\r\nconst hasRecentRefuel = ref(false)\r\n\r\n// 最新油耗展示值，可在后续与服务端对接时替换\r\nconst latestFuel = ref('4.80')\r\n\r\n// 评级标签以静态数组呈现，方便后续根据接口高亮不同等级\r\ntype EfficiencyLevel = {\r\n  label: string\r\n  badgeBg: string\r\n  badgeColor: string\r\n}\r\n\r\nconst efficiencyLevels = ref<EfficiencyLevel[]>([\r\n  { label: 'S', badgeBg: '#e4faed', badgeColor: '#07c263' },\r\n  { label: 'A', badgeBg: '#f0f9e7', badgeColor: '#94d951' },\r\n  { label: 'B', badgeBg: '#f4faeb', badgeColor: '#c7e969' },\r\n  { label: 'C', badgeBg: '#fff7e4', badgeColor: '#f7d36c' },\r\n  { label: 'D', badgeBg: '#fff1df', badgeColor: '#fabb59' }\r\n])\r\nconst currentEfficiency = ref<EfficiencyLevel>(efficiencyLevels.value[0])\r\n\r\nconst getBadgeStyle = (level: EfficiencyLevel) => ({\r\n  '--badge-bg': level.badgeBg,\r\n  '--badge-color': level.badgeColor\r\n})\r\n\r\n// 统计区块的数据源，这里把单位也一起放进来，便于展示\r\nconst stats = ref([\r\n  {\r\n    key: 'fuelAvg',\r\n    label: '平均油耗',\r\n    value: '5.71',\r\n    unit: '升/百公里',\r\n    accent: true\r\n  },\r\n  {\r\n    key: 'mileageAvg',\r\n    label: '平均行程',\r\n    value: '92.76',\r\n    unit: '公里/天'\r\n  },\r\n  {\r\n    key: 'costAvg',\r\n    label: '平均油费',\r\n    value: '0.35',\r\n    unit: '元/公里',\r\n    accent: true\r\n  },\r\n  {\r\n    key: 'mileageTotal',\r\n    label: '累计行程',\r\n    value: '1577',\r\n    unit: '公里'\r\n  },\r\n  {\r\n    key: 'costTotal',\r\n    label: '累计油费',\r\n    value: '836.7',\r\n    unit: '元'\r\n  },\r\n  {\r\n    key: 'discountTotal',\r\n    label: '总计优惠',\r\n    value: '128.4',\r\n    unit: '元'\r\n  }\r\n])\r\n\r\n// 油耗趋势数据，value 直接对应折线的高度\r\ntype TrendPoint = {\r\n  day: string\r\n  value: number\r\n  cityHigh: number\r\n  cityLow: number\r\n}\r\n\r\nconst trendData = ref<TrendPoint[]>([\r\n  { day: '2025-10-01', value: 4.9, cityHigh: 8.2, cityLow: 6.1 },\r\n  { day: '2025-10-02', value: 8.6, cityHigh: 8.15, cityLow: 6.05 },\r\n  { day: '2025-10-04', value: 8.1, cityHigh: 8.05, cityLow: 6.0 },\r\n  { day: '2025-10-06', value: 7.3, cityHigh: 8.0, cityLow: 5.96 },\r\n  { day: '2025-10-09', value: 4.8, cityHigh: 7.95, cityLow: 5.92 }\r\n])\r\n\r\n// 统计口径筛选，目前仅用于展示标签\r\ntype RangeKey = '3m' | '6m' | '1y' | 'all'\r\n\r\ntype RangeOption = {\r\n  key: RangeKey\r\n  label: string\r\n}\r\n\r\nconst rangeOptions: RangeOption[] = [\r\n  { key: '3m', label: '三个月' },\r\n  { key: '6m', label: '半年' },\r\n  { key: '1y', label: '一年' },\r\n  { key: 'all', label: '全部' }\r\n]\r\n\r\ntype RangeTarget = 'stats' | 'trend'\r\n\r\nconst statsRange = ref<RangeOption>(rangeOptions[3])\r\nconst trendRange = ref<RangeOption>(rangeOptions[3])\r\nconst showRangePicker = ref(false)\r\nconst pendingRangeKey = ref<RangeKey>(rangeOptions[3].key)\r\nconst activeRangeTarget = ref<RangeTarget>('stats')\r\nconst isPageAnimated = ref(false)\r\nlet enterAnimationTimer: ReturnType<typeof setTimeout> | null = null\r\n\r\nconst resolveTargetRange = (target: RangeTarget) =>\r\n  target === 'stats' ? statsRange : trendRange\r\n\r\nconst runPageEnterAnimation = () => {\r\n  if (enterAnimationTimer) {\r\n    clearTimeout(enterAnimationTimer)\r\n    enterAnimationTimer = null\r\n  }\r\n  // Reset visible state before re-triggering the transition\r\n  isPageAnimated.value = false\r\n  enterAnimationTimer = setTimeout(() => {\r\n    isPageAnimated.value = true\r\n  }, 30)\r\n}\r\n\r\nconst openRangePicker = (target: RangeTarget) => {\r\n  activeRangeTarget.value = target\r\n  pendingRangeKey.value = resolveTargetRange(target).value.key\r\n  showRangePicker.value = true\r\n}\r\n\r\nconst closeRangePicker = () => {\r\n  showRangePicker.value = false\r\n}\r\n\r\nconst handlePendingRangeChange = (value: RangeKey | null) => {\r\n  if (value) {\r\n    pendingRangeKey.value = value\r\n  }\r\n}\r\n\r\nconst confirmRangePicker = () => {\r\n  const target = rangeOptions.find((option) => option.key === pendingRangeKey.value)\r\n  if (target) {\r\n    const rangeRef = resolveTargetRange(activeRangeTarget.value)\r\n    rangeRef.value = target\r\n  }\r\n  closeRangePicker()\r\n}\r\n\r\n// ================ 油耗趋势图 ================\r\nlet fuelTrendChart: any = null\r\n\r\nconst buildTrendOption = () => {\r\n  const categories = trendData.value.map((item) => item.day)\r\n  const actualSeries = trendData.value.map((item) => item.value)\r\n  const highSeries = trendData.value.map((item) => item.cityHigh)\r\n  const lowSeries = trendData.value.map((item) => item.cityLow)\r\n  const cityLegendHigh = `${city.value}油耗参考-高位`\r\n  const cityLegendLow = `${city.value}油耗参考-低位`\r\n\r\n  return {\r\n    color: ['#F47274', '#11B561', '#AEB5C0'],\r\n    animationDuration: 700,\r\n    legend: {\r\n      left: 24,\r\n      top: 12,\r\n      icon: 'roundRect',\r\n      itemWidth: 20,\r\n      itemHeight: 6,\r\n      textStyle: {\r\n        color: '#5F6673',\r\n        fontSize: 8\r\n      },\r\n      data: [cityLegendHigh, '油耗', cityLegendLow]\r\n    },\r\n    tooltip: {\r\n      trigger: 'axis',\r\n      backgroundColor: 'rgba(28,31,43,0.9)',\r\n      borderWidth: 0,\r\n      textStyle: {\r\n        color: '#fff',\r\n        fontSize: 12\r\n      },\r\n      axisPointer: {\r\n        type: 'line',\r\n        lineStyle: {\r\n          color: '#0AB068',\r\n          width: 1,\r\n          type: 'dashed'\r\n        }\r\n      }\r\n    },\r\n    grid: {\r\n      left: 40,\r\n      right: 30,\r\n      top: 40,\r\n      bottom: 60\r\n    },\r\n    xAxis: {\r\n      type: 'category',\r\n      data: categories,\r\n      boundaryGap: false,\r\n      axisLine: { lineStyle: { color: '#D0D7E3' } },\r\n      axisTick: { show: false },\r\n      axisLabel: {\r\n        color: '#8a93a0',\r\n        fontSize: 12,\r\n        margin: 16\r\n      },\r\n      splitLine: { show: false }\r\n    },\r\n    yAxis: {\r\n      type: 'value',\r\n      min: 4,\r\n      max: 9,\r\n      interval: 1,\r\n      axisLine: { show: false },\r\n      axisTick: { show: false },\r\n      axisLabel: {\r\n        color: '#8a93a0',\r\n        fontSize: 12,\r\n        formatter: (value: number) => value.toFixed(1)\r\n      },\r\n      splitLine: {\r\n        lineStyle: { color: '#E1E6EF', type: 'dashed' }\r\n      }\r\n    },\r\n    series: [\r\n      {\r\n        name: cityLegendHigh,\r\n        type: 'line',\r\n        data: highSeries,\r\n        smooth: true,\r\n        showSymbol: true,\r\n        symbolSize: 2,\r\n        lineStyle: { width: 1 }\r\n      },\r\n      {\r\n        name: '油耗',\r\n        type: 'line',\r\n        data: actualSeries,\r\n        smooth: true,\r\n        showSymbol: true,\r\n        symbolSize: 2,\r\n        lineStyle: { width: 2 },\r\n        itemStyle: { color: '#11B97A' },\r\n        areaStyle: {\r\n          color: {\r\n            type: 'linear',\r\n            x: 0,\r\n            y: 0,\r\n            x2: 0,\r\n            y2: 1,\r\n            colorStops: [\r\n              { offset: 0, color: 'rgba(17,181,97,0.18)' },\r\n              { offset: 1, color: 'rgba(17,181,97,0)' }\r\n            ]\r\n          }\r\n        }\r\n      },\r\n      {\r\n        name: cityLegendLow,\r\n        type: 'line',\r\n        data: lowSeries,\r\n        smooth: true,\r\n        showSymbol: true,\r\n        symbolSize: 2,\r\n        lineStyle: { width: 1, type: 'dashed', color: '#AEB5C0' },\r\n        itemStyle: { color: '#AEB5C0' }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nconst initFuelTrendChart = (\r\n  canvas: any,\r\n  width: number,\r\n  height: number,\r\n  dpr: number\r\n) => {\r\n  if (!canvas) {\r\n    return null\r\n  }\r\n  const chart = echarts.init(canvas, null, {\r\n    width,\r\n    height,\r\n    devicePixelRatio: dpr\r\n  })\r\n  canvas.setChart?.(chart)\r\n  chart.setOption(buildTrendOption())\r\n  fuelTrendChart = chart\r\n  return chart\r\n}\r\n\r\nconst fuelTrendEc = ref({\r\n  lazyLoad: false,\r\n  onInit: initFuelTrendChart\r\n})\r\n\r\nconst refreshFuelTrendChart = () => {\r\n  if (fuelTrendChart) {\r\n    fuelTrendChart.setOption(buildTrendOption(), true)\r\n  }\r\n}\r\n\r\nwatch(\r\n  trendData,\r\n  () => {\r\n    refreshFuelTrendChart()\r\n  },\r\n  { deep: true }\r\n)\r\n\r\nwatch(city, () => {\r\n  refreshFuelTrendChart()\r\n})\r\n\r\nonUnmounted(() => {\r\n  fuelTrendChart?.dispose()\r\n  fuelTrendChart = null\r\n  if (enterAnimationTimer) {\r\n    clearTimeout(enterAnimationTimer)\r\n    enterAnimationTimer = null\r\n  }\r\n})\r\n\r\n/**\r\n * 统一处理页面跳转或后续功能入口\r\n * @param actionKey 操作 key\r\n */\r\nconst handleNavigate = (actionKey: string) => {\r\n  uni.showToast({\r\n    title: `功能 ${actionKey} 开发中`,\r\n    icon: 'none'\r\n  })\r\n}\r\n\r\nconst navigateToCity = () => {\r\n  uni.navigateTo({\r\n    url: `/pages/city/index?currentCity=${encodeURIComponent(city.value)}`,\r\n    events: {\r\n      'city-selected': (selectedCity: string) => {\r\n        if (selectedCity) {\r\n          city.value = normalizeOrDefault(selectedCity)\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nonShow(() => {\r\n  syncSelectedCity()\r\n  runPageEnterAnimation()\r\n})\r\n\r\nonMounted(() => {\r\n  runPageEnterAnimation()\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/uni.scss';\r\n\r\n.home-page {\r\n  // padding: 24rpx 32rpx 120rpx;\r\n  padding: 24rpx 32rpx calc(180rpx + env(safe-area-inset-bottom, 0px));\r\n  padding-top: calc(34rpx + var(--status-bar-height, env(safe-area-inset-top, 0px)));\r\n  box-sizing: border-box;\r\n\r\n  &.home-page--locked {\r\n    height: 100vh;\r\n    overflow: hidden;\r\n  }\r\n\r\n  // Shared entry animation for the main hero cards\r\n  .animated-block {\r\n    opacity: 0;\r\n    transform: translate3d(0, 36rpx, 0) scale(0.98);\r\n    transition-property: opacity, transform;\r\n    transition-duration: 0.55s, 0.65s;\r\n    transition-timing-function: ease, cubic-bezier(0.22, 0.61, 0.36, 1);\r\n    will-change: opacity, transform;\r\n  }\r\n\r\n  .animated-block--visible {\r\n    opacity: 1;\r\n    transform: translate3d(0, 0, 0) scale(1);\r\n  }\r\n\r\n  .animated-block--delay-0 {\r\n    transition-delay: 0ms;\r\n  }\r\n\r\n  .animated-block--delay-1 {\r\n    transition-delay: 120ms;\r\n  }\r\n\r\n  .animated-block--delay-2 {\r\n    transition-delay: 200ms;\r\n  }\r\n\r\n  .animated-block--delay-3 {\r\n    transition-delay: 280ms;\r\n  }\r\n\r\n  // Soft animated gradient hero card\r\n  .header-card {\r\n    background: linear-gradient(180deg, #58b1ff 0%, #1ec15f 100%);\r\n    border-radius: 48rpx 48rpx 32rpx 32rpx;\r\n    padding: 48rpx 40rpx;\r\n    color: #fff;\r\n    box-shadow: 0 24rpx 40rpx rgba(24, 160, 88, 0.25);\r\n    margin-bottom: 32rpx;\r\n    position: relative;\r\n    overflow: hidden;\r\n    background-size: 240% 240%;\r\n    animation: heroGradient 10s ease-in-out infinite alternate;\r\n\r\n    &::after {\r\n      content: '';\r\n      position: absolute;\r\n      inset: 0;\r\n      background: radial-gradient(\r\n          circle at 20% 20%,\r\n          rgba(255, 255, 255, 0.3),\r\n          transparent 45%\r\n        ),\r\n        radial-gradient(\r\n          circle at 80% 0%,\r\n          rgba(255, 255, 255, 0.2),\r\n          transparent 40%\r\n        );\r\n      opacity: 0.35;\r\n      pointer-events: none;\r\n      mix-blend-mode: screen;\r\n      animation: heroGlow 12s linear infinite;\r\n    }\r\n\r\n    .header-meta {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin-bottom: 32rpx;\r\n\r\n      .location-row {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 28rpx;\r\n        font-weight: 600;\r\n\r\n        .location-icon {\r\n          width: 32rpx;\r\n          height: 32rpx;\r\n          margin-right: 10rpx;\r\n          flex-shrink: 0;\r\n          display: block;\r\n        }\r\n\r\n        .location-text {\r\n          // margin-right: 8rpx;\r\n        }\r\n\r\n        .dingwei_right {\r\n          width: 26rpx;\r\n          height: 26rpx;\r\n          margin-left: 6rpx;\r\n          flex-shrink: 0;\r\n          display: block;\r\n        }\r\n      }\r\n\r\n      .location-row__hover {\r\n        opacity: 0.7;\r\n      }\r\n\r\n      .header-actions {\r\n        display: flex;\r\n        gap: 16rpx;\r\n\r\n        .chip {\r\n          padding: 12rpx 28rpx;\r\n          border-radius: 999rpx;\r\n          font-size: 24rpx;\r\n          font-weight: 600;\r\n\r\n          .chip-text {\r\n            white-space: nowrap;\r\n          }\r\n        }\r\n\r\n        .chip.primary {\r\n          background-color: rgba(255, 255, 255, 0.25);\r\n        }\r\n\r\n        .chip.outline {\r\n          border: 2rpx solid rgba(255, 255, 255, 0.45);\r\n          background-color: transparent;\r\n        }\r\n      }\r\n    }\r\n\r\n    .car-info {\r\n      margin-bottom: 24rpx;\r\n\r\n      .car-name {\r\n        display: block;\r\n        font-size: 40rpx;\r\n        font-weight: 700;\r\n      }\r\n\r\n      .car-trim {\r\n        display: block;\r\n        margin-top: 8rpx;\r\n        font-size: 26rpx;\r\n        opacity: 0.9;\r\n      }\r\n    }\r\n\r\n    .price-row {\r\n      display: flex;\r\n      align-items: baseline;\r\n      gap: 16rpx;\r\n      margin-bottom: 24rpx;\r\n\r\n      .oil-type {\r\n        font-size: 32rpx;\r\n        font-weight: 600;\r\n        padding: 8rpx 20rpx;\r\n        background-color: rgba(255, 255, 255, 0.2);\r\n        border-radius: 999rpx;\r\n      }\r\n\r\n      .oil-price {\r\n        .price-number {\r\n          font-size: 40rpx;\r\n          font-weight: 700;\r\n          margin-right: 6rpx;\r\n        }\r\n      }\r\n    }\r\n\r\n    .reminder-banner {\r\n      margin-top: 24rpx;\r\n      background-color: rgba(255, 255, 255, 0.2);\r\n      border-radius: 24rpx;\r\n      padding: 20rpx 24rpx;\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 24rpx;\r\n\r\n      .reminder-icon {\r\n        margin-right: 12rpx;\r\n      }\r\n\r\n      .reminder-text {\r\n        white-space: nowrap;\r\n      }\r\n    }\r\n  }\r\n\r\n  .latest-card,\r\n  .stats-card,\r\n  .trend-card {\r\n    background-color: #fff;\r\n    border-radius: $card-radius;\r\n    padding: $card-padding;\r\n    box-shadow: $soft-shadow;\r\n    margin-bottom: 32rpx;\r\n  }\r\n\r\n  .latest-title,\r\n  .stats-header,\r\n  .trend-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 20rpx;\r\n  }\r\n\r\n  .label {\r\n    font-size: 30rpx;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .link {\r\n    font-size: 24rpx;\r\n    color: $primary-dark;\r\n  }\r\n\r\n  .latest-card {\r\n    .latest-body {\r\n      display: flex;\r\n      align-items: baseline;\r\n      margin-bottom: 24rpx;\r\n\r\n      .latest-number {\r\n        font-size: 72rpx;\r\n        font-weight: 700;\r\n        line-height: 1;\r\n        margin-right: 12rpx;\r\n      }\r\n\r\n      .latest-unit {\r\n        font-size: 26rpx;\r\n        color: $muted-text;\r\n      }\r\n    }\r\n\r\n    .rating-row {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 32rpx;\r\n\r\n      .rating-label {\r\n        flex: 1;\r\n      }\r\n\r\n      .rating-badges {\r\n        flex: 0 0 50%;\r\n        max-width: 50%;\r\n        display: flex;\r\n        gap: 12rpx;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n      }\r\n\r\n      .rating-badge {\r\n        width: 56rpx;\r\n        height: 56rpx;\r\n        padding: 0 6rpx;\r\n        border-radius: 32rpx;\r\n        background: var(--badge-bg, #edf3ef);\r\n        color: var(--badge-color, $primary-dark);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        // clip-path: polygon(25% 6%, 75% 6%, 100% 50%, 75% 94%, 25% 94%, 0% 50%);\r\n        clip-path: polygon(50% 0%, 94% 25%, 94% 75%, 50% 100%, 6% 75%, 6% 25%);\r\n        transform: scale(0.88) translateY(0rpx);\r\n        opacity: 0.88;\r\n        transition: transform 0.25s ease, background 0.25s ease,\r\n          color 0.25s ease, box-shadow 0.25s ease;\r\n        box-shadow: inset 0 0 0 0 rgba(255, 255, 255, 0.25);\r\n      }\r\n\r\n      .rating-badge text {\r\n        line-height: 1;\r\n        font-size: 28rpx;\r\n        font-weight: 700;\r\n      }\r\n\r\n      .rating-badge.active {\r\n        background: var(--badge-color, $primary-color);\r\n        color: #fff;\r\n        transform: scale(1.12) translateY(0);\r\n        opacity: 1;\r\n        box-shadow: 0 18rpx 28rpx rgba(30, 193, 95, 0.35);\r\n      }\r\n\r\n      .rating-badge.active text {\r\n        font-size: 34rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .stats-card {\r\n    .stats-grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(3, 1fr);\r\n      gap: 24rpx;\r\n\r\n      .stat-item {\r\n        background-color: #f7f9fb;\r\n        border-radius: 20rpx;\r\n        padding: 20rpx;\r\n\r\n        .stat-label {\r\n          font-size: 24rpx;\r\n          color: $muted-text;\r\n        }\r\n\r\n        .stat-value {\r\n          display: block;\r\n          font-size: 36rpx;\r\n          font-weight: 700;\r\n          margin: 12rpx 0 6rpx;\r\n        }\r\n\r\n        .stat-value.accent {\r\n          color: $primary-dark;\r\n        }\r\n\r\n        .stat-unit {\r\n          font-size: 22rpx;\r\n          color: $muted-text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .trend-card {\r\n    .trend-body {\r\n      // margin: 16rpx 0 24rpx;\r\n    }\r\n\r\n    .trend-chart__wrapper {\r\n      border-radius: 16rpx;\r\n      border: 1rpx solid rgba(203, 210, 221, 0.3);\r\n      background: #fff;\r\n      // padding: 8rpx 0 0;\r\n      height: 600rpx;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .trend-chart__canvas {\r\n      width: 100%;\r\n      height: 100%;\r\n      display: block;\r\n    }\r\n\r\n    .trend-chart__fallback {\r\n      width: 100%;\r\n      height: 100%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: $muted-text;\r\n      font-size: 24rpx;\r\n      // padding: 0 24rpx;\r\n      text-align: center;\r\n      background: linear-gradient(180deg, #f9fbff 0%, #f1f4f9 100%);\r\n    }\r\n\r\n    .trend-footer {\r\n      color: $muted-text;\r\n      font-size: 22rpx;\r\n    }\r\n  }\r\n\r\n  .filter {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8rpx;\r\n    padding: 8rpx 16rpx;\r\n    border-radius: 999rpx;\r\n    background-color: #f2f5f8;\r\n    color: $muted-text;\r\n\r\n    .filter-text {\r\n      font-size: 24rpx;\r\n    }\r\n\r\n    .filter-arrow {\r\n      font-size: 22rpx;\r\n    }\r\n  }\r\n\r\n  .filter.filter__hover {\r\n    opacity: 0.7;\r\n  }\r\n\r\n}\r\n\r\n@keyframes heroGradient {\r\n  0% {\r\n    background-position: 0% 0%;\r\n  }\r\n  100% {\r\n    background-position: 100% 100%;\r\n  }\r\n}\r\n\r\n@keyframes heroGlow {\r\n  0% {\r\n    transform: translate3d(0, 0, 0) scale(1);\r\n    opacity: 0.35;\r\n  }\r\n  50% {\r\n    transform: translate3d(-2%, 4%, 0) scale(1.05);\r\n    opacity: 0.5;\r\n  }\r\n  100% {\r\n    transform: translate3d(2%, -3%, 0) scale(1.02);\r\n    opacity: 0.35;\r\n  }\r\n}\r\n\r\n</style>\r\n","import MiniProgramPage from 'D:/Learn/projectFile/cat-life-uniapp-wechat/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["normalizeCityName","ref","uni","STORAGE_KEYS","watch","onUnmounted","onShow","onMounted"],"mappings":"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"}
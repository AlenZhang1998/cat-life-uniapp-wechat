{"version":3,"file":"index.js","sources":["pages/home/index.vue","../../../App/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"home-page\">\n    <!-- 顶部卡片：展示城市、车辆概况和提醒 -->\n    <view class=\"header-card\">\n      <view class=\"header-meta\">\n        <view class=\"location-row\">\n          <text class=\"location-icon\">定位</text>\n          <text class=\"location-text\">{{ city }}</text>\n          <text class=\"location-arrow\">v</text>\n        </view>\n        <view class=\"header-actions\">\n          <view class=\"chip primary\">\n            <text class=\"chip-text\">下次保养</text>\n          </view>\n          <!-- <view class=\"chip outline\">\n            <text class=\"chip-text\">智驾提醒</text>\n          </view> -->\n        </view>\n      </view>\n\n      <view class=\"car-info\">\n        <text class=\"car-name\">{{ carInfo.brand }} · {{ carInfo.model }}</text>\n        <text class=\"car-trim\">{{ carInfo.trim }}</text>\n      </view>\n\n      <view class=\"price-row\">\n        <text class=\"oil-type\">{{ oilPrice.label }}</text>\n        <text class=\"oil-price\">\n          <text class=\"price-number\">{{ oilPrice.value }}</text>\n          元/升\n        </text>\n      </view>\n\n      <view class=\"reminder-banner\" v-if=\"!hasRecentRefuel\">\n        <text class=\"reminder-icon\">!</text>\n        <text class=\"reminder-text\">没有加油或者充电记录，快去添加吧～</text>\n      </view>\n    </view>\n\n    <!-- 最新油耗和能耗评级 -->\n    <view class=\"latest-card\">\n      <view class=\"latest-title\">\n        <text class=\"label\">最新油耗</text>\n        <text class=\"link\" @tap=\"handleNavigate('trend')\">查看更多</text>\n      </view>\n      <view class=\"latest-body\">\n        <text class=\"latest-number\">{{ latestFuel }} </text>\n        <text class=\"latest-unit\">升/百公里</text>\n      </view>\n\n      <view class=\"rating-row\">\n        <view class=\"rating-label\">\n          <text class=\"label\">能耗评级</text>\n        </view>\n        <view class=\"rating-badges\">\n          <view\n            class=\"rating-badge\"\n            v-for=\"level in efficiencyLevels\"\n            :key=\"level.label\"\n            :class=\"{ active: level.label === currentEfficiency.label }\"\n          >\n            <text>{{ level.label }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 统计区块 -->\n    <view class=\"stats-card\">\n      <view class=\"stats-header\">\n        <text class=\"label\">统计</text>\n        <view class=\"filter\">\n          <text class=\"filter-text\">{{ selectedRange.label }}</text>\n          <text class=\"filter-arrow\">⇅</text>\n        </view>\n      </view>\n      <view class=\"stats-grid\">\n        <view class=\"stat-item\" v-for=\"item in stats\" :key=\"item.key\">\n          <text class=\"stat-label\">{{ item.label }}</text>\n          <text class=\"stat-value\" :class=\"{ accent: item.accent }\">\n            {{ item.value }}\n          </text>\n          <text class=\"stat-unit\">{{ item.unit }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 油耗变化趋势 -->\n    <view class=\"trend-card\">\n      <view class=\"trend-header\">\n        <text class=\"label\">油耗变化趋势</text>\n        <view class=\"filter\">\n          <text class=\"filter-text\">{{ selectedRange.label }}</text>\n          <text class=\"filter-arrow\">⇅</text>\n        </view>\n      </view>\n      <view class=\"trend-body\">\n        <!-- 网格背景，模拟图表的参考线 -->\n        <view class=\"grid\" v-for=\"line in 5\" :key=\"line\"></view>\n\n        <!-- 参考基准线 -->\n        <view class=\"benchmark-line\"></view>\n\n        <!-- 使用绝对定位绘制的折线图 -->\n        <view class=\"chart-line\">\n          <view\n            class=\"chart-point\"\n            v-for=\"(point, index) in trendData\"\n            :key=\"point.day\"\n            :style=\"getPointStyle(point.value, index)\"\n          >\n            <view class=\"point-dot\"></view>\n            <text class=\"point-label\">{{ point.day }}</text>\n          </view>\n        </view>\n      </view>\n      <view class=\"trend-footer\">\n        <text class=\"benchmark-label\">\n          灰线为深圳市油耗参考 - 低位\n        </text>\n      </view>\n    </view>\n\n    <!-- 底部自定义导航 -->\n    <view class=\"action-bar\">\n      <view\n        class=\"action-item\"\n        v-for=\"action in actions\"\n        :key=\"action.key\"\n        @tap=\"handleAction(action)\"\n        :class=\"[{ primary: action.type === 'primary' }, `action-${action.key}`]\"\n      >\n        <view class=\"action-icon\">{{ action.icon }}</view>\n        <text class=\"action-label\">{{ action.label }}</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\n// ================= 基础展示数据 =================\nconst city = ref('深圳市')\nconst carInfo = ref({\n  brand: '思域',\n  model: '2025款 240TURBO CVT',\n  trim: '智趣Plus'\n})\nconst oilPrice = ref({\n  label: '92#',\n  value: '7.07'\n})\n\n// 用于控制提醒条是否展示，这里默认没有记录\nconst hasRecentRefuel = ref(false)\n\n// 最新油耗展示值，可在后续与服务端对接时替换\nconst latestFuel = ref('4.80')\n\n// 评级标签以静态数组呈现，方便后续根据接口高亮不同等级\nconst efficiencyLevels = ref([\n  { label: 'S' },\n  { label: 'A' },\n  { label: 'B' },\n  { label: 'C' },\n  { label: 'D' }\n])\nconst currentEfficiency = ref({ label: 'S' })\n\n// 统计区块的数据源，这里把单位也一起放进来，便于展示\nconst stats = ref([\n  {\n    key: 'fuelAvg',\n    label: '平均油耗',\n    value: '5.71',\n    unit: '升/百公里',\n    accent: true\n  },\n  {\n    key: 'mileageAvg',\n    label: '平均行程',\n    value: '92.76',\n    unit: '公里/天'\n  },\n  {\n    key: 'costAvg',\n    label: '平均油费',\n    value: '0.35',\n    unit: '元/公里',\n    accent: true\n  },\n  {\n    key: 'mileageTotal',\n    label: '累计行程',\n    value: '1577',\n    unit: '公里'\n  },\n  {\n    key: 'costTotal',\n    label: '累计油费',\n    value: '836.7',\n    unit: '元'\n  },\n  {\n    key: 'discountTotal',\n    label: '总计优惠',\n    value: '128.4',\n    unit: '元'\n  }\n])\n\n// 油耗趋势数据，value 直接对应折线的高度\nconst trendData = ref([\n  { day: '周一', value: 6.2 },\n  { day: '周二', value: 6.9 },\n  { day: '周三', value: 8.4 },\n  { day: '周四', value: 9.0 },\n  { day: '周五', value: 7.6 },\n  { day: '周六', value: 6.8 },\n  { day: '周日', value: 6.5 }\n])\n\n// 统计口径筛选，目前仅用于展示标签\nconst selectedRange = ref({\n  label: '全部'\n})\n\n// 底部操作栏配置，后续可以在此添加路由跳转逻辑\nconst actions = ref([\n  { key: 'fuel', label: '油耗', icon: '油', type: 'text' },\n  { key: 'list', label: '列表', icon: '表', type: 'text' },\n  { key: 'add', label: '加号', icon: '+', type: 'primary' },\n  { key: 'refuel', label: '加油', icon: '汽', type: 'text' },\n  { key: 'profile', label: '我的', icon: '我', type: 'text' }\n])\n\n// ================ 计算属性与函数工具 =================\nconst maxTrendValue = computed(() =>\n  Math.max(...trendData.value.map((item) => item.value))\n)\nconst minTrendValue = computed(() =>\n  Math.min(...trendData.value.map((item) => item.value))\n)\n\n/**\n * 根据油耗值和位置计算折线点的绝对定位样式\n * @param value 当前点的油耗值\n * @param index 当前下标\n */\nconst getPointStyle = (value: number, index: number) => {\n  // 避免除以 0，这里设置一个默认区间\n  const safeRange = Math.max(maxTrendValue.value - minTrendValue.value, 1)\n  // 线条会占据容器 80% 的高度，上下留有 10% 的内边距保证视觉呼吸\n  const heightPercent =\n    ((value - minTrendValue.value) / safeRange) * 80 + 10\n  const leftPercent =\n    trendData.value.length === 1\n      ? 50\n      : (index / (trendData.value.length - 1)) * 100\n\n  return `left:${leftPercent}%;bottom:${heightPercent}%`\n}\n\n/**\n * 统一处理页面跳转或后续功能入口\n * @param actionKey 操作 key\n */\nconst handleNavigate = (actionKey: string) => {\n  uni.showToast({\n    title: `功能 ${actionKey} 开发中`,\n    icon: 'none'\n  })\n}\n\n/**\n * 底部操作栏点击事件，根据 key 做简单分类\n */\nconst handleAction = (action: { key: string }) => {\n  if (action.key === 'add') {\n    handleNavigate('addRecord')\n    return\n  }\n  handleNavigate(action.key)\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/uni.scss';\n\n.home-page {\n  padding: 24rpx 32rpx 120rpx;\n  padding-top: calc(34rpx + var(--status-bar-height, env(safe-area-inset-top, 0px)));\n  box-sizing: border-box;\n\n  .header-card {\n    background: linear-gradient(180deg, #58b1ff 0%, #1ec15f 100%);\n    border-radius: 48rpx 48rpx 32rpx 32rpx;\n    padding: 48rpx 40rpx;\n    color: #fff;\n    box-shadow: 0 24rpx 40rpx rgba(24, 160, 88, 0.25);\n    margin-bottom: 32rpx;\n\n    .header-meta {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 32rpx;\n\n      .location-row {\n        display: flex;\n        align-items: center;\n        font-size: 28rpx;\n        font-weight: 600;\n\n        .location-icon {\n          margin-right: 12rpx;\n        }\n\n        .location-text {\n          margin-right: 8rpx;\n        }\n\n        .location-arrow {\n          font-size: 24rpx;\n          opacity: 0.8;\n        }\n      }\n\n      .header-actions {\n        display: flex;\n        gap: 16rpx;\n\n        .chip {\n          padding: 12rpx 28rpx;\n          border-radius: 999rpx;\n          font-size: 24rpx;\n          font-weight: 600;\n\n          .chip-text {\n            white-space: nowrap;\n          }\n        }\n\n        .chip.primary {\n          background-color: rgba(255, 255, 255, 0.25);\n        }\n\n        .chip.outline {\n          border: 2rpx solid rgba(255, 255, 255, 0.45);\n          background-color: transparent;\n        }\n      }\n    }\n\n    .car-info {\n      margin-bottom: 24rpx;\n\n      .car-name {\n        display: block;\n        font-size: 40rpx;\n        font-weight: 700;\n      }\n\n      .car-trim {\n        display: block;\n        margin-top: 8rpx;\n        font-size: 26rpx;\n        opacity: 0.9;\n      }\n    }\n\n    .price-row {\n      display: flex;\n      align-items: baseline;\n      gap: 16rpx;\n      margin-bottom: 24rpx;\n\n      .oil-type {\n        font-size: 32rpx;\n        font-weight: 600;\n        padding: 8rpx 20rpx;\n        background-color: rgba(255, 255, 255, 0.2);\n        border-radius: 999rpx;\n      }\n\n      .oil-price {\n        .price-number {\n          font-size: 40rpx;\n          font-weight: 700;\n          margin-right: 6rpx;\n        }\n      }\n    }\n\n    .reminder-banner {\n      margin-top: 24rpx;\n      background-color: rgba(255, 255, 255, 0.2);\n      border-radius: 24rpx;\n      padding: 20rpx 24rpx;\n      display: flex;\n      align-items: center;\n      font-size: 24rpx;\n\n      .reminder-icon {\n        margin-right: 12rpx;\n      }\n\n      .reminder-text {\n        white-space: nowrap;\n      }\n    }\n  }\n\n  .latest-card,\n  .stats-card,\n  .trend-card {\n    background-color: #fff;\n    border-radius: $card-radius;\n    padding: $card-padding;\n    box-shadow: $soft-shadow;\n    margin-bottom: 32rpx;\n  }\n\n  .latest-title,\n  .stats-header,\n  .trend-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20rpx;\n  }\n\n  .label {\n    font-size: 30rpx;\n    font-weight: 600;\n  }\n\n  .link {\n    font-size: 24rpx;\n    color: $primary-dark;\n  }\n\n  .latest-card {\n    .latest-body {\n      display: flex;\n      align-items: baseline;\n      margin-bottom: 24rpx;\n\n      .latest-number {\n        font-size: 72rpx;\n        font-weight: 700;\n        line-height: 1;\n        margin-right: 12rpx;\n      }\n\n      .latest-unit {\n        font-size: 26rpx;\n        color: $muted-text;\n      }\n    }\n\n    .rating-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n\n      .rating-badges {\n        display: flex;\n        gap: 16rpx;\n\n        .rating-badge {\n          width: 48rpx;\n          height: 48rpx;\n          border-radius: 16rpx;\n          background-color: #edf3ef;\n          color: $primary-dark;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 26rpx;\n          transition: all 0.3s ease;\n        }\n\n        .rating-badge.active {\n          background-color: $primary-color;\n          color: #fff;\n          box-shadow: 0 12rpx 18rpx rgba(30, 193, 95, 0.4);\n        }\n      }\n    }\n  }\n\n  .stats-card {\n    .stats-grid {\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      gap: 24rpx;\n\n      .stat-item {\n        background-color: #f7f9fb;\n        border-radius: 20rpx;\n        padding: 20rpx;\n\n        .stat-label {\n          font-size: 24rpx;\n          color: $muted-text;\n        }\n\n        .stat-value {\n          display: block;\n          font-size: 36rpx;\n          font-weight: 700;\n          margin: 12rpx 0 6rpx;\n        }\n\n        .stat-value.accent {\n          color: $primary-dark;\n        }\n\n        .stat-unit {\n          font-size: 22rpx;\n          color: $muted-text;\n        }\n      }\n    }\n  }\n\n  .trend-card {\n    .trend-body {\n      position: relative;\n      height: 280rpx;\n      background: linear-gradient(180deg, #ebf5ee 0%, #fff 100%);\n      border-radius: 24rpx;\n      overflow: hidden;\n      margin: 16rpx 0 24rpx;\n\n      .grid {\n        position: absolute;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background-color: rgba(25, 147, 97, 0.12);\n      }\n\n      .grid:nth-child(1) {\n        top: 10%;\n      }\n\n      .grid:nth-child(2) {\n        top: 35%;\n      }\n\n      .grid:nth-child(3) {\n        top: 60%;\n      }\n\n      .grid:nth-child(4) {\n        top: 80%;\n      }\n\n      .grid:nth-child(5) {\n        top: 90%;\n      }\n\n      .benchmark-line {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 35%;\n        height: 2rpx;\n        background: rgba(138, 147, 160, 0.4);\n      }\n\n      .chart-line {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n\n        .chart-point {\n          position: absolute;\n          transform: translate(-50%, 0);\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n\n          .point-dot {\n            width: 20rpx;\n            height: 20rpx;\n            border-radius: 999rpx;\n            background-color: $primary-color;\n            box-shadow: 0 0 0 12rpx rgba(30, 193, 95, 0.18);\n            margin-bottom: 12rpx;\n          }\n\n          .point-label {\n            font-size: 22rpx;\n            color: $muted-text;\n          }\n        }\n      }\n    }\n\n    .trend-footer {\n      color: $muted-text;\n      font-size: 22rpx;\n    }\n  }\n\n  .filter {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    padding: 8rpx 16rpx;\n    border-radius: 999rpx;\n    background-color: #f2f5f8;\n    color: $muted-text;\n\n    .filter-text {\n      font-size: 24rpx;\n    }\n\n    .filter-arrow {\n      font-size: 22rpx;\n    }\n  }\n\n  .action-bar {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: space-around;\n    align-items: flex-end;\n    padding: 16rpx 32rpx 36rpx;\n    background-color: #fff;\n    box-shadow: 0 -12rpx 32rpx rgba(0, 0, 0, 0.06);\n\n    .action-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      color: $muted-text;\n      font-size: 22rpx;\n    }\n\n    .action-item.primary {\n      width: 120rpx;\n      height: 120rpx;\n      border-radius: 50%;\n      background: linear-gradient(180deg, #1ec15f 0%, #14a04b 100%);\n      color: #fff;\n      justify-content: center;\n      margin-bottom: 24rpx;\n      box-shadow: 0 18rpx 32rpx rgba(30, 193, 95, 0.32);\n    }\n\n    .action-icon {\n      font-size: 36rpx;\n      font-weight: 700;\n      margin-bottom: 8rpx;\n    }\n\n    .action-item.primary .action-icon {\n      font-size: 56rpx;\n      margin-bottom: 0;\n    }\n\n    .action-item.primary .action-label {\n      font-size: 24rpx;\n      margin-top: 12rpx;\n    }\n\n    .action-label {\n      white-space: nowrap;\n    }\n  }\n}\n</style>\n\n","import MiniProgramPage from 'D:/Learn/projectFile/cat-life-uniapp-wechat/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni"],"mappings":"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"}
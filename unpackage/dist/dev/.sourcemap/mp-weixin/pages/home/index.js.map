{"version":3,"file":"index.js","sources":["pages/home/index.vue","pages/home/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"home-page\" :class=\"{ 'home-page--locked': showRangePicker }\">\n    <!-- 顶部卡片：展示城市、车辆概况和提醒 -->\n    <view\n      class=\"header-card animated-block animated-block--delay-0\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"header-meta\">\n        <view\n          class=\"location-row\"\n          hover-class=\"location-row__hover\"\n          @tap=\"navigateToCity\"\n        >\n          <image\n            class=\"location-icon\"\n            :src=\"locationIcon\"\n            mode=\"aspectFit\"\n          />\n          <text class=\"location-text\">{{ city }}</text>\n          <!-- <text class=\"location-arrow\">v</text> -->\n          <image\n            class=\"dingwei_right\"\n            :src=\"dingwei_right\"\n            mode=\"aspectFit\"\n          />\n        </view>\n        <view class=\"header-actions\">\n          <view class=\"chip primary\">\n            <text class=\"chip-text\">下次保养时间</text>\n          </view>\n          <!-- <view class=\"chip outline\">\n            <text class=\"chip-text\">智驾提醒</text>\n          </view> -->\n        </view>\n      </view>\n\n      <view class=\"car-info\">\n        <text class=\"car-name\">{{ carInfo.brand }} · {{ carInfo.model }}</text>\n        <text class=\"car-trim\">{{ carInfo.trim }}</text>\n      </view>\n\n      <!-- <view class=\"price-row\">\n        <text class=\"oil-type\">{{ oilPrice.label }}</text>\n        <text class=\"oil-price\">\n          <text class=\"price-number\">{{ oilPrice.value }}</text>\n          元/升\n        </text>\n      </view> -->\n\n      <view class=\"reminder-banner\" v-if=\"!hasRecentRefuel\">\n        <text class=\"reminder-icon\">!</text>\n        <text class=\"reminder-text\">没有加油或者充电记录，快去添加吧～</text>\n      </view>\n    </view>\n\n    <!-- 最新油耗和能耗评级 -->\n    <view\n      class=\"latest-card animated-block animated-block--delay-1\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"latest-title\">\n        <text class=\"label\">最新油耗</text>\n        <text class=\"link\" @tap=\"handleNavigate('trend')\">查看更多</text>\n      </view>\n      <view class=\"latest-body\">\n        <text class=\"latest-number\">{{ latestFuel }} </text>\n        <text class=\"latest-unit\">升/百公里</text>\n      </view>\n\n      <view class=\"rating-row\">\n        <view class=\"rating-label\">\n          <text class=\"label\">能耗评级</text>\n        </view>\n        <view class=\"rating-badges\">\n          <view\n            class=\"rating-badge\"\n            v-for=\"level in efficiencyLevels\"\n            :key=\"level.label\"\n            :class=\"{ active: level.label === currentEfficiency.label }\"\n            :style=\"getBadgeStyle(level)\"\n          >\n            <text>{{ level.label }}</text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 统计区块 -->\n    <view\n      class=\"stats-card animated-block animated-block--delay-2\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"stats-header\">\n        <text class=\"label\">统计</text>\n        <view\n          class=\"filter\"\n          hover-class=\"filter__hover\"\n          @tap=\"openRangePicker('stats')\"\n        >\n          <text class=\"filter-text\">{{ statsRange.label }}</text>\n          <text class=\"filter-arrow\">⇅</text>\n        </view>\n      </view>\n      <view class=\"stats-grid\">\n        <view class=\"stat-item\" v-for=\"item in stats\" :key=\"item.key\">\n          <text class=\"stat-label\">{{ item.label }}</text>\n          <text class=\"stat-value\" :class=\"{ accent: item.accent }\">\n            {{ item.value }}\n          </text>\n          <text class=\"stat-unit\">{{ item.unit }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 油耗变化趋势 -->\n    <view\n      class=\"trend-card animated-block animated-block--delay-3\"\n      :class=\"{ 'animated-block--visible': isPageAnimated }\"\n    >\n      <view class=\"trend-header\">\n        <text class=\"label\">油耗变化趋势</text>\n        <view\n          class=\"filter\"\n          hover-class=\"filter__hover\"\n          @tap=\"openRangePicker('trend')\"\n        >\n          <text class=\"filter-text\">{{ trendRange.label }}</text>\n          <text class=\"filter-arrow\">⇅</text>\n        </view>\n      </view>\n      <view class=\"trend-body\">\n        <view class=\"trend-chart__wrapper\">\n\n          <ec-canvas\n            id=\"fuelTrendChart\"\n            canvas-id=\"fuelTrendChart\"\n            class=\"trend-chart__canvas\"\n            :ec=\"fuelTrendEc\"\n          ></ec-canvas>\n\n\n\n\n\n\n        </view>\n      </view>\n      <view class=\"trend-footer\">\n        <text class=\"benchmark-label\">\n          数据基于近 7 天行驶记录，绿线为当前车辆，红/灰线为本市参考区间。\n        </text>\n      </view>\n    </view>\n\n    <RangePickerOverlay\n      :visible=\"showRangePicker\"\n      title=\"请选择\"\n      :options=\"rangeOptions\"\n      :selected-key=\"pendingRangeKey\"\n      @update:selected-key=\"handlePendingRangeChange\"\n      @cancel=\"closeRangePicker\"\n      @confirm=\"confirmRangePicker\"\n    />\n\n    <BottomActionBar active=\"fuel\" />\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { onShow } from '@dcloudio/uni-app'\nimport { onMounted, onUnmounted, ref, watch } from 'vue'\nimport { STORAGE_KEYS } from '@/constants/storage'\nimport { normalizeCityName } from '@/utils/location'\nimport locationIcon from '@/static/icons/dingwei.png'\nimport dingwei_right from '@/static/icons/dingwei_right.png'\nimport BottomActionBar from '@/components/BottomActionBar.vue'\nimport RangePickerOverlay from '@/components/RangePickerOverlay.vue'\n// uCharts 官方 ECharts 适配仅支持 CJS 导入，这里使用 require 方式以兼容编译到小程序端\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst echarts = require('../../wxcomponents/ec-canvas/echarts')\n\n// ================= 基础展示数据 =================\nconst DEFAULT_CITY = '深圳市'\nconst normalizeOrDefault = (value?: string | null) =>\n  normalizeCityName(value) || DEFAULT_CITY\n\nconst city = ref(normalizeOrDefault(DEFAULT_CITY))\n\nconst syncSelectedCity = () => {\n  const stored = uni.getStorageSync(\n    STORAGE_KEYS.selectedCity\n  ) as string | null\n  if (stored) {\n    city.value = normalizeOrDefault(stored)\n  }\n}\n\nsyncSelectedCity()\nconst carInfo = ref({\n  brand: '思域',\n  model: '2025款 240TURBO CVT',\n  trim: '智趣Plus'\n})\nconst oilPrice = ref({\n  label: '92#',\n  value: '7.07'\n})\n\n// 用于控制提醒条是否展示，这里默认没有记录\nconst hasRecentRefuel = ref(false)\n\n// 最新油耗展示值，可在后续与服务端对接时替换\nconst latestFuel = ref('4.80')\n\n// 评级标签以静态数组呈现，方便后续根据接口高亮不同等级\ntype EfficiencyLevel = {\n  label: string\n  badgeBg: string\n  badgeColor: string\n}\n\nconst efficiencyLevels = ref<EfficiencyLevel[]>([\n  { label: 'S', badgeBg: '#e4faed', badgeColor: '#07c263' },\n  { label: 'A', badgeBg: '#f0f9e7', badgeColor: '#94d951' },\n  { label: 'B', badgeBg: '#f4faeb', badgeColor: '#c7e969' },\n  { label: 'C', badgeBg: '#fff7e4', badgeColor: '#f7d36c' },\n  { label: 'D', badgeBg: '#fff1df', badgeColor: '#fabb59' }\n])\nconst currentEfficiency = ref<EfficiencyLevel>(efficiencyLevels.value[0])\n\nconst getBadgeStyle = (level: EfficiencyLevel) => ({\n  '--badge-bg': level.badgeBg,\n  '--badge-color': level.badgeColor\n})\n\n// 统计区块的数据源，这里把单位也一起放进来，便于展示\nconst stats = ref([\n  {\n    key: 'fuelAvg',\n    label: '平均油耗',\n    value: '5.71',\n    unit: '升/百公里',\n    accent: true\n  },\n  {\n    key: 'mileageAvg',\n    label: '平均行程',\n    value: '92.76',\n    unit: '公里/天'\n  },\n  {\n    key: 'costAvg',\n    label: '平均油费',\n    value: '0.35',\n    unit: '元/公里',\n    accent: true\n  },\n  {\n    key: 'mileageTotal',\n    label: '累计行程',\n    value: '1577',\n    unit: '公里'\n  },\n  {\n    key: 'costTotal',\n    label: '累计油费',\n    value: '836.7',\n    unit: '元'\n  },\n  {\n    key: 'discountTotal',\n    label: '总计优惠',\n    value: '128.4',\n    unit: '元'\n  }\n])\n\n// 油耗趋势数据，value 直接对应折线的高度\ntype TrendPoint = {\n  day: string\n  value: number\n  cityHigh: number\n  cityLow: number\n}\n\nconst trendData = ref<TrendPoint[]>([\n  { day: '2025-10-01', value: 4.9, cityHigh: 8.2, cityLow: 6.1 },\n  { day: '2025-10-02', value: 8.6, cityHigh: 8.15, cityLow: 6.05 },\n  { day: '2025-10-04', value: 8.1, cityHigh: 8.05, cityLow: 6.0 },\n  { day: '2025-10-06', value: 7.3, cityHigh: 8.0, cityLow: 5.96 },\n  { day: '2025-10-09', value: 4.8, cityHigh: 7.95, cityLow: 5.92 }\n])\n\n// 统计口径筛选，目前仅用于展示标签\ntype RangeKey = '3m' | '6m' | '1y' | 'all'\n\ntype RangeOption = {\n  key: RangeKey\n  label: string\n}\n\nconst rangeOptions: RangeOption[] = [\n  { key: '3m', label: '三个月' },\n  { key: '6m', label: '半年' },\n  { key: '1y', label: '一年' },\n  { key: 'all', label: '全部' }\n]\n\ntype RangeTarget = 'stats' | 'trend'\n\nconst statsRange = ref<RangeOption>(rangeOptions[3])\nconst trendRange = ref<RangeOption>(rangeOptions[3])\nconst showRangePicker = ref(false)\nconst pendingRangeKey = ref<RangeKey>(rangeOptions[3].key)\nconst activeRangeTarget = ref<RangeTarget>('stats')\nconst isPageAnimated = ref(false)\nlet enterAnimationTimer: ReturnType<typeof setTimeout> | null = null\n\nconst resolveTargetRange = (target: RangeTarget) =>\n  target === 'stats' ? statsRange : trendRange\n\nconst runPageEnterAnimation = () => {\n  if (enterAnimationTimer) {\n    clearTimeout(enterAnimationTimer)\n    enterAnimationTimer = null\n  }\n  // Reset visible state before re-triggering the transition\n  isPageAnimated.value = false\n  enterAnimationTimer = setTimeout(() => {\n    isPageAnimated.value = true\n  }, 30)\n}\n\nconst openRangePicker = (target: RangeTarget) => {\n  activeRangeTarget.value = target\n  pendingRangeKey.value = resolveTargetRange(target).value.key\n  showRangePicker.value = true\n}\n\nconst closeRangePicker = () => {\n  showRangePicker.value = false\n}\n\nconst handlePendingRangeChange = (value: RangeKey | null) => {\n  if (value) {\n    pendingRangeKey.value = value\n  }\n}\n\nconst confirmRangePicker = () => {\n  const target = rangeOptions.find((option) => option.key === pendingRangeKey.value)\n  if (target) {\n    const rangeRef = resolveTargetRange(activeRangeTarget.value)\n    rangeRef.value = target\n    const targetLabel = activeRangeTarget.value === 'stats' ? '统计' : '趋势'\n    uni.showToast({\n      title: `${targetLabel}已切换到${target.label}`,\n      icon: 'none'\n    })\n  }\n  closeRangePicker()\n}\n\n// ================ 油耗趋势图 ================\nlet fuelTrendChart: any = null\n\nconst buildTrendOption = () => {\n  const categories = trendData.value.map((item) => item.day)\n  const actualSeries = trendData.value.map((item) => item.value)\n  const highSeries = trendData.value.map((item) => item.cityHigh)\n  const lowSeries = trendData.value.map((item) => item.cityLow)\n  const cityLegendHigh = `${city.value}油耗参考-高位`\n  const cityLegendLow = `${city.value}油耗参考-低位`\n\n  return {\n    color: ['#F47274', '#11B561', '#AEB5C0'],\n    animationDuration: 700,\n    legend: {\n      left: 24,\n      top: 12,\n      icon: 'roundRect',\n      itemWidth: 20,\n      itemHeight: 6,\n      textStyle: {\n        color: '#5F6673',\n        fontSize: 8\n      },\n      data: [cityLegendHigh, '油耗', cityLegendLow]\n    },\n    tooltip: {\n      trigger: 'axis',\n      backgroundColor: 'rgba(28,31,43,0.9)',\n      borderWidth: 0,\n      textStyle: {\n        color: '#fff',\n        fontSize: 12\n      },\n      axisPointer: {\n        type: 'line',\n        lineStyle: {\n          color: '#0AB068',\n          width: 1,\n          type: 'dashed'\n        }\n      }\n    },\n    grid: {\n      left: 40,\n      right: 30,\n      top: 40,\n      bottom: 60\n    },\n    xAxis: {\n      type: 'category',\n      data: categories,\n      boundaryGap: false,\n      axisLine: { lineStyle: { color: '#D0D7E3' } },\n      axisTick: { show: false },\n      axisLabel: {\n        color: '#8a93a0',\n        fontSize: 12,\n        margin: 16\n      },\n      splitLine: { show: false }\n    },\n    yAxis: {\n      type: 'value',\n      min: 4,\n      max: 9,\n      interval: 1,\n      axisLine: { show: false },\n      axisTick: { show: false },\n      axisLabel: {\n        color: '#8a93a0',\n        fontSize: 12,\n        formatter: (value: number) => value.toFixed(1)\n      },\n      splitLine: {\n        lineStyle: { color: '#E1E6EF', type: 'dashed' }\n      }\n    },\n    series: [\n      {\n        name: cityLegendHigh,\n        type: 'line',\n        data: highSeries,\n        smooth: true,\n        showSymbol: true,\n        symbolSize: 2,\n        lineStyle: { width: 1 }\n      },\n      {\n        name: '油耗',\n        type: 'line',\n        data: actualSeries,\n        smooth: true,\n        showSymbol: true,\n        symbolSize: 2,\n        lineStyle: { width: 2 },\n        itemStyle: { color: '#11B97A' },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [\n              { offset: 0, color: 'rgba(17,181,97,0.18)' },\n              { offset: 1, color: 'rgba(17,181,97,0)' }\n            ]\n          }\n        }\n      },\n      {\n        name: cityLegendLow,\n        type: 'line',\n        data: lowSeries,\n        smooth: true,\n        showSymbol: true,\n        symbolSize: 2,\n        lineStyle: { width: 1, type: 'dashed', color: '#AEB5C0' },\n        itemStyle: { color: '#AEB5C0' }\n      }\n    ]\n  }\n}\n\nconst initFuelTrendChart = (\n  canvas: any,\n  width: number,\n  height: number,\n  dpr: number\n) => {\n  if (!canvas) {\n    return null\n  }\n  const chart = echarts.init(canvas, null, {\n    width,\n    height,\n    devicePixelRatio: dpr\n  })\n  canvas.setChart?.(chart)\n  chart.setOption(buildTrendOption())\n  fuelTrendChart = chart\n  return chart\n}\n\nconst fuelTrendEc = ref({\n  lazyLoad: false,\n  onInit: initFuelTrendChart\n})\n\nconst refreshFuelTrendChart = () => {\n  if (fuelTrendChart) {\n    fuelTrendChart.setOption(buildTrendOption(), true)\n  }\n}\n\nwatch(\n  trendData,\n  () => {\n    refreshFuelTrendChart()\n  },\n  { deep: true }\n)\n\nwatch(city, () => {\n  refreshFuelTrendChart()\n})\n\nonUnmounted(() => {\n  fuelTrendChart?.dispose()\n  fuelTrendChart = null\n  if (enterAnimationTimer) {\n    clearTimeout(enterAnimationTimer)\n    enterAnimationTimer = null\n  }\n})\n\n/**\n * 统一处理页面跳转或后续功能入口\n * @param actionKey 操作 key\n */\nconst handleNavigate = (actionKey: string) => {\n  uni.showToast({\n    title: `功能 ${actionKey} 开发中`,\n    icon: 'none'\n  })\n}\n\nconst navigateToCity = () => {\n  uni.navigateTo({\n    url: `/pages/city/index?currentCity=${encodeURIComponent(city.value)}`,\n    events: {\n      'city-selected': (selectedCity: string) => {\n        if (selectedCity) {\n          city.value = normalizeOrDefault(selectedCity)\n        }\n      }\n    }\n  })\n}\n\nonShow(() => {\n  syncSelectedCity()\n  runPageEnterAnimation()\n})\n\nonMounted(() => {\n  runPageEnterAnimation()\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/uni.scss';\n\n.home-page {\n  // padding: 24rpx 32rpx 120rpx;\n  padding: 24rpx 32rpx calc(180rpx + env(safe-area-inset-bottom, 0px));\n  padding-top: calc(34rpx + var(--status-bar-height, env(safe-area-inset-top, 0px)));\n  box-sizing: border-box;\n\n  &.home-page--locked {\n    height: 100vh;\n    overflow: hidden;\n  }\n\n  // Shared entry animation for the main hero cards\n  .animated-block {\n    opacity: 0;\n    transform: translate3d(0, 36rpx, 0) scale(0.98);\n    transition-property: opacity, transform;\n    transition-duration: 0.55s, 0.65s;\n    transition-timing-function: ease, cubic-bezier(0.22, 0.61, 0.36, 1);\n    will-change: opacity, transform;\n  }\n\n  .animated-block--visible {\n    opacity: 1;\n    transform: translate3d(0, 0, 0) scale(1);\n  }\n\n  .animated-block--delay-0 {\n    transition-delay: 0ms;\n  }\n\n  .animated-block--delay-1 {\n    transition-delay: 120ms;\n  }\n\n  .animated-block--delay-2 {\n    transition-delay: 200ms;\n  }\n\n  .animated-block--delay-3 {\n    transition-delay: 280ms;\n  }\n\n  // Soft animated gradient hero card\n  .header-card {\n    background: linear-gradient(180deg, #58b1ff 0%, #1ec15f 100%);\n    border-radius: 48rpx 48rpx 32rpx 32rpx;\n    padding: 48rpx 40rpx;\n    color: #fff;\n    box-shadow: 0 24rpx 40rpx rgba(24, 160, 88, 0.25);\n    margin-bottom: 32rpx;\n    position: relative;\n    overflow: hidden;\n    background-size: 240% 240%;\n    animation: heroGradient 10s ease-in-out infinite alternate;\n\n    &::after {\n      content: '';\n      position: absolute;\n      inset: 0;\n      background: radial-gradient(\n          circle at 20% 20%,\n          rgba(255, 255, 255, 0.3),\n          transparent 45%\n        ),\n        radial-gradient(\n          circle at 80% 0%,\n          rgba(255, 255, 255, 0.2),\n          transparent 40%\n        );\n      opacity: 0.35;\n      pointer-events: none;\n      mix-blend-mode: screen;\n      animation: heroGlow 12s linear infinite;\n    }\n\n    .header-meta {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 32rpx;\n\n      .location-row {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 28rpx;\n        font-weight: 600;\n\n        .location-icon {\n          width: 32rpx;\n          height: 32rpx;\n          margin-right: 10rpx;\n          flex-shrink: 0;\n          display: block;\n        }\n\n        .location-text {\n          // margin-right: 8rpx;\n        }\n\n        .dingwei_right {\n          width: 26rpx;\n          height: 26rpx;\n          margin-left: 6rpx;\n          flex-shrink: 0;\n          display: block;\n        }\n      }\n\n      .location-row__hover {\n        opacity: 0.7;\n      }\n\n      .header-actions {\n        display: flex;\n        gap: 16rpx;\n\n        .chip {\n          padding: 12rpx 28rpx;\n          border-radius: 999rpx;\n          font-size: 24rpx;\n          font-weight: 600;\n\n          .chip-text {\n            white-space: nowrap;\n          }\n        }\n\n        .chip.primary {\n          background-color: rgba(255, 255, 255, 0.25);\n        }\n\n        .chip.outline {\n          border: 2rpx solid rgba(255, 255, 255, 0.45);\n          background-color: transparent;\n        }\n      }\n    }\n\n    .car-info {\n      margin-bottom: 24rpx;\n\n      .car-name {\n        display: block;\n        font-size: 40rpx;\n        font-weight: 700;\n      }\n\n      .car-trim {\n        display: block;\n        margin-top: 8rpx;\n        font-size: 26rpx;\n        opacity: 0.9;\n      }\n    }\n\n    .price-row {\n      display: flex;\n      align-items: baseline;\n      gap: 16rpx;\n      margin-bottom: 24rpx;\n\n      .oil-type {\n        font-size: 32rpx;\n        font-weight: 600;\n        padding: 8rpx 20rpx;\n        background-color: rgba(255, 255, 255, 0.2);\n        border-radius: 999rpx;\n      }\n\n      .oil-price {\n        .price-number {\n          font-size: 40rpx;\n          font-weight: 700;\n          margin-right: 6rpx;\n        }\n      }\n    }\n\n    .reminder-banner {\n      margin-top: 24rpx;\n      background-color: rgba(255, 255, 255, 0.2);\n      border-radius: 24rpx;\n      padding: 20rpx 24rpx;\n      display: flex;\n      align-items: center;\n      font-size: 24rpx;\n\n      .reminder-icon {\n        margin-right: 12rpx;\n      }\n\n      .reminder-text {\n        white-space: nowrap;\n      }\n    }\n  }\n\n  .latest-card,\n  .stats-card,\n  .trend-card {\n    background-color: #fff;\n    border-radius: $card-radius;\n    padding: $card-padding;\n    box-shadow: $soft-shadow;\n    margin-bottom: 32rpx;\n  }\n\n  .latest-title,\n  .stats-header,\n  .trend-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20rpx;\n  }\n\n  .label {\n    font-size: 30rpx;\n    font-weight: 600;\n  }\n\n  .link {\n    font-size: 24rpx;\n    color: $primary-dark;\n  }\n\n  .latest-card {\n    .latest-body {\n      display: flex;\n      align-items: baseline;\n      margin-bottom: 24rpx;\n\n      .latest-number {\n        font-size: 72rpx;\n        font-weight: 700;\n        line-height: 1;\n        margin-right: 12rpx;\n      }\n\n      .latest-unit {\n        font-size: 26rpx;\n        color: $muted-text;\n      }\n    }\n\n    .rating-row {\n      display: flex;\n      align-items: center;\n      gap: 32rpx;\n\n      .rating-label {\n        flex: 1;\n      }\n\n      .rating-badges {\n        flex: 0 0 50%;\n        max-width: 50%;\n        display: flex;\n        gap: 12rpx;\n        align-items: center;\n        justify-content: space-between;\n      }\n\n      .rating-badge {\n        width: 56rpx;\n        height: 56rpx;\n        padding: 0 6rpx;\n        border-radius: 32rpx;\n        background: var(--badge-bg, #edf3ef);\n        color: var(--badge-color, $primary-dark);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        // clip-path: polygon(25% 6%, 75% 6%, 100% 50%, 75% 94%, 25% 94%, 0% 50%);\n        clip-path: polygon(50% 0%, 94% 25%, 94% 75%, 50% 100%, 6% 75%, 6% 25%);\n        transform: scale(0.88) translateY(0rpx);\n        opacity: 0.88;\n        transition: transform 0.25s ease, background 0.25s ease,\n          color 0.25s ease, box-shadow 0.25s ease;\n        box-shadow: inset 0 0 0 0 rgba(255, 255, 255, 0.25);\n      }\n\n      .rating-badge text {\n        line-height: 1;\n        font-size: 28rpx;\n        font-weight: 700;\n      }\n\n      .rating-badge.active {\n        background: var(--badge-color, $primary-color);\n        color: #fff;\n        transform: scale(1.12) translateY(0);\n        opacity: 1;\n        box-shadow: 0 18rpx 28rpx rgba(30, 193, 95, 0.35);\n      }\n\n      .rating-badge.active text {\n        font-size: 34rpx;\n      }\n    }\n  }\n\n  .stats-card {\n    .stats-grid {\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      gap: 24rpx;\n\n      .stat-item {\n        background-color: #f7f9fb;\n        border-radius: 20rpx;\n        padding: 20rpx;\n\n        .stat-label {\n          font-size: 24rpx;\n          color: $muted-text;\n        }\n\n        .stat-value {\n          display: block;\n          font-size: 36rpx;\n          font-weight: 700;\n          margin: 12rpx 0 6rpx;\n        }\n\n        .stat-value.accent {\n          color: $primary-dark;\n        }\n\n        .stat-unit {\n          font-size: 22rpx;\n          color: $muted-text;\n        }\n      }\n    }\n  }\n\n  .trend-card {\n    .trend-body {\n      // margin: 16rpx 0 24rpx;\n    }\n\n    .trend-chart__wrapper {\n      border-radius: 16rpx;\n      border: 1rpx solid rgba(203, 210, 221, 0.3);\n      background: #fff;\n      // padding: 8rpx 0 0;\n      height: 600rpx;\n      overflow: hidden;\n    }\n\n    .trend-chart__canvas {\n      width: 100%;\n      height: 100%;\n      display: block;\n    }\n\n    .trend-chart__fallback {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: $muted-text;\n      font-size: 24rpx;\n      // padding: 0 24rpx;\n      text-align: center;\n      background: linear-gradient(180deg, #f9fbff 0%, #f1f4f9 100%);\n    }\n\n    .trend-footer {\n      color: $muted-text;\n      font-size: 22rpx;\n    }\n  }\n\n  .filter {\n    display: flex;\n    align-items: center;\n    gap: 8rpx;\n    padding: 8rpx 16rpx;\n    border-radius: 999rpx;\n    background-color: #f2f5f8;\n    color: $muted-text;\n\n    .filter-text {\n      font-size: 24rpx;\n    }\n\n    .filter-arrow {\n      font-size: 22rpx;\n    }\n  }\n\n  .filter.filter__hover {\n    opacity: 0.7;\n  }\n\n}\n\n@keyframes heroGradient {\n  0% {\n    background-position: 0% 0%;\n  }\n  100% {\n    background-position: 100% 100%;\n  }\n}\n\n@keyframes heroGlow {\n  0% {\n    transform: translate3d(0, 0, 0) scale(1);\n    opacity: 0.35;\n  }\n  50% {\n    transform: translate3d(-2%, 4%, 0) scale(1.05);\n    opacity: 0.5;\n  }\n  100% {\n    transform: translate3d(2%, -3%, 0) scale(1.02);\n    opacity: 0.35;\n  }\n}\n\n</style>\n","import MiniProgramPage from '/Users/alan2/Downloads/zm/cat-life-uniapp-wechat/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["normalizeCityName","ref","uni","STORAGE_KEYS","watch","onUnmounted","onShow","onMounted"],"mappings":"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"}
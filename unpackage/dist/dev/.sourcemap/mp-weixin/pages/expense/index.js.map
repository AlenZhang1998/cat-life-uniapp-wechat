{"version":3,"file":"index.js","sources":["pages/expense/index.vue","pages/expense/index.vue?type=page"],"sourcesContent":["<template>\n  <view\n    class=\"expense-page\"\n    :class=\"{\n      'expense-page--locked':\n        showHeroPicker || showMonthlyPicker || showYearlyPicker,\n    }\"\n  >\n    <view class=\"hero-card\">\n      <view class=\"hero-card__title-row\">\n        <text class=\"hero-card__title\">ÁªüËÆ°</text>\n        <view class=\"hero-card__filter\" @tap=\"handleHeroRangeTap\">\n          <text>{{ heroRange.label }}</text>\n          <text class=\"hero-card__filter-icon\">‚áÖ</text>\n        </view>\n      </view>\n\n      <view class=\"hero-card__equation\">\n        <view class=\"equation-block\">\n          <view class=\"equation-label\">\n            <text>ÊÄªÊîØÂá∫</text>\n            <text class=\"info-badge\">?</text>\n          </view>\n          <view class=\"equation-value equation-value--accent\">\n            <text class=\"equation-number\">{{ heroOverview.total }}</text>\n            <text class=\"equation-unit\">ÂÖÉ</text>\n          </view>\n        </view>\n        <text class=\"equation-operator\">=</text>\n        <view class=\"equation-block\">\n          <view class=\"equation-label\">\n            <text>Ê≤πË¥πÊÄªËÆ°</text>\n          </view>\n          <view class=\"equation-value\">\n            <text class=\"equation-number\">{{ heroOverview.fuel }}</text>\n            <text class=\"equation-unit\">ÂÖÉ</text>\n          </view>\n        </view>\n        <text class=\"equation-operator\">+</text>\n        <view class=\"equation-block\">\n          <view class=\"equation-label\">\n            <text>ÊîØÂá∫ÊÄªËÆ°</text>\n          </view>\n          <view class=\"equation-value\">\n            <text class=\"equation-number\">{{ heroOverview.other }}</text>\n            <text class=\"equation-unit\">ÂÖÉ</text>\n          </view>\n        </view>\n      </view>\n\n      <view class=\"hero-divider\"></view>\n\n      <view class=\"hero-card__metrics\">\n        <view\n          class=\"hero-metric\"\n          v-for=\"metric in heroOverview.metrics\"\n          :key=\"metric.key\"\n        >\n          <view class=\"equation-label\">\n            <text>{{ metric.label }}</text>\n            <text class=\"info-badge\">?</text>\n          </view>\n          <text class=\"hero-metric__value\">{{ metric.value }}</text>\n          <text class=\"hero-metric__unit\">{{ metric.unit }}</text>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"chart-card\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">Ê≤πË¥πÊúàÂ∫¶ÁªüËÆ°</text>\n        <view class=\"chart-filter\" @tap=\"cycleMonthlyRange\">\n          <text>{{ monthlyRange.label }}</text>\n          <text class=\"chart-filter__icon\">‚áÖ</text>\n        </view>\n      </view>\n      <view class=\"chart-body\">\n\n        <ec-canvas\n          v-show=\"!showHeroPicker && !showMonthlyPicker && !showYearlyPicker\"\n          id=\"monthlyExpenseChart\"\n          canvas-id=\"monthlyExpenseChart\"\n          class=\"chart-canvas\"\n          style=\"width: 100%; height: 320rpx\"\n          :ec=\"monthlyExpenseEc\"\n        ></ec-canvas>\n\n\n\n\n\n\n      </view>\n    </view>\n\n    <view class=\"chart-card\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">Ê≤πËÄóÂπ¥Â∫¶ÂØπÊØîÁªüËÆ°</text>\n        <view class=\"chart-filter\" @tap=\"cycleYearlyRange\">\n          <text>{{ yearlyRange.label }}</text>\n          <text class=\"chart-filter__icon\">‚áÖ</text>\n        </view>\n      </view>\n      <view class=\"chart-body\">\n\n        <ec-canvas\n          v-show=\"!showHeroPicker && !showMonthlyPicker && !showYearlyPicker\"\n          id=\"yearlyExpenseChart\"\n          canvas-id=\"yearlyExpenseChart\"\n          class=\"chart-canvas\"\n          style=\"width: 100%; height: 320rpx\"\n          :ec=\"yearlyExpenseEc\"\n        ></ec-canvas>\n\n\n\n\n\n\n      </view>\n    </view>\n\n    <RangePickerOverlay\n      :visible=\"showHeroPicker\"\n      title=\"ÈÄâÊã©ÁªüËÆ°ËåÉÂõ¥\"\n      :options=\"HERO_RANGE_OPTIONS\"\n      :selected-key=\"pendingHeroRange\"\n      @update:selected-key=\"handleHeroRangeSelection\"\n      @cancel=\"closeHeroPicker\"\n      @confirm=\"confirmHeroPicker\"\n    />\n\n    <RangePickerOverlay\n      :visible=\"showMonthlyPicker\"\n      title=\"ÈÄâÊã©ÁªüËÆ°ËåÉÂõ¥\"\n      :options=\"monthlyRangeOptions\"\n      :selected-key=\"pendingMonthlyRange\"\n      @update:selected-key=\"handleMonthlyRangeSelection\"\n      @cancel=\"closeMonthlyPicker\"\n      @confirm=\"confirmMonthlyPicker\"\n    />\n\n    <RangePickerOverlay\n      :visible=\"showYearlyPicker\"\n      title=\"ÈÄâÊã©ÂØπÊØîÂå∫Èó¥\"\n      :options=\"yearlyRangeOptions\"\n      :selected-key=\"pendingYearlyRange\"\n      @update:selected-key=\"handleYearlyRangeSelection\"\n      @cancel=\"closeYearlyPicker\"\n      @confirm=\"confirmYearlyPicker\"\n    />\n\n    <!-- <view class=\"timeline\">\n      <view class=\"section-header\">\n        <text class=\"section-title\">Ë¥πÁî®Êó∂Èó¥Á∫ø</text>\n        <text class=\"section-subtitle\">Ëøë {{ expenseRecords.length }} Á¨î</text>\n      </view>\n      <view class=\"timeline-track\"></view>\n      <view class=\"timeline-item\" v-for=\"item in expenseRecords\" :key=\"item.id\">\n        <view\n          class=\"timeline-marker\"\n          :style=\"{ borderColor: getCategoryMeta(item.category).color }\"\n        ></view>\n        <view class=\"timeline-content\">\n          <view class=\"timeline-row\">\n            <text class=\"timeline-date\">{{ item.date }}</text>\n            <text class=\"timeline-amount\">Ôø•{{ item.amount }}</text>\n          </view>\n          <view class=\"timeline-tag\">\n            <text class=\"timeline-tag__icon\">{{ getCategoryMeta(item.category).icon }}</text>\n            <text class=\"timeline-tag__label\">\n              {{ getCategoryMeta(item.category).label }} ¬∑ {{ item.title }}\n            </text>\n            <text class=\"timeline-tag__status\" v-if=\"item.tag\">{{ item.tag }}</text>\n          </view>\n          <view class=\"timeline-meta\">\n            <text>{{ item.location }}</text>\n            <text>{{ item.detail }}</text>\n          </view>\n          <text class=\"timeline-remark\" v-if=\"item.remark\">{{ item.remark }}</text>\n        </view>\n      </view>\n    </view> -->\n  </view>\n  <LoginOverlay v-model:visible=\"showLoginSheet\" />\n  <BottomActionBar\n    active=\"expense\"\n    :is-logged-in=\"isLoggedIn\"\n    @login-required=\"handleLoginRequired\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { onShow } from '@dcloudio/uni-app';\nimport { computed, onUnmounted, ref } from 'vue';\nimport BottomActionBar from '@/components/BottomActionBar.vue';\nimport RangePickerOverlay from '@/components/RangePickerOverlay.vue';\nimport LoginOverlay from '@/components/LoginOverlay.vue';\nimport { useAuth } from '@/utils/auth';\nimport { axios } from '@/utils/request';\n\n// uCharts ÂÆòÊñπ ECharts ÈÄÇÈÖç‰ªÖÊîØÊåÅ CJS ÂØºÂÖ•ÔºåËøôÈáå‰ΩøÁî® require ÊñπÂºè‰ª•ÂÖºÂÆπÁºñËØëÂà∞Â∞èÁ®ãÂ∫èÁ´Ø\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst echarts = require('../../wxcomponents/ec-canvas/echarts');\n\n// ============= Á±ªÂûã & Â∏∏Èáè =============\ntype ExpenseCategory =\n  | 'fuel'\n  | 'maintenance'\n  | 'parking'\n  | 'charging'\n  | 'insurance'\n  | 'wash';\n\ntype RangeKey = '3m' | '6m' | '1y' | '2y' | '3y' | 'all';\ntype BackendRangeKey = '3m' | '6m' | '1y' | '2y' | '3y' | 'all';\n\ntype HeroMetric = {\n  key: string;\n  label: string;\n  value: string;\n  unit: string;\n};\n\ntype HeroOverview = {\n  total: string;\n  fuel: string;\n  other: string;\n  metrics: HeroMetric[];\n};\n\ntype MonthlyBarPoint = {\n  year: number; // 2024 / 2025\n  month: string; // '10Êúà' '11Êúà'\n  value: number;\n};\n\ntype YearlyLinePoint = {\n  year: number; // Âπ¥‰ªΩÔºå‰æãÂ¶Ç 2024\n  month: number; // 1-12\n  x: number; // Áî®Êù•ÁîªÂõæÁöÑÊ®™ÂùêÊ†áÔºàÂ∏¶‰∏ÄÁÇπÂÅèÁßªÔºâ\n  value: number; // ÂΩìÊ¨°ËÆ∞ÂΩïÁöÑÊ≤πËÄóÔºàconsumptionÔºâ\n};\n\n// ===== Âπ¥‰ªΩÈ¢úËâ≤Â∑•ÂÖ∑ÔºöÈÄöÁî®ÁªôÊâÄÊúâ‚ÄúÊåâÂπ¥‰ªΩ‰∏äËâ≤‚ÄùÁöÑÂõæÁî® =====\n\n// ‰∏ÄÁªÑÂü∫Á°ÄË∞ÉËâ≤ÊùøÔºåÂèØ‰ª•ÊåâÈúÄÂÜçÂä†\nconst YEAR_COLOR_POOL = [\n  '#E34CFF', // Á≤â\n  '#3A7AFE', // Ëìù\n  '#1EC15F', // Áªø\n  '#FF9F0A', // Ê©ô\n  '#FF4D4F', // Á∫¢\n  '#8B5CF6', // Á¥´\n  '#14B8A6', // Èùí\n  '#F97316', // Ê∑±Ê©ô\n  '#22C55E', // Ê∑±Áªø\n  '#0EA5E9', // Â§©Ëìù\n];\n\n// Ê†πÊçÆÂπ¥‰ªΩÁ®≥ÂÆöÂèñËâ≤ÔºàÂêå‰∏ÄÂπ¥Ê∞∏ËøúÊòØÂêå‰∏Ä‰∏™È¢úËâ≤Ôºâ\nconst getYearColor = (year: number) => {\n  if (!Number.isFinite(year)) return '#3A7AFE'; // ÂÖúÂ∫ïËâ≤\n  const idx = Math.abs(year) % YEAR_COLOR_POOL.length;\n  return YEAR_COLOR_POOL[idx];\n};\n\n// const CATEGORY_META: Record<\n//   ExpenseCategory,\n//   { label: string; icon: string; color: string; badgeBg: string }\n// > = {\n//   fuel: { label: 'Âä†Ê≤π', icon: '‚õΩ', color: '#1EC15F', badgeBg: '#E4FAED' },\n//   maintenance: {\n//     label: '‰øùÂÖª',\n//     icon: 'üõ†Ô∏è',\n//     color: '#3A7AFE',\n//     badgeBg: '#E2EAFF',\n//   },\n//   parking: { label: 'ÂÅúËΩ¶', icon: 'üÖøÔ∏è', color: '#FFB74D', badgeBg: '#FFF2E1' },\n//   charging: { label: 'ÂÖÖÁîµ', icon: '‚ö°', color: '#00B8D9', badgeBg: '#D4F7FF' },\n//   insurance: {\n//     label: '‰øùÈô©',\n//     icon: 'üõ°Ô∏è',\n//     color: '#8E64FF',\n//     badgeBg: '#F0E7FF',\n//   },\n//   wash: { label: 'Ê¥óËΩ¶', icon: 'üí¶', color: '#00BFA5', badgeBg: '#DDF8F3' },\n// };\n\n// ============= ÁôªÂΩïÁä∂ÊÄÅ =============\nconst { isLoggedIn, refreshLoginState } = useAuth();\nconst showLoginSheet = ref(false);\n\nconst handleLoginRequired = () => {\n  if (!isLoggedIn.value) {\n    showLoginSheet.value = true;\n  }\n};\n\n// ============= ÂÖ¨ÂÖ±Êó•ÊúüÂ∑•ÂÖ∑ =============\nconst DAY_MS = 24 * 60 * 60 * 1000;\n\n// const normalizeDateOnly = (value?: string | Date | null) => {\n//   if (!value) return null;\n//   const date =\n//     value instanceof Date ? value : new Date(String(value).replace(/-/g, '/'));\n//   if (Number.isNaN(date.getTime())) return null;\n//   return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n// };\n\n// const calcDateRangeDays = (\n//   start?: string | Date | null,\n//   end?: string | Date | null\n// ): number | null => {\n//   const startDate = normalizeDateOnly(start);\n//   const endDate = normalizeDateOnly(end);\n//   if (!startDate || !endDate || endDate.getTime() < startDate.getTime()) {\n//     return null;\n//   }\n//   const diff = endDate.getTime() - startDate.getTime();\n//   return Math.floor(diff / DAY_MS) + 1;\n// };\n\n// ËÆ°ÁÆó‚ÄúÁà±ËΩ¶Áõ∏‰º¥Â§©Êï∞‚ÄùÔºàÂíåÈ¶ñÈ°µ‰øùÊåÅ‰∏ÄËá¥Ôºâ\nconst calcHeroDays = (deliveryDate?: string | null) => {\n  if (!deliveryDate) return 0;\n  const parsed = new Date(deliveryDate.replace(/-/g, '/'));\n  if (Number.isNaN(parsed.getTime())) return 0;\n  const diff = Date.now() - parsed.getTime();\n  if (diff < 0) return 0;\n  const days = Math.floor(diff / DAY_MS);\n  return days + 1;\n};\n\n// ËÆ°ÁÆó‚ÄúÂΩìÂâçÁ≠õÈÄâÂàóË°®‰∏≠ÊúÄÊó©‰∏ÄÊù°ËÆ∞ÂΩï‚ÄùË∑ù‰ªäÁöÑÂ§©Êï∞\nconst calcDaysSinceEarliestRecord = (records: any[]): number => {\n  if (!Array.isArray(records) || records.length === 0) return 0;\n\n  let earliestTs: number | null = null;\n\n  records.forEach((item) => {\n    const dateStr = item?.date || item?.refuelDate;\n    if (!dateStr) return;\n\n    const ts = new Date(String(dateStr).replace(/-/g, '/')).getTime();\n    if (Number.isNaN(ts)) return;\n\n    if (earliestTs === null || ts < earliestTs) {\n      earliestTs = ts;\n    }\n  });\n\n  if (earliestTs === null) return 0;\n\n  const diff = Date.now() - earliestTs;\n  if (diff < 0) return 0;\n\n  return Math.floor(diff / DAY_MS) + 1;\n};\n\n// ============= Áî®Êà∑‰∫§ËΩ¶Êó•ÊúüÔºàÁî®‰∫éÁªüËÆ°Âç°ÁâáÔºâ =============\nconst profileDeliveryDate = ref<string | null>(null);\n\nconst fetchProfile = async () => {\n  if (!isLoggedIn.value) return;\n  try {\n    const res = await axios.get('/api/profile');\n    const resp = res as any;\n    const data = resp.data || resp || {};\n    profileDeliveryDate.value = data.deliveryDate || '';\n  } catch (err) {\n    uni.__f__('warn','at pages/expense/index.vue:372','fetchProfile error:', err);\n  }\n};\n\n// ============= È°∂ÈÉ®„ÄåÁªüËÆ°„ÄçÂç°Áâá =============\n\n// ÁªüËÆ°ËåÉÂõ¥ÈÄâÈ°πÔºàUIÔºâ\nconst HERO_RANGE_OPTIONS: { key: RangeKey; label: string }[] = [\n  { key: '3m', label: '‰∏â‰∏™Êúà' },\n  { key: '6m', label: 'ÂçäÂπ¥' },\n  { key: '1y', label: '‰∏ÄÂπ¥' },\n  { key: '2y', label: '‰∏§Âπ¥' },\n  { key: 'all', label: 'ÂÖ®ÈÉ®' },\n];\n\nconst heroRange = ref(HERO_RANGE_OPTIONS[4]); // ÈªòËÆ§‰∏ÄÂπ¥\nconst showHeroPicker = ref(false);\nconst pendingHeroRange = ref<RangeKey>(heroRange.value.key);\n\n// È°∂ÈÉ®ÁªüËÆ°Êï∞ÊçÆÔºàÂºÇÊ≠•Â°´ÂÖÖÔºâ\nconst heroOverview = ref<HeroOverview>({\n  total: '--',\n  fuel: '--',\n  other: '--',\n  metrics: [\n    { key: 'days', label: 'Áà±ËΩ¶Áõ∏‰º¥', value: '--', unit: 'Â§©' },\n    { key: 'fuelKm', label: 'Ê≤πË¥π/ÂÖ¨Èáå', value: '--', unit: 'ÂÖÉ' },\n    { key: 'perDay', label: 'ÊàêÊú¨/Â§©', value: '--', unit: 'ÂÖÉ' },\n  ],\n});\n\n// ÂâçÁ´ØËåÉÂõ¥ key -> ÂêéÁ´Ø range ÂèÇÊï∞\nconst mapRangeToBackend = (key: RangeKey): BackendRangeKey => {\n  if (\n    key === '3m' ||\n    key === '6m' ||\n    key === '1y' ||\n    key === '2y' ||\n    key === '3y'\n  ) {\n    return key;\n  }\n  return 'all';\n};\n\n// ÊãâÂèñ„ÄåÁªüËÆ°„ÄçÊâÄÈúÄÁöÑ refuel Êï∞ÊçÆ\nconst fetchHeroData = async (rangeKey: RangeKey = heroRange.value.key) => {\n  if (!isLoggedIn.value) {\n    heroOverview.value = {\n      total: '--',\n      fuel: '--',\n      other: '--',\n      metrics: [\n        { key: 'days', label: 'Áà±ËΩ¶Áõ∏‰º¥', value: '--', unit: 'Â§©' },\n        { key: 'fuelKm', label: 'Ê≤πË¥π/ÂÖ¨Èáå', value: '--', unit: 'ÂÖÉ' },\n        { key: 'perDay', label: 'ÊàêÊú¨/Â§©', value: '--', unit: 'ÂÖÉ' },\n      ],\n    };\n    return;\n  }\n\n  try {\n    const backendRange = mapRangeToBackend(rangeKey);\n    const res = await axios.get(`/api/refuels/list?range=${backendRange}`);\n    const resp = res as any;\n    if (!resp || resp.success !== true) {\n      throw new Error('Êé•Âè£ËøîÂõûÂºÇÂ∏∏');\n    }\n\n    const payload = resp.data || resp || {};\n    const s = payload.summary || {};\n    const list = (payload.records || []) as any[];\n\n    // ËÆ°ÁÆóÊÄªÊ≤πË¥πÔºàÂΩìÂâçÁ≠õÈÄâËåÉÂõ¥ÂÜÖÁöÑÊâÄÊúâÂä†Ê≤πÈáëÈ¢ùÔºâ\n    const totalOilNum =\n      typeof s.totalAmount === 'number'\n        ? Number(s.totalAmount)\n        : list.reduce((sum, item) => sum + Number(item.amount || 0), 0);\n\n    // ÁõÆÂâçÂè™ÊúâÊ≤πË¥πÔºåÂÖ∂ÂÆÉÊîØÂá∫‰∏∫ 0ÔºåÂ∞ÜÊù•Êúâ‰øùÂÖª/ÂÅúËΩ¶Á≠âÂèØ‰ª•Âú®ËøôÈáåÂä†\n    const otherTotalNum = 0;\n    const totalSpendNum = totalOilNum + otherTotalNum;\n\n    // ===== Áî®‚ÄúÊª°ÁÆ±Âå∫Èó¥‚ÄùËÆ°ÁÆóÊ≤πË¥π/ÂÖ¨Èáå =====\n\n    // list ÊòØÊåâÊó∂Èó¥ÂÄíÂ∫èÔºàÊúÄÊñ∞Âú®ÂâçÔºâÔºåËøôÈáåÁøªËΩ¨ÊàêÊ≠£Â∫èÂ§ÑÁêÜ\n    const asc = [...list].reverse();\n\n    let lastFullIndex: number | null = null;\n    let segmentDistanceTotal = 0; // ÊâÄÊúâÊª°ÁÆ±Âå∫Èó¥ÁöÑÈáåÁ®ãÂíå\n    let segmentAmountTotal = 0; // ÊâÄÊúâÊª°ÁÆ±Âå∫Èó¥ÁöÑÊ≤πË¥πÂíå\n\n    for (let i = 0; i < asc.length; i++) {\n      const item = asc[i];\n      const isFull = !!item.isFullTank;\n\n      if (!isFull) continue;\n\n      // Á¨¨‰∏ÄÊ¨°ÈÅáÂà∞‚ÄúÂä†Êª°‚ÄùÔºåËÆ∞ÂΩïËµ∑ÁÇπ\n      if (lastFullIndex === null) {\n        lastFullIndex = i;\n        continue;\n      }\n\n      // ‰πãÂêéÂÜçÊ¨°ÈÅáÂà∞‚ÄúÂä†Êª°‚ÄùÔºåÂΩ¢Êàê‰∏Ä‰∏™Âå∫Èó¥ [lastFullIndex, i]\n      const start = asc[lastFullIndex];\n      const end = item;\n\n      const startOdo = Number(start.odometer);\n      const endOdo = Number(end.odometer);\n\n      if (\n        !Number.isFinite(startOdo) ||\n        !Number.isFinite(endOdo) ||\n        endOdo <= startOdo\n      ) {\n        // ÈáåÁ®ãÈùûÊ≥ïÔºåË∑≥ËøáËøô‰∏™Âå∫Èó¥ÔºåÂêåÊó∂ÊääÊñ∞ÁöÑÊª°ÁÆ±ÂΩìÊàê‰∏ã‰∏Ä‰∏™Âå∫Èó¥Ëµ∑ÁÇπ\n        lastFullIndex = i;\n        continue;\n      }\n\n      // Âå∫Èó¥Ê≤πË¥πÔºöËµ∑ÁÇπ‰πãÂêé‰∏ÄÊù°Âà∞ÁªàÁÇπËøô‰∏ÄÊù°Ôºà‰∏çÂê´Ëµ∑ÁÇπÂä†Êª°Ôºâ\n      let segmentAmount = 0;\n      for (let j = lastFullIndex + 1; j <= i; j++) {\n        const amt = Number(asc[j].amount || 0);\n        if (Number.isFinite(amt) && amt > 0) {\n          segmentAmount += amt;\n        }\n      }\n\n      const distance = endOdo - startOdo;\n      if (distance > 0 && segmentAmount > 0) {\n        segmentDistanceTotal += distance;\n        segmentAmountTotal += segmentAmount;\n      }\n\n      // ÂΩìÂâçÊª°ÁÆ±‰Ωú‰∏∫‰∏ã‰∏ÄÊÆµÁöÑËµ∑ÁÇπ\n      lastFullIndex = i;\n    }\n\n    const fuelPerKm =\n      segmentDistanceTotal > 0 ? segmentAmountTotal / segmentDistanceTotal : 0;\n\n    // ===== Áà±ËΩ¶Áõ∏‰º¥Â§©Êï∞ & ÊàêÊú¨/Â§© =====\n    const heroDaysNum = calcHeroDays(profileDeliveryDate.value);\n    const listSpanDays = calcDaysSinceEarliestRecord(list);\n\n    // ÊàêÊú¨/Â§© = ÊÄªÊîØÂá∫ / ÂΩìÂâçÁ≠õÈÄâÊï∞ÊçÆË∑®Â∫¶Â§©Êï∞\n    const costPerDay = listSpanDays > 0 ? totalSpendNum / listSpanDays : 0;\n\n    // ===== Êõ¥Êñ∞ heroOverview Êï∞ÊçÆ =====\n    heroOverview.value = {\n      total: totalSpendNum.toFixed(1), // ÊÄªÊîØÂá∫\n      fuel: totalOilNum.toFixed(1), // Ê≤πË¥π\n      other: otherTotalNum.toFixed(1), // ÂÖ∂‰ªñÊîØÂá∫\n      metrics: [\n        {\n          key: 'days',\n          label: 'Áà±ËΩ¶Áõ∏‰º¥',\n          value: heroDaysNum ? heroDaysNum.toFixed(0) : '--',\n          unit: 'Â§©',\n        },\n        {\n          key: 'fuelKm',\n          label: 'Ê≤πË¥π/ÂÖ¨Èáå',\n          value: segmentDistanceTotal > 0 ? fuelPerKm.toFixed(2) : '--',\n          unit: 'ÂÖÉ',\n        },\n        {\n          key: 'perDay',\n          label: 'ÊàêÊú¨/Â§©',\n          value: listSpanDays > 0 ? costPerDay.toFixed(2) : '--',\n          unit: 'ÂÖÉ',\n        },\n      ],\n    };\n  } catch (err) {\n    uni.__f__('warn','at pages/expense/index.vue:549','fetchHeroData error:', err);\n  }\n};\n\n// ÁªüËÆ°Âç°ÁâáÁ≠õÈÄâÂºπÁ™ó\nconst handleHeroRangeTap = () => {\n  pendingHeroRange.value = heroRange.value.key;\n  showHeroPicker.value = true;\n};\nconst closeHeroPicker = () => {\n  showHeroPicker.value = false;\n};\nconst handleHeroRangeSelection = (value: string | null) => {\n  if (value) {\n    pendingHeroRange.value = value as RangeKey;\n  }\n};\nconst confirmHeroPicker = () => {\n  const target = HERO_RANGE_OPTIONS.find(\n    (option) => option.key === pendingHeroRange.value\n  );\n  if (target) {\n    heroRange.value = target;\n    uni.showToast({ title: `Â∑≤ÂàáÊç¢Âà∞${target.label}`, icon: 'none' });\n    fetchHeroData(target.key);\n  }\n  closeHeroPicker();\n};\n\n// ============= „ÄåÊ≤πË¥πÊúàÂ∫¶ÁªüËÆ°„Äç =============\nconst monthlyRangeOptions: { key: RangeKey; label: string }[] = [\n  { key: '1y', label: 'Ëøë‰∏ÄÂπ¥' },\n  { key: '2y', label: 'Ëøë‰∏§Âπ¥' },\n  { key: '3y', label: 'Ëøë‰∏âÂπ¥' },\n  { key: 'all', label: 'ÂÖ®ÈÉ®' },\n];\n\nconst monthlyRange = ref(monthlyRangeOptions[3]); // ÈªòËÆ§ ÂÖ®ÈÉ®\nconst showMonthlyPicker = ref(false);\nconst pendingMonthlyRange = ref<RangeKey>(monthlyRangeOptions[3].key);\nconst monthlyChartData = ref<MonthlyBarPoint[]>([]);\n\n// Áî®ÊâÄÊúâÊü±Â≠êÁöÑÊÄªÂíå / Ê®™ËΩ¥Ë¶ÜÁõñÁöÑÊúà‰ªΩÊï∞Èáè ‰Ωú‰∏∫ËôöÁ∫øÂèÇËÄÉ\nconst monthlyBaseline = computed(() => {\n  const data = monthlyChartData.value;\n  if (!data.length) return '0';\n\n  // 1. ÊâæÂà∞ÊúÄÊó©„ÄÅÊúÄÊôöÁöÑ year-month\n  let minYear = data[0].year;\n  let maxYear = data[0].year;\n  let minMonth = parseInt(data[0].month, 10); // '10Êúà' => 10\n  let maxMonth = parseInt(data[0].month, 10);\n\n  for (const item of data) {\n    const y = item.year;\n    const m = parseInt(item.month, 10);\n    if (y < minYear || (y === minYear && m < minMonth)) {\n      minYear = y;\n      minMonth = m;\n    }\n    if (y > maxYear || (y === maxYear && m > maxMonth)) {\n      maxYear = y;\n      maxMonth = m;\n    }\n  }\n\n  // 2. ËÆ°ÁÆóÊ®™ËΩ¥‰∏ÄÂÖ±Ë∑®‰∫ÜÂ§öÂ∞ë‰∏™ÊúàÔºàÂåÖÂê´Â§¥Â∞æÔºâ\n  const monthCount = (maxYear - minYear) * 12 + (maxMonth - minMonth) + 1;\n\n  // 3. ÊâÄÊúâÊü±Â≠êÁöÑÊÄªÊ≤πË¥π\n  const sum = data.reduce((s, p) => s + p.value, 0);\n\n  const avg = monthCount > 0 ? sum / monthCount : 0;\n  return avg.toFixed(1);\n});\n\nconst fetchMonthlyCost = async (\n  rangeKey: RangeKey = monthlyRange.value.key\n) => {\n  if (!isLoggedIn.value) {\n    monthlyChartData.value = [];\n    return;\n  }\n\n  try {\n    // ÂÖàËÆ©ÂêéÁ´ØÊåâ range ËøáÊª§‰∏ÄÈÅçÔºåÂÜçÂú®ÂâçÁ´ØÊåâÂπ¥‰ªΩÂÅöÁ≤æÁ°ÆÁ≠õÈÄâ\n    const backendRange = mapRangeToBackend(rangeKey);\n    const res = await axios.get(`/api/refuels/list?range=${backendRange}`);\n    const resp = res as any;\n    if (!resp || resp.success !== true) {\n      throw new Error('Êé•Âè£ËøîÂõûÂºÇÂ∏∏');\n    }\n    const payload = resp.data || resp || {};\n    const list = (payload.records || []) as any[];\n\n    const now = new Date();\n    const currentYear = now.getFullYear();\n\n    // Ê†πÊçÆÁ≠õÈÄâÈ°πÔºåÁÆóÂá∫ÈúÄË¶Å‰øùÁïôÁöÑÊúÄÊó©Âπ¥‰ªΩ\n    let minYear = -Infinity;\n    switch (rangeKey) {\n      case '1y': // Ëøë‰∏ÄÂπ¥\n        minYear = currentYear;\n        break;\n      case '2y': // Ëøë‰∏§Âπ¥ = ‰ªäÂπ¥ + ÂéªÂπ¥\n        minYear = currentYear - 1;\n        break;\n      case '3y': // Ëøë‰∏âÂπ¥ = ‰ªäÂπ¥ + Ââç‰∏§Âπ¥\n        minYear = currentYear - 2;\n        break;\n      case 'all':\n      default:\n        minYear = -Infinity;\n        break;\n    }\n\n    const map = new Map<\n      string,\n      { year: number; month: number; amount: number }\n    >(); // '2025-07' -> ËÅöÂêà\n\n    list.forEach((item) => {\n      const dateStr = item.date || item.refuelDate;\n      if (!dateStr) return;\n\n      const d = new Date(String(dateStr).replace(/-/g, '/'));\n      if (Number.isNaN(d.getTime())) return;\n\n      const year = d.getFullYear();\n      const month = d.getMonth() + 1;\n\n      // Êåâ‚ÄúËøë‰∏ÄÂπ¥ / Ëøë‰∏§Âπ¥ / Ëøë‰∏âÂπ¥‚ÄùËøáÊª§\n      if (year < minYear || year > currentYear) return;\n\n      const key = `${year}-${String(month).padStart(2, '0')}`;\n      const prev = map.get(key)?.amount || 0;\n      map.set(key, { year, month, amount: prev + Number(item.amount || 0) });\n    });\n\n    monthlyChartData.value = Array.from(map.values())\n      .sort((a, b) => {\n        if (a.year !== b.year) return a.year - b.year;\n        return a.month - b.month;\n      })\n      .map((item) => ({\n        year: item.year,\n        month: `${item.month}Êúà`,\n        value: Number(item.amount.toFixed(0)),\n      }));\n\n    refreshMonthlyExpenseChart();\n  } catch (err) {\n    uni.__f__('warn','at pages/expense/index.vue:701','fetchMonthlyCost error:', err);\n    monthlyChartData.value = [];\n    refreshMonthlyExpenseChart();\n  }\n};\n\nconst cycleMonthlyRange = () => {\n  pendingMonthlyRange.value = monthlyRange.value.key;\n  showMonthlyPicker.value = true;\n};\nconst closeMonthlyPicker = () => {\n  showMonthlyPicker.value = false;\n};\nconst handleMonthlyRangeSelection = (value: string | null) => {\n  if (value) {\n    pendingMonthlyRange.value = value as RangeKey;\n  }\n};\nconst confirmMonthlyPicker = () => {\n  const target = monthlyRangeOptions.find(\n    (option) => option.key === pendingMonthlyRange.value\n  );\n  if (target) {\n    monthlyRange.value = target;\n    uni.showToast({ title: `Â∑≤ÂàáÊç¢Âà∞${target.label}`, icon: 'none' });\n    fetchMonthlyCost(target.key);\n  }\n  closeMonthlyPicker();\n};\n\n// ============= „ÄåÊ≤πËÄóÂπ¥Â∫¶ÂØπÊØîÁªüËÆ°„Äç =============\nconst yearlyRangeOptions: { key: RangeKey; label: string }[] = [\n  { key: '1y', label: '‰∏ÄÂπ¥' },\n  { key: '2y', label: '‰∏§Âπ¥' },\n  { key: '3y', label: '‰∏âÂπ¥' },\n  { key: 'all', label: 'ÂÖ®ÈÉ®' },\n];\nconst yearlyRange = ref(yearlyRangeOptions[3]);\nconst showYearlyPicker = ref(false);\nconst pendingYearlyRange = ref<RangeKey>(yearlyRangeOptions[0].key);\nconst yearlyChartData = ref<YearlyLinePoint[]>([]);\n\n// ‰ªé refuels ËÆ∞ÂΩïÈáåÔºåÊâæÂá∫ÊâÄÊúâ consumption ÊúâÂÄºÁöÑËÆ∞ÂΩïÔºå\n// ÊØèÊù°ËÆ∞ÂΩïÈÉΩ‰Ωú‰∏∫‰∏Ä‰∏™ÁÇπÁîªÂá∫Êù•\nconst fetchYearlyTrend = async (rangeKey: RangeKey = yearlyRange.value.key) => {\n  if (!isLoggedIn.value) {\n    yearlyChartData.value = [];\n    return;\n  }\n  try {\n    // ÁÆÄÂåñÔºö1y Áî® 1yÔºåÂÖ∂ÂÆÉÔºà2y/3y/allÔºâÈÉΩÁî® all\n    const backendRange: BackendRangeKey = rangeKey === '1y' ? '1y' : 'all';\n    const res = await axios.get(`/api/refuels/list?range=${backendRange}`);\n    const resp = res as any;\n    if (!resp || resp.success !== true) {\n      throw new Error('Êé•Âè£ËøîÂõûÂºÇÂ∏∏');\n    }\n\n    const payload = resp.data || resp || {};\n    const list = (payload.records || []) as any[];\n\n    const points: YearlyLinePoint[] = [];\n\n    // ÁªüËÆ°Âêå‰∏ÄÂπ¥Âêå‰∏ÄÊúàÂ∑≤ÊúâÂ§öÂ∞ëÊù°ÔºåÁî®Êù•ÂÅöËΩªÂæÆÊ®™ÂùêÊ†áÂÅèÁßª\n    const bucketCount = new Map<string, number>(); // key: \"2025-10\" -> n\n\n    list.forEach((item) => {\n      const consumption = item?.consumption;\n      if (consumption == null || consumption === '--') return;\n\n      const consumptionNum = Number(consumption);\n      if (!Number.isFinite(consumptionNum)) return;\n\n      const dateStr = item.date || item.refuelDate;\n      if (!dateStr) return;\n\n      const d = new Date(String(dateStr).replace(/-/g, '/'));\n      if (Number.isNaN(d.getTime())) return;\n\n      const year = d.getFullYear();\n      const month = d.getMonth() + 1; // 1-12\n\n      const key = `${year}-${month}`;\n      const prevCount = bucketCount.get(key) || 0;\n      bucketCount.set(key, prevCount + 1);\n\n      // ‰∏∫‰∫ÜÈÅøÂÖçÂÆåÂÖ®ÈáçÂêàÔºåËÆ©Âêå‰∏ÄÊúà‰ªΩÁöÑÁ¨¨ 1/2/3 Êù°ËÆ∞ÂΩïÂàÜÂà´ÂÅèÁßª‰∏ÄÁÇπÁÇπ\n      const offsetIndex = prevCount; // 0,1,2,...\n      const offset = (offsetIndex - 0.5) * 0.12; // -0.06, 0.06, 0.18 ...\n      const x = month + offset; // ‰æãÂ¶Ç 10.06„ÄÅ9.94 ‰πãÁ±ª\n\n      points.push({\n        year,\n        month,\n        x,\n        value: Number(consumptionNum.toFixed(2)),\n      });\n    });\n\n    // ÂÖàÊåâÂπ¥‰ªΩÔºåÂÜçÊåâ x ÂùêÊ†áÊéíÂ∫è\n    points.sort((a, b) => (a.year === b.year ? a.x - b.x : a.year - b.year));\n\n    yearlyChartData.value = points;\n    refreshYearlyExpenseChart();\n  } catch (err) {\n    uni.__f__('warn','at pages/expense/index.vue:806','fetchYearlyTrend error:', err);\n    yearlyChartData.value = [];\n    refreshYearlyExpenseChart();\n  }\n};\n\nconst cycleYearlyRange = () => {\n  pendingYearlyRange.value = yearlyRange.value.key;\n  showYearlyPicker.value = true;\n};\nconst closeYearlyPicker = () => {\n  showYearlyPicker.value = false;\n};\nconst handleYearlyRangeSelection = (value: string | null) => {\n  if (value) {\n    pendingYearlyRange.value = value as RangeKey;\n  }\n};\nconst confirmYearlyPicker = () => {\n  const target = yearlyRangeOptions.find(\n    (option) => option.key === pendingYearlyRange.value\n  );\n  if (target) {\n    yearlyRange.value = target;\n    uni.showToast({ title: `Â∑≤ÂàáÊç¢Âà∞${target.label}`, icon: 'none' });\n    fetchYearlyTrend(target.key);\n  }\n  closeYearlyPicker();\n};\n\n// ============= ECharts ÈÖçÁΩÆ =============\nlet monthlyExpenseChart: any = null;\nlet yearlyExpenseChart: any = null;\n\nconst buildMonthlyOption = () => {\n  const categories = monthlyChartData.value.map((item) => item.month);\n  const years = monthlyChartData.value.map((item) => item.year);\n\n  const seriesData = monthlyChartData.value.map((item) => ({\n    value: item.value,\n    itemStyle: {\n      color: getYearColor(item.year), // ‚úÖ ÊåâÂπ¥‰ªΩËá™Âä®ÂèñËâ≤\n    },\n  }));\n\n  const labelFormatter = (value: string, index: number) => {\n    const year = years[index];\n    const prevYear = index > 0 ? years[index - 1] : null;\n    if (index === 0 || year !== prevYear) {\n      const shortYear = String(year).slice(-2);\n      return `${shortYear}Âπ¥${value}`;\n    }\n    return value;\n  };\n\n  // ËøôÈáåÁõ¥Êé•ÂèñÂàöÊâçÁÆóÂ•ΩÁöÑ baseline\n  const avg = Number(monthlyBaseline.value);\n\n  return {\n    grid: { left: 32, right: 16, top: 36, bottom: 40 },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: { type: 'shadow' },\n      formatter: (params: any[]) => {\n        const p = params[0];\n        const idx = p.dataIndex;\n        const item = monthlyChartData.value[idx];\n        return `${item.year}Âπ¥${item.month}\\nÊ≤πË¥πÔºö${item.value} ÂÖÉ`;\n      },\n    },\n    xAxis: {\n      type: 'category',\n      data: categories,\n      axisLine: { lineStyle: { color: '#d0d7e3' } },\n      axisTick: { show: false },\n      axisLabel: {\n        color: '#5f6673',\n        fontSize: 12,\n        interval: 0,\n        formatter: labelFormatter,\n      },\n    },\n    yAxis: {\n      type: 'value',\n      splitLine: { lineStyle: { color: '#eef1f5', type: 'dashed' } },\n      axisLine: { show: false },\n      axisTick: { show: false },\n      axisLabel: { color: '#8a93a0', fontSize: 12 },\n    },\n    series: [\n      {\n        name: 'Ê≤πË¥π',\n        type: 'bar',\n        data: seriesData,\n        barWidth: 26,\n        label: {\n          show: true,\n          position: 'top',\n          color: '#1f2329',\n          fontSize: 12,\n        },\n        markLine: {\n          symbol: 'none',\n          label: {\n            show: true,\n            position: 'middle', // ‚úÖ ‰∏çË¶ÅÈªòËÆ§ auto\n            verticalAlign: 'middle', // ÂûÇÁõ¥Â±Ö‰∏≠\n            formatter: `${avg} ÂÖÉ`,\n            color: '#ff6b6b',\n          },\n          lineStyle: {\n            type: 'dashed',\n            color: '#ff6b6b',\n          },\n          data: [{ yAxis: avg }],\n        },\n      },\n    ],\n  };\n};\n\nconst buildYearlyOption = () => {\n  const data = yearlyChartData.value;\n  if (!data.length) {\n    return {\n      title: {\n        text: 'ÊöÇÊó†Êï∞ÊçÆ',\n        left: 'center',\n        top: 'middle',\n        textStyle: { color: '#9ca3af', fontSize: 12 },\n      },\n    };\n  }\n\n  // ÊâÄÊúâÂá∫Áé∞ËøáÁöÑÂπ¥‰ªΩ\n  const years = Array.from(new Set(data.map((p) => p.year))).sort(\n    (a, b) => a - b\n  );\n\n  // Y ËΩ¥ËåÉÂõ¥Âè™ÁúãÁúüÂÆûÊúâÂÄºÁöÑÁÇπ\n  const allValues = data.map((p) => p.value);\n  const maxVal = Math.max(...allValues);\n  const minVal = Math.min(...allValues);\n  const yMax = Math.max(9, Math.ceil(maxVal + 0.5));\n  const yMin = Math.min(4, Math.floor(minVal - 0.5));\n\n  // ÊØèÂπ¥‰∏ÄÊù°ÊäòÁ∫ø\n  const series = years.map((year) => {\n    const points = data.filter((p) => p.year === year);\n\n    const color = getYearColor(year); // ‚úÖ ÊåâÂπ¥‰ªΩËá™Âä®ÂèñËâ≤\n\n    return {\n      name: `${year}Âπ¥`,\n      type: 'line',\n      smooth: true,\n      connectNulls: true,\n      symbol: 'circle',\n      symbolSize: 6,\n      lineStyle: {\n        width: 2,\n        color,\n      },\n      itemStyle: {\n        color,\n        borderColor: '#ffffff',\n        borderWidth: 2,\n      },\n      // Áî®Êï∞ÂÄºÂûã x ËΩ¥Ôºövalue = [x, y]\n      data: points.map((p) => [p.x, p.value]),\n    };\n  });\n\n  return {\n    grid: { left: 40, right: 20, top: 30, bottom: 46 },\n    legend: {\n      bottom: 4,\n      data: years.map((y) => `${y}Âπ¥`),\n      icon: 'circle',\n      textStyle: { color: '#6b7280', fontSize: 11 },\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: { type: 'line' },\n      // backgroundColor: 'rgba(31,35,41,0.9)',\n      // borderWidth: 0,\n      // padding: [6, 8],\n      // textStyle: { color: '#fff', fontSize: 11 },\n      formatter: (params: any[]) => {\n        if (!params.length) return '';\n        const lines = params.map((p) => {\n          const xVal = p.value[0]; // [x,y]\n          const month = Math.round(xVal); // 10.06 -> 10 Êúà\n          return `${p.marker} ${p.seriesName}Ôºö${p.value[1].toFixed(\n            2\n          )} L/100km`;\n        });\n        const firstX = params[0].value[0];\n        const monthLabel = `${Math.round(firstX)}Êúà`;\n        return [monthLabel, ...lines].join('\\n');\n      },\n    },\n    // X ËΩ¥Ôºö1~12 ÁöÑÊï∞ÂÄºËΩ¥ÔºåÊòæÁ§∫Êàê„Äån Êúà„Äç\n    xAxis: {\n      type: 'value',\n      min: 1,\n      max: 12,\n      interval: 1,\n      boundaryGap: false,\n      axisLine: { lineStyle: { color: '#d4d7de' } },\n      axisTick: { show: false },\n      // ‚úÖ ÂÖ≥ÈîÆÔºöÂÖ≥Èó≠Á´ñÁ∫ø\n      splitLine: {\n        show: false,\n      },\n      axisLabel: {\n        color: '#6b7280',\n        fontSize: 11,\n        formatter: (val: number) => `${val}Êúà`,\n      },\n    },\n    yAxis: {\n      type: 'value',\n      min: yMin,\n      max: yMax,\n      splitNumber: 5,\n      splitLine: { lineStyle: { color: '#e5e7eb', type: 'dashed' } },\n      axisLine: { show: false },\n      axisTick: { show: false },\n      axisLabel: {\n        color: '#9ca3af',\n        fontSize: 11,\n        formatter: (val: number) => val.toFixed(1),\n      },\n    },\n    series,\n  };\n};\n\nconst initMonthlyExpenseChart = (\n  canvas: any,\n  width: number,\n  height: number,\n  dpr: number\n) => {\n  const chart = echarts.init(canvas, null, {\n    width,\n    height,\n    devicePixelRatio: dpr,\n  });\n  canvas.setChart?.(chart);\n  chart.setOption(buildMonthlyOption());\n  monthlyExpenseChart = chart;\n  return chart;\n};\n\nconst initYearlyExpenseChart = (\n  canvas: any,\n  width: number,\n  height: number,\n  dpr: number\n) => {\n  const chart = echarts.init(canvas, null, {\n    width,\n    height,\n    devicePixelRatio: dpr,\n  });\n  canvas.setChart?.(chart);\n  chart.setOption(buildYearlyOption());\n  yearlyExpenseChart = chart;\n  return chart;\n};\n\nconst refreshMonthlyExpenseChart = () => {\n  monthlyExpenseChart?.setOption(buildMonthlyOption(), true);\n};\n\nconst refreshYearlyExpenseChart = () => {\n  yearlyExpenseChart?.setOption(buildYearlyOption(), true);\n};\n\nconst monthlyExpenseEc = ref({\n  lazyLoad: false,\n  onInit: initMonthlyExpenseChart,\n});\nconst yearlyExpenseEc = ref({\n  lazyLoad: false,\n  onInit: initYearlyExpenseChart,\n});\n\n// ============= ÁîüÂëΩÂë®Êúü =============\nonUnmounted(() => {\n  monthlyExpenseChart?.dispose();\n  yearlyExpenseChart?.dispose();\n  monthlyExpenseChart = null;\n  yearlyExpenseChart = null;\n});\n\nonShow(() => {\n  refreshLoginState();\n  fetchProfile().then(() => {\n    // ÂÖàÊãøÂà∞‰∫§ËΩ¶Êó•ÊúüÔºåÂÜçÊãâÁªüËÆ°\n    fetchHeroData(heroRange.value.key);\n  });\n  fetchMonthlyCost(monthlyRange.value.key);\n  fetchYearlyTrend(yearlyRange.value.key);\n});\n\n// Êó∂Èó¥Á∫øÁé∞Âú®Áî®‰∏çÂà∞ÁúüÂÆûÊï∞ÊçÆÔºåÂÖà‰øùÁïôÂ∑•ÂÖ∑ÂáΩÊï∞Ôºà‰ª•ÂêéÊâ©Â±ïÁî®Ôºâ\n// const getCategoryMeta = (category: ExpenseCategory) => CATEGORY_META[category];\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/uni.scss';\n\n.expense-page {\n  padding: 32rpx 32rpx calc(200rpx + env(safe-area-inset-bottom, 0px));\n  background: linear-gradient(180deg, #f9fbff 0%, #f2f4f8 100%);\n}\n\n.expense-page--locked {\n  height: 100vh;\n  overflow: hidden;\n}\n\n.hero-card {\n  // background: linear-gradient(135deg, #e9f7ff 0%, #f4f1ff 55%, #e9fdf2 100%);\n  background: linear-gradient(135deg, #1ec15f 0%, #4ab3ff 100%);\n  border-radius: 32rpx;\n  padding: 32rpx;\n  box-shadow: 0 28rpx 60rpx rgba(34, 94, 175, 0.18);\n  margin-bottom: 32rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 24rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n.hero-card__title-row,\n.hero-card__equation,\n.hero-divider,\n.hero-card__metrics {\n  position: relative;\n  z-index: 1;\n}\n\n.hero-card::before,\n.hero-card::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n}\n\n.hero-card::before {\n  background: radial-gradient(\n      circle at 15% 20%,\n      rgba(255, 255, 255, 0.8),\n      transparent 55%\n    ),\n    radial-gradient(circle at 85% 0%, rgba(255, 255, 255, 0.6), transparent 45%);\n  opacity: 0.8;\n}\n\n.hero-card::after {\n  inset: auto -50% -60% -50%;\n  height: 180rpx;\n  background: linear-gradient(\n    120deg,\n    rgba(255, 255, 255, 0.05) 0%,\n    rgba(255, 255, 255, 0.6) 50%,\n    rgba(255, 255, 255, 0.05) 100%\n  );\n  filter: blur(6rpx);\n}\n\n.hero-card__title-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.hero-card__title {\n  font-size: 34rpx;\n  font-weight: 700;\n}\n\n.hero-card__filter {\n  padding: 10rpx 20rpx;\n  border-radius: 999rpx;\n  border: 1rpx solid #e6e9f2;\n  font-size: 24rpx;\n  color: #1f2329;\n  display: flex;\n  align-items: center;\n  gap: 6rpx;\n}\n\n.hero-card__filter-icon {\n  font-size: 22rpx;\n}\n\n.hero-card__equation {\n  display: grid;\n  grid-template-columns: 1fr auto 1fr auto 1fr;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.equation-block {\n  background: rgba(255, 255, 255, 0.78);\n  border-radius: 24rpx;\n  padding: 18rpx;\n}\n\n.equation-label {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  font-size: 24rpx;\n  color: #5f6673;\n}\n\n.info-badge {\n  width: 28rpx;\n  height: 28rpx;\n  border-radius: 50%;\n  background: #eef1f5;\n  font-size: 20rpx;\n  color: #8a93a0;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.equation-value {\n  display: flex;\n  align-items: baseline;\n  gap: 6rpx;\n  margin-top: 8rpx;\n}\n\n.equation-number {\n  font-size: 36rpx;\n  font-weight: 700;\n  color: #1f2329;\n}\n\n.equation-value--accent .equation-number {\n  color: #e64a3b;\n}\n\n.equation-unit {\n  font-size: 22rpx;\n  color: #8a93a0;\n}\n\n.equation-operator {\n  font-size: 34rpx;\n  color: #81858f;\n}\n\n.hero-divider {\n  height: 1rpx;\n  background: #8a93a0;\n}\n\n.hero-card__metrics {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 18rpx;\n}\n\n.hero-metric {\n  background: rgba(255, 255, 255, 0.78);\n  border-radius: 20rpx;\n  padding: 18rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 6rpx;\n}\n\n.hero-metric__value {\n  font-size: 32rpx;\n  font-weight: 700;\n  color: #1f2329;\n}\n\n.hero-metric__unit {\n  font-size: 22rpx;\n  color: #8a93a0;\n}\n\n.chart-card,\n.timeline {\n  background: #fff;\n  border-radius: 32rpx;\n  padding: 32rpx;\n  box-shadow: $soft-shadow;\n  margin-bottom: 28rpx;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24rpx;\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: 700;\n}\n\n.section-subtitle {\n  font-size: 24rpx;\n  color: $muted-text;\n}\n\n.chart-filter {\n  padding: 10rpx 18rpx;\n  border-radius: 999rpx;\n  border: 1rpx solid #e0e6ef;\n  font-size: 24rpx;\n  color: #5f6673;\n  display: flex;\n  align-items: center;\n  gap: 6rpx;\n}\n\n.chart-filter__icon {\n  font-size: 22rpx;\n  color: #94a2b8;\n}\n\n.chart-body {\n  margin-top: 12rpx;\n  min-height: 300rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chart-canvas {\n  width: 100%;\n  height: 320rpx;\n}\n\n.chart-placeholder {\n  width: 100%;\n  text-align: center;\n  color: #8a93a0;\n  font-size: 26rpx;\n  padding: 60rpx 0;\n}\n\n// .timeline {\n//   position: relative;\n//   padding-top: 16rpx;\n// }\n\n// .timeline-track {\n//   position: absolute;\n//   top: 80rpx;\n//   bottom: 32rpx;\n//   left: 46rpx;\n//   width: 4rpx;\n//   background: linear-gradient(180deg, #d1d6e6 0%, rgba(209, 214, 230, 0) 100%);\n// }\n\n// .timeline-item {\n//   position: relative;\n//   padding-left: 60rpx;\n//   margin-bottom: 32rpx;\n// }\n\n// .timeline-marker {\n//   position: absolute;\n//   left: 24rpx;\n//   top: 16rpx;\n//   width: 36rpx;\n//   height: 36rpx;\n//   border-radius: 50%;\n//   border-width: 6rpx;\n//   border-style: solid;\n//   background: #fff;\n// }\n\n// .timeline-content {\n//   background: #fff;\n//   border-radius: 28rpx;\n//   padding: 24rpx;\n//   box-shadow: 0 20rpx 32rpx rgba(15, 25, 80, 0.08);\n//   border: 1rpx solid #eef1f5;\n// }\n\n// .timeline-row {\n//   display: flex;\n//   justify-content: space-between;\n//   align-items: center;\n// }\n\n// .timeline-date {\n//   font-size: 30rpx;\n//   font-weight: 600;\n// }\n\n// .timeline-amount {\n//   font-size: 32rpx;\n//   font-weight: 700;\n// }\n\n// .timeline-tag {\n//   margin-top: 12rpx;\n//   display: flex;\n//   align-items: center;\n//   gap: 12rpx;\n//   font-size: 26rpx;\n// }\n\n// .timeline-tag__icon {\n//   font-size: 28rpx;\n// }\n\n// .timeline-tag__status {\n//   margin-left: auto;\n//   font-size: 22rpx;\n//   padding: 6rpx 18rpx;\n//   border-radius: 999rpx;\n//   background: rgba(30, 193, 95, 0.1);\n//   color: #1ec15f;\n// }\n\n// .timeline-meta {\n//   margin-top: 12rpx;\n//   display: flex;\n//   justify-content: space-between;\n//   font-size: 24rpx;\n//   color: $muted-text;\n// }\n\n// .timeline-meta text:last-child {\n//   text-align: right;\n// }\n\n// .timeline-remark {\n//   margin-top: 12rpx;\n//   font-size: 24rpx;\n//   color: #1f2329;\n// }\n</style>\n","import MiniProgramPage from '/Users/alan2/Downloads/zm/cat-life-uniapp-wechat/pages/expense/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useAuth","ref","axios","uni","computed","onUnmounted","onShow"],"mappings":"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"}
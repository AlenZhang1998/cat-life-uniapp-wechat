{"version":3,"file":"index.js","sources":["pages/add/index.vue","pages/add/index.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"add-page\">\n    <view class=\"page-header\">\n      <text class=\"page-title\">记录本次加油</text>\n      <text class=\"page-desc\">完善必填信息，可选项帮助获得更精准的油耗分析</text>\n    </view>\n\n    <!-- 输入表单，包含日期、里程、油费等核心信息 -->\n    <view class=\"form-card\">\n      <view class=\"section-divider\">\n        <text class=\"section-title\">必填信息</text>\n        <text class=\"section-subtitle\">用于计算本次油耗</text>\n      </view>\n      <view class=\"form-item\">\n        <text class=\"form-label\">加油日期 *</text>\n        <picker mode=\"date\" :value=\"form.date\" @change=\"handleDateChange\">\n          <view class=\"picker-value\">{{ form.date }}</view>\n        </picker>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">加油时间 *</text>\n        <picker mode=\"time\" :value=\"form.time\" @change=\"handleTimeChange\">\n          <view class=\"picker-value\">{{ form.time }}</view>\n        </picker>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">当前里程 (公里) *</text>\n        <input\n          class=\"form-input\"\n          type=\"number\"\n          placeholder=\"请输入仪表盘当前里程\"\n          :value=\"form.mileage\"\n          @input=\"(e) => handleFieldChange('mileage', e.detail.value)\"\n        />\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">燃油标号 *</text>\n        <picker\n          mode=\"selector\"\n          :value=\"Math.max(fuelGradeOptions.indexOf(form.fuelGrade), 0)\"\n          :range=\"fuelGradeOptions\"\n          @change=\"handleFuelGradeChange\"\n        >\n          <view class=\"picker-value\">{{ form.fuelGrade }}</view>\n        </picker>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">油价 (元/升) *</text>\n        <input\n          class=\"form-input\"\n          type=\"digit\"\n          placeholder=\"请输入本次加油油价\"\n          :value=\"form.fuelPrice\"\n          @input=\"(e) => handleFieldChange('fuelPrice', e.detail.value)\"\n        />\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">加油金额 (元) *</text>\n        <input\n          class=\"form-input\"\n          type=\"digit\"\n          placeholder=\"请输入本次加油金额\"\n          :value=\"form.amount\"\n          @input=\"(e) => handleFieldChange('amount', e.detail.value)\"\n        />\n      </view>\n\n      <view class=\"form-item toggle-item\">\n        <text class=\"form-label\">是否加满跳枪</text>\n        <view class=\"toggle-control\">\n          <text\n            class=\"toggle-value\"\n            :class=\"{ on: form.fullAutoStop, off: !form.fullAutoStop }\"\n          >\n            {{ form.fullAutoStop ? '是' : '否' }}\n          </text>\n          <switch\n            :class=\"['switch-gradient', form.fullAutoStop ? 'switch-gradient--on' : '']\"\n            :checked=\"form.fullAutoStop\"\n            @change=\"(e) => handleSwitchChange('fullAutoStop', e.detail.value)\"\n          ></switch>\n        </view>\n      </view>\n\n      <view class=\"section-divider\">\n        <text class=\"section-title\">补充信息</text>\n        <text class=\"section-subtitle\">描述习惯与车辆状态</text>\n      </view>\n\n      <view class=\"form-item toggle-item\">\n        <text class=\"form-label\">是否亮燃油警告灯</text>\n        <view class=\"toggle-control\">\n          <text\n            class=\"toggle-value\"\n            :class=\"{ on: form.warningLight, off: !form.warningLight }\"\n          >\n            {{ form.warningLight ? '是' : '否' }}\n          </text>\n          <switch\n            :class=\"['switch-gradient', form.warningLight ? 'switch-gradient--on' : '']\"\n            :checked=\"form.warningLight\"\n            @change=\"(e) => handleSwitchChange('warningLight', e.detail.value)\"\n          ></switch>\n        </view>\n      </view>\n\n      <view class=\"form-item toggle-item\">\n        <text class=\"form-label\">上次是否记录</text>\n        <view class=\"toggle-control\">\n          <text\n            class=\"toggle-value\"\n            :class=\"{ on: form.hasPreviousRecord, off: !form.hasPreviousRecord }\"\n          >\n            {{ form.hasPreviousRecord ? '是' : '否' }}\n          </text>\n          <switch\n            :class=\"['switch-gradient', form.hasPreviousRecord ? 'switch-gradient--on' : '']\"\n            :checked=\"form.hasPreviousRecord\"\n            @change=\"(e) => handleSwitchChange('hasPreviousRecord', e.detail.value)\"\n          ></switch>\n        </view>\n      </view>\n\n      <view class=\"form-item\">\n        <text class=\"form-label\">备注</text>\n        <textarea\n          class=\"form-textarea\"\n          maxlength=\"200\"\n          placeholder=\"例如：城际高速 + 空调节能模式\"\n          :value=\"form.remark\"\n          @input=\"(e) => handleFieldChange('remark', e.detail.value)\"\n        />\n      </view>\n    </view>\n\n    <!-- 提交按钮 -->\n    <button class=\"submit-btn\" type=\"primary\" @tap=\"handleSubmit\">\n      保存油耗记录\n    </button>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive } from 'vue'\n\nconst now = new Date()\nconst defaultDate = now.toISOString().slice(0, 10)\nconst defaultTime = now.toTimeString().slice(0, 5)\n\nconst fuelGradeOptions = ['92#', '95#', '98#', '0#柴油', 'E充电']\n\ntype FormModel = {\n  date: string\n  time: string\n  mileage: string\n  fuelGrade: string\n  fuelPrice: string\n  amount: string\n  fullAutoStop: boolean\n  warningLight: boolean\n  hasPreviousRecord: boolean\n  remark: string\n}\n\ntype TextFieldKey = 'mileage' | 'fuelPrice' | 'amount' | 'remark'\n\n// 使用 reactive 构建表单数据，后续可便捷地提交给后端接口\nconst form = reactive<FormModel>({\n  date: defaultDate,\n  time: defaultTime,\n  mileage: '',\n  fuelGrade: fuelGradeOptions[0],\n  fuelPrice: '',\n  amount: '',\n  fullAutoStop: false,\n  warningLight: false,\n  hasPreviousRecord: true,\n  remark: ''\n})\n\n/**\n * picker 选择日期后更新对应字段\n */\nconst handleDateChange = (event: { detail: { value: string } }) => {\n  form.date = event.detail.value\n}\n\n/**\n * picker 选择时间\n */\nconst handleTimeChange = (event: { detail: { value: string } }) => {\n  form.time = event.detail.value\n}\n\n/**\n * 选择燃油标号\n */\nconst handleFuelGradeChange = (event: { detail: { value: number } }) => {\n  const index = Number(event.detail.value)\n  form.fuelGrade = fuelGradeOptions[index] || form.fuelGrade\n}\n\n/**\n * 输入框改变时的统一处理方法\n * @param key 需要更新的字段名称\n * @param value 新值\n */\nconst handleFieldChange = (key: TextFieldKey, value: string) => {\n  form[key] = value\n}\n\n/**\n * 处理开关项\n */\nconst handleSwitchChange = (\n  key: 'fullAutoStop' | 'warningLight' | 'hasPreviousRecord',\n  value: boolean\n) => {\n  form[key] = value\n}\n\n/**\n * 简单的模拟提交，实际开发中可调用云函数或 HTTP 接口\n */\nconst handleSubmit = () => {\n  if (!form.date || !form.time || !form.mileage || !form.fuelGrade || !form.fuelPrice || !form.amount) {\n    uni.showToast({\n      title: '请完善必填项',\n      icon: 'none'\n    })\n    return\n  }\n\n  uni.showToast({\n    title: '保存成功',\n    icon: 'success'\n  })\n\n  // 保存成功后可根据业务清空表单，这里简单重置数值字段\n  form.mileage = ''\n  form.fuelPrice = ''\n  form.amount = ''\n  form.fullAutoStop = false\n  form.warningLight = false\n  form.hasPreviousRecord = false\n  form.remark = ''\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/uni.scss';\n\n.add-page {\n  min-height: 100vh;\n  padding: 48rpx 32rpx 220rpx;\n  background: linear-gradient(180deg, #f6fbff 0%, #eef6f2 35%, #f8fbfd 100%);\n}\n\n.page-header {\n  margin-bottom: 32rpx;\n  padding: 32rpx 36rpx;\n  border-radius: 32rpx;\n  background: linear-gradient(135deg, rgba(30, 193, 95, 0.14), rgba(88, 177, 255, 0.14));\n  border: 1rpx solid rgba(30, 193, 95, 0.16);\n  box-shadow: 0 24rpx 45rpx rgba(30, 193, 95, 0.12);\n}\n\n.page-title {\n  display: block;\n  font-size: 40rpx;\n  font-weight: 700;\n  margin-bottom: 12rpx;\n  color: #0f172a;\n}\n\n.page-desc {\n  font-size: 26rpx;\n  color: #5b6472;\n}\n\n.form-card {\n  background-color: #fff;\n  border-radius: $card-radius;\n  padding: 40rpx 32rpx 44rpx;\n  box-shadow: 0 28rpx 60rpx rgba(15, 23, 42, 0.08);\n  border: 1rpx solid rgba(8, 16, 44, 0.05);\n}\n\n.form-item {\n  margin-bottom: 28rpx;\n}\n\n.form-item:last-child {\n  margin-bottom: 0;\n}\n\n.form-label {\n  display: block;\n  font-size: 28rpx;\n  font-weight: 600;\n  margin-bottom: 12rpx;\n}\n\n.form-item.toggle-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.form-item.toggle-item .form-label {\n  margin-bottom: 0;\n}\n\n.toggle-control {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  padding: 4rpx 8rpx;\n  border-radius: 999rpx;\n  // background-color: rgba(244, 247, 252, 0.9);\n}\n\n.toggle-value {\n  min-width: 48rpx;\n  text-align: right;\n  font-size: 26rpx;\n  font-weight: 600;\n  color: $muted-text;\n}\n\n.toggle-value.on {\n  color: $primary-dark;\n}\n\n// :deep(.switch-gradient .wx-switch-input) {\n//   width: 120rpx;\n//   height: 64rpx;\n//   border-radius: 999rpx;\n//   background-color: #e1e7ef;\n//   border: none;\n//   transition: background 0.3s ease, box-shadow 0.3s ease;\n// }\n\n// :deep(.switch-gradient .wx-switch-input::after) {\n//   width: 56rpx;\n//   height: 56rpx;\n//   top: 4rpx;\n//   left: 4rpx;\n//   border-radius: 50%;\n//   box-shadow: 0 6rpx 16rpx rgba(15, 23, 42, 0.25);\n//   background: #fff;\n// }\n\n:deep(.switch-gradient.switch-gradient--on .wx-switch-input) {\n  background: linear-gradient(180deg, #1ec15f 0%, #22d78a 100%);\n  box-shadow: 0 12rpx 26rpx rgba(17, 168, 70, 0.35);\n}\n\n.section-divider {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  margin: 12rpx 0 32rpx;\n  padding-bottom: 16rpx;\n  border-bottom: 1rpx dashed rgba(11, 23, 52, 0.08);\n}\n\n.section-title {\n  font-size: 30rpx;\n  font-weight: 700;\n}\n\n.section-subtitle {\n  font-size: 24rpx;\n  color: $muted-text;\n}\n\n.picker-value,\n.form-input,\n.form-textarea {\n  width: 100%;\n  box-sizing: border-box;\n  background: linear-gradient(135deg, #f8fbff 0%, #f1f6fb 100%);\n  border-radius: 20rpx;\n  padding: 26rpx;\n  font-size: 28rpx;\n  color: #1f2329;\n  border: 1rpx solid rgba(120, 146, 172, 0.18);\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.form-input {\n  height: 88rpx;\n}\n\n.form-textarea {\n  min-height: 160rpx;\n}\n\n.picker-value:focus,\n.form-input:focus,\n.form-textarea:focus {\n  border-color: rgba(17, 168, 70, 0.55);\n  box-shadow: 0 12rpx 28rpx rgba(17, 168, 70, 0.12);\n}\n\n.submit-btn {\n  margin-top: 48rpx;\n  background: linear-gradient(180deg, #1ec15f 0%, #22d78a 100%);\n  border: none;\n  border-radius: 999rpx;\n  height: 96rpx;\n  line-height: 96rpx;\n  color: #fff;\n  font-size: 32rpx;\n  font-weight: 600;\n  box-shadow: 0 18rpx 36rpx rgba(30, 193, 95, 0.28);\n}\n</style>\n","import MiniProgramPage from '/Users/alan2/Downloads/zm/cat-life-uniapp-wechat/pages/add/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","uni"],"mappings":";;;;;AAsJM,UAAA,0BAAU;AAChB,UAAM,cAAc,IAAI,YAAA,EAAc,MAAM,GAAG,EAAE;AACjD,UAAM,cAAc,IAAI,aAAA,EAAe,MAAM,GAAG,CAAC;AAEjD,UAAM,mBAAmB,CAAC,OAAO,OAAO,OAAO,QAAQ,KAAK;AAkB5D,UAAM,OAAOA,cAAAA,SAAoB;AAAA,MAC/B,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,WAAW,iBAAiB,CAAC;AAAA,MAC7B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,cAAc;AAAA,MACd,cAAc;AAAA,MACd,mBAAmB;AAAA,MACnB,QAAQ;AAAA,IAAA,CACT;AAKK,UAAA,mBAAmB,CAAC,UAAyC;AAC5D,WAAA,OAAO,MAAM,OAAO;AAAA,IAAA;AAMrB,UAAA,mBAAmB,CAAC,UAAyC;AAC5D,WAAA,OAAO,MAAM,OAAO;AAAA,IAAA;AAMrB,UAAA,wBAAwB,CAAC,UAAyC;AACtE,YAAM,QAAQ,OAAO,MAAM,OAAO,KAAK;AACvC,WAAK,YAAY,iBAAiB,KAAK,KAAK,KAAK;AAAA,IAAA;AAQ7C,UAAA,oBAAoB,CAAC,KAAmB,UAAkB;AAC9D,WAAK,GAAG,IAAI;AAAA,IAAA;AAMR,UAAA,qBAAqB,CACzB,KACA,UACG;AACH,WAAK,GAAG,IAAI;AAAA,IAAA;AAMd,UAAM,eAAe,MAAM;AACzB,UAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,QAAQ,CAAC,KAAK,WAAW,CAAC,KAAK,aAAa,CAAC,KAAK,aAAa,CAAC,KAAK,QAAQ;AACnGC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MACF;AAEAA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MAAA,CACP;AAGD,WAAK,UAAU;AACf,WAAK,YAAY;AACjB,WAAK,SAAS;AACd,WAAK,eAAe;AACpB,WAAK,eAAe;AACpB,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzPhB,GAAG,WAAW,eAAe;"}
{"version":3,"file":"index.js","sources":["pages/add/index.vue","../../../App/hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"add-page\">\r\n    <view class=\"page-header\">\r\n      <text class=\"page-title\">记录本次加油</text>\r\n      <text class=\"page-desc\">完善必填信息，可选项帮助获得更精准的油耗分析</text>\r\n    </view>\r\n\r\n    <!-- 输入表单，包含日期、里程、油费等核心信息 -->\r\n    <view class=\"form-card\">\r\n      <view class=\"section-divider\">\r\n        <text class=\"section-title\">必填信息</text>\r\n        <text class=\"section-subtitle\">用于计算本次油耗</text>\r\n      </view>\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">加油日期 *</text>\r\n        <picker mode=\"date\" :value=\"form.date\" @change=\"handleDateChange\">\r\n          <view class=\"picker-value\">{{ form.date }}</view>\r\n        </picker>\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">加油时间 *</text>\r\n        <picker mode=\"time\" :value=\"form.time\" @change=\"handleTimeChange\">\r\n          <view class=\"picker-value\">{{ form.time }}</view>\r\n        </picker>\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">当前里程 (公里) *</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"number\"\r\n          placeholder=\"请输入仪表盘当前里程\"\r\n          :value=\"form.mileage\"\r\n          @input=\"(e) => handleFieldChange('mileage', e.detail.value)\"\r\n        />\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">燃油标号 *</text>\r\n        <picker\r\n          mode=\"selector\"\r\n          :value=\"Math.max(fuelGradeOptions.indexOf(form.fuelGrade), 0)\"\r\n          :range=\"fuelGradeOptions\"\r\n          @change=\"handleFuelGradeChange\"\r\n        >\r\n          <view class=\"picker-value\">{{ form.fuelGrade }}</view>\r\n        </picker>\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">油价 (元/升) *</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"digit\"\r\n          placeholder=\"请输入本次加油油价\"\r\n          :value=\"form.fuelPrice\"\r\n          @input=\"(e) => handleFieldChange('fuelPrice', e.detail.value)\"\r\n        />\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">加油金额 (元) *</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"digit\"\r\n          placeholder=\"请输入本次加油金额\"\r\n          :value=\"form.amount\"\r\n          @input=\"(e) => handleFieldChange('amount', e.detail.value)\"\r\n        />\r\n      </view>\r\n\r\n      <view class=\"form-item toggle-item\">\r\n        <text class=\"form-label\">是否加满跳枪</text>\r\n        <view class=\"toggle-control\">\r\n          <text\r\n            class=\"toggle-value\"\r\n            :class=\"{ on: form.fullAutoStop, off: !form.fullAutoStop }\"\r\n          >\r\n            {{ form.fullAutoStop ? '是' : '否' }}\r\n          </text>\r\n          <switch\r\n            :class=\"['switch-gradient', form.fullAutoStop ? 'switch-gradient--on' : '']\"\r\n            :checked=\"form.fullAutoStop\"\r\n            @change=\"(e) => handleSwitchChange('fullAutoStop', e.detail.value)\"\r\n          ></switch>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section-divider\">\r\n        <text class=\"section-title\">补充信息</text>\r\n        <text class=\"section-subtitle\">描述习惯与车辆状态</text>\r\n      </view>\r\n\r\n      <view class=\"form-item toggle-item\">\r\n        <text class=\"form-label\">是否亮燃油警告灯</text>\r\n        <view class=\"toggle-control\">\r\n          <text\r\n            class=\"toggle-value\"\r\n            :class=\"{ on: form.warningLight, off: !form.warningLight }\"\r\n          >\r\n            {{ form.warningLight ? '是' : '否' }}\r\n          </text>\r\n          <switch\r\n            :class=\"['switch-gradient', form.warningLight ? 'switch-gradient--on' : '']\"\r\n            :checked=\"form.warningLight\"\r\n            @change=\"(e) => handleSwitchChange('warningLight', e.detail.value)\"\r\n          ></switch>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"form-item toggle-item\">\r\n        <text class=\"form-label\">上次是否记录</text>\r\n        <view class=\"toggle-control\">\r\n          <text\r\n            class=\"toggle-value\"\r\n            :class=\"{ on: form.hasPreviousRecord, off: !form.hasPreviousRecord }\"\r\n          >\r\n            {{ form.hasPreviousRecord ? '是' : '否' }}\r\n          </text>\r\n          <switch\r\n            :class=\"['switch-gradient', form.hasPreviousRecord ? 'switch-gradient--on' : '']\"\r\n            :checked=\"form.hasPreviousRecord\"\r\n            @change=\"(e) => handleSwitchChange('hasPreviousRecord', e.detail.value)\"\r\n          ></switch>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"form-item\">\r\n        <text class=\"form-label\">备注</text>\r\n        <textarea\r\n          class=\"form-textarea\"\r\n          maxlength=\"200\"\r\n          placeholder=\"例如：城际高速 + 空调节能模式\"\r\n          :value=\"form.remark\"\r\n          @input=\"(e) => handleFieldChange('remark', e.detail.value)\"\r\n        />\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 提交按钮 -->\r\n    <button class=\"submit-btn\" type=\"primary\" @tap=\"handleSubmit\">\r\n      保存油耗记录\r\n    </button>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { reactive } from 'vue'\r\n\r\nconst now = new Date()\r\nconst defaultDate = now.toISOString().slice(0, 10)\r\nconst defaultTime = now.toTimeString().slice(0, 5)\r\n\r\nconst fuelGradeOptions = ['92#', '95#', '98#', '0#柴油', 'E充电']\r\n\r\ntype FormModel = {\r\n  date: string\r\n  time: string\r\n  mileage: string\r\n  fuelGrade: string\r\n  fuelPrice: string\r\n  amount: string\r\n  fullAutoStop: boolean\r\n  warningLight: boolean\r\n  hasPreviousRecord: boolean\r\n  remark: string\r\n}\r\n\r\ntype TextFieldKey = 'mileage' | 'fuelPrice' | 'amount' | 'remark'\r\n\r\n// 使用 reactive 构建表单数据，后续可便捷地提交给后端接口\r\nconst form = reactive<FormModel>({\r\n  date: defaultDate,\r\n  time: defaultTime,\r\n  mileage: '',\r\n  fuelGrade: fuelGradeOptions[0],\r\n  fuelPrice: '',\r\n  amount: '',\r\n  fullAutoStop: false,\r\n  warningLight: false,\r\n  hasPreviousRecord: true,\r\n  remark: ''\r\n})\r\n\r\n/**\r\n * picker 选择日期后更新对应字段\r\n */\r\nconst handleDateChange = (event: { detail: { value: string } }) => {\r\n  form.date = event.detail.value\r\n}\r\n\r\n/**\r\n * picker 选择时间\r\n */\r\nconst handleTimeChange = (event: { detail: { value: string } }) => {\r\n  form.time = event.detail.value\r\n}\r\n\r\n/**\r\n * 选择燃油标号\r\n */\r\nconst handleFuelGradeChange = (event: { detail: { value: number } }) => {\r\n  const index = Number(event.detail.value)\r\n  form.fuelGrade = fuelGradeOptions[index] || form.fuelGrade\r\n}\r\n\r\n/**\r\n * 输入框改变时的统一处理方法\r\n * @param key 需要更新的字段名称\r\n * @param value 新值\r\n */\r\nconst handleFieldChange = (key: TextFieldKey, value: string) => {\r\n  form[key] = value\r\n}\r\n\r\n/**\r\n * 处理开关项\r\n */\r\nconst handleSwitchChange = (\r\n  key: 'fullAutoStop' | 'warningLight' | 'hasPreviousRecord',\r\n  value: boolean\r\n) => {\r\n  form[key] = value\r\n}\r\n\r\n/**\r\n * 简单的模拟提交，实际开发中可调用云函数或 HTTP 接口\r\n */\r\nconst handleSubmit = () => {\r\n  if (!form.date || !form.time || !form.mileage || !form.fuelGrade || !form.fuelPrice || !form.amount) {\r\n    uni.showToast({\r\n      title: '请完善必填项',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n\r\n  uni.showToast({\r\n    title: '保存成功',\r\n    icon: 'success'\r\n  })\r\n\r\n  // 保存成功后可根据业务清空表单，这里简单重置数值字段\r\n  form.mileage = ''\r\n  form.fuelPrice = ''\r\n  form.amount = ''\r\n  form.fullAutoStop = false\r\n  form.warningLight = false\r\n  form.hasPreviousRecord = false\r\n  form.remark = ''\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/uni.scss';\r\n\r\n.add-page {\r\n  min-height: 100vh;\r\n  padding: 48rpx 32rpx 220rpx;\r\n  background: linear-gradient(180deg, #f6fbff 0%, #eef6f2 35%, #f8fbfd 100%);\r\n}\r\n\r\n.page-header {\r\n  margin-bottom: 32rpx;\r\n  padding: 32rpx 36rpx;\r\n  border-radius: 32rpx;\r\n  background: linear-gradient(135deg, rgba(30, 193, 95, 0.14), rgba(88, 177, 255, 0.14));\r\n  border: 1rpx solid rgba(30, 193, 95, 0.16);\r\n  box-shadow: 0 24rpx 45rpx rgba(30, 193, 95, 0.12);\r\n}\r\n\r\n.page-title {\r\n  display: block;\r\n  font-size: 40rpx;\r\n  font-weight: 700;\r\n  margin-bottom: 12rpx;\r\n  color: #0f172a;\r\n}\r\n\r\n.page-desc {\r\n  font-size: 26rpx;\r\n  color: #5b6472;\r\n}\r\n\r\n.form-card {\r\n  background-color: #fff;\r\n  border-radius: $card-radius;\r\n  padding: 40rpx 32rpx 44rpx;\r\n  box-shadow: 0 28rpx 60rpx rgba(15, 23, 42, 0.08);\r\n  border: 1rpx solid rgba(8, 16, 44, 0.05);\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 28rpx;\r\n}\r\n\r\n.form-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.form-item.toggle-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.form-item.toggle-item .form-label {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.toggle-control {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n  padding: 4rpx 8rpx;\r\n  border-radius: 999rpx;\r\n  // background-color: rgba(244, 247, 252, 0.9);\r\n}\r\n\r\n.toggle-value {\r\n  min-width: 48rpx;\r\n  text-align: right;\r\n  font-size: 26rpx;\r\n  font-weight: 600;\r\n  color: $muted-text;\r\n}\r\n\r\n.toggle-value.on {\r\n  color: $primary-dark;\r\n}\r\n\r\n// :deep(.switch-gradient .wx-switch-input) {\r\n//   width: 120rpx;\r\n//   height: 64rpx;\r\n//   border-radius: 999rpx;\r\n//   background-color: #e1e7ef;\r\n//   border: none;\r\n//   transition: background 0.3s ease, box-shadow 0.3s ease;\r\n// }\r\n\r\n// :deep(.switch-gradient .wx-switch-input::after) {\r\n//   width: 56rpx;\r\n//   height: 56rpx;\r\n//   top: 4rpx;\r\n//   left: 4rpx;\r\n//   border-radius: 50%;\r\n//   box-shadow: 0 6rpx 16rpx rgba(15, 23, 42, 0.25);\r\n//   background: #fff;\r\n// }\r\n\r\n:deep(.switch-gradient.switch-gradient--on .wx-switch-input) {\r\n  background: linear-gradient(180deg, #1ec15f 0%, #22d78a 100%);\r\n  box-shadow: 0 12rpx 26rpx rgba(17, 168, 70, 0.35);\r\n}\r\n\r\n.section-divider {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n  margin: 12rpx 0 32rpx;\r\n  padding-bottom: 16rpx;\r\n  border-bottom: 1rpx dashed rgba(11, 23, 52, 0.08);\r\n}\r\n\r\n.section-title {\r\n  font-size: 30rpx;\r\n  font-weight: 700;\r\n}\r\n\r\n.section-subtitle {\r\n  font-size: 24rpx;\r\n  color: $muted-text;\r\n}\r\n\r\n.picker-value,\r\n.form-input,\r\n.form-textarea {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  background: linear-gradient(135deg, #f8fbff 0%, #f1f6fb 100%);\r\n  border-radius: 20rpx;\r\n  padding: 26rpx;\r\n  font-size: 28rpx;\r\n  color: #1f2329;\r\n  border: 1rpx solid rgba(120, 146, 172, 0.18);\r\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\n.form-input {\r\n  height: 88rpx;\r\n}\r\n\r\n.form-textarea {\r\n  min-height: 160rpx;\r\n}\r\n\r\n.picker-value:focus,\r\n.form-input:focus,\r\n.form-textarea:focus {\r\n  border-color: rgba(17, 168, 70, 0.55);\r\n  box-shadow: 0 12rpx 28rpx rgba(17, 168, 70, 0.12);\r\n}\r\n\r\n.submit-btn {\r\n  margin-top: 48rpx;\r\n  background: linear-gradient(180deg, #1ec15f 0%, #22d78a 100%);\r\n  border: none;\r\n  border-radius: 999rpx;\r\n  height: 96rpx;\r\n  line-height: 96rpx;\r\n  color: #fff;\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  box-shadow: 0 18rpx 36rpx rgba(30, 193, 95, 0.28);\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Learn/projectFile/cat-life-uniapp-wechat/pages/add/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","uni"],"mappings":";;;;;AAsJM,UAAA,0BAAU;AAChB,UAAM,cAAc,IAAI,YAAA,EAAc,MAAM,GAAG,EAAE;AACjD,UAAM,cAAc,IAAI,aAAA,EAAe,MAAM,GAAG,CAAC;AAEjD,UAAM,mBAAmB,CAAC,OAAO,OAAO,OAAO,QAAQ,KAAK;AAkB5D,UAAM,OAAOA,cAAAA,SAAoB;AAAA,MAC/B,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,WAAW,iBAAiB,CAAC;AAAA,MAC7B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,cAAc;AAAA,MACd,cAAc;AAAA,MACd,mBAAmB;AAAA,MACnB,QAAQ;AAAA,IAAA,CACT;AAKK,UAAA,mBAAmB,CAAC,UAAyC;AAC5D,WAAA,OAAO,MAAM,OAAO;AAAA,IAAA;AAMrB,UAAA,mBAAmB,CAAC,UAAyC;AAC5D,WAAA,OAAO,MAAM,OAAO;AAAA,IAAA;AAMrB,UAAA,wBAAwB,CAAC,UAAyC;AACtE,YAAM,QAAQ,OAAO,MAAM,OAAO,KAAK;AACvC,WAAK,YAAY,iBAAiB,KAAK,KAAK,KAAK;AAAA,IAAA;AAQ7C,UAAA,oBAAoB,CAAC,KAAmB,UAAkB;AAC9D,WAAK,GAAG,IAAI;AAAA,IAAA;AAMR,UAAA,qBAAqB,CACzB,KACA,UACG;AACH,WAAK,GAAG,IAAI;AAAA,IAAA;AAMd,UAAM,eAAe,MAAM;AACzB,UAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,QAAQ,CAAC,KAAK,WAAW,CAAC,KAAK,aAAa,CAAC,KAAK,aAAa,CAAC,KAAK,QAAQ;AACnGC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MACF;AAEAA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MAAA,CACP;AAGD,WAAK,UAAU;AACf,WAAK,YAAY;AACjB,WAAK,SAAS;AACd,WAAK,eAAe;AACpB,WAAK,eAAe;AACpB,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzPhB,GAAG,WAAW,eAAe;"}